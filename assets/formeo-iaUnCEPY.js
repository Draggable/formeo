var Ps=Object.defineProperty;var Ns=(n,t,e)=>t in n?Ps(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var m=(n,t,e)=>Ns(n,typeof t!="symbol"?t+"":t,e);var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function br(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ds=typeof Oe=="object"&&Oe&&Oe.Object===Object&&Oe,yr=Ds,Ms=yr,Ls=typeof self=="object"&&self&&self.Object===Object&&self,Is=Ms||Ls||Function("return this")(),lt=Is,Fs=lt,js=Fs.Symbol,Vn=js,Rs=Array.isArray,en=Rs,io=Vn,wr=Object.prototype,zs=wr.hasOwnProperty,Hs=wr.toString,ee=io?io.toStringTag:void 0;function Bs(n){var t=zs.call(n,ee),e=n[ee];try{n[ee]=void 0;var o=!0}catch{}var r=Hs.call(n);return o&&(t?n[ee]=e:delete n[ee]),r}var ks=Bs,Vs=Object.prototype,Ws=Vs.toString;function qs(n){return Ws.call(n)}var Gs=qs,ao=Vn,Us=ks,Ys=Gs,Ks="[object Null]",Xs="[object Undefined]",lo=ao?ao.toStringTag:void 0;function Zs(n){return n==null?n===void 0?Xs:Ks:lo&&lo in Object(n)?Us(n):Ys(n)}var ve=Zs;function Js(n){return n!=null&&typeof n=="object"}var Vt=Js;const co={},Qs=Object.freeze({method:"GET",body:""});function ti(n,t={}){const e={...Qs,...t},o=(n.startsWith("https"),co);return new Promise((r,s)=>{const i=o.request(n,e,a=>{ei(a,r)});i.on("error",a=>s(new Error(a.message))),e!=null&&e.body&&i.write(e.body),i.end()})}const ei=(n,t)=>{const e=[];n.on("data",o=>e.push(o)),n.on("end",()=>{const o=Buffer.concat(e),r={ok:n.statusCode>=200&&n.statusCode<300,status:n.statusCode,statusText:n.statusMessage,headers:new Map(Object.entries(n.headers)),body:o,arrayBuffer:()=>Promise.resolve(o),json:()=>Promise.resolve(JSON.parse(o.toString()))};t(r)})},uo={extension:".lang",location:"assets/lang/",langs:["en-US"],locale:"en-US",override:{}};class He{constructor(t=uo){this.langs=Object.create(null),this.loaded=[],this.processConfig(t)}processConfig(t){const{location:e,...o}={...uo,...t},r=e.replace(/\/?$/,"/");this.config={location:r,...o};const{override:s,preloaded:i={}}=this.config,a=Object.entries(this.langs).concat(Object.entries(s||i));this.langs=a.reduce((l,[c,d])=>(l[c]=this.applyLanguage(c,d),l),{}),this.locale=this.config.locale||this.config.langs[0]}init(t){return this.processConfig({...this.config,...t}),this.setCurrent(this.locale)}addLanguage(t,e={}){e=typeof e=="string"?He.processFile(e):e,this.applyLanguage(t,e),this.config.langs.push("locale")}getValue(t,e=this.locale){var o;return((o=this.langs[e])==null?void 0:o[t])||this.getFallbackValue(t)}getFallbackValue(t){const e=Object.values(this.langs).find(o=>o[t]);return e==null?void 0:e[t]}makeSafe(t){const e={"{":"\\{","}":"\\}","|":"\\|"};return t=t.replace(/[{}|]/g,o=>e[o]),new RegExp(t,"g")}put(t,e){return this.current[t]=e,e}get(t,e){const o=this;let r=this.getValue(t);if(!r)return;const s=r.match(/\{[^}]+?\}/g);if(e&&s)if(typeof e=="object")for(const i of s){const a=i.substring(1,i.length-1);r=r.replace(o.makeSafe(i),e[a]||"")}else r=r.replace(/\{[^}]+?\}/g,e);return r}static processFile(t){return He.fromFile(t.replace(/\n\n/g,`
`))}static fromFile(t){const e=t.split(`
`),o={};for(let r,s=0;s<e.length;s++)r=/^(.+?) *?= *?([^\n]+)/.exec(e[s]),r&&(o[r[1]]=r[2].replace(/(^\s+|\s+$)/g,""));return o}loadLang(t,e=!0){const o=this;return new Promise(function(r,s){if(o.loaded.indexOf(t)!==-1&&e)return o.applyLanguage(o.langs[t]),r(o.langs[t]);{const i=[o.config.location,t,o.config.extension].join("");return ti(i).then(({data:a})=>{const l=o.processFile(a);return o.applyLanguage(t,l),o.loaded.push(t),r(o.langs[t])}).catch(()=>{const a=o.applyLanguage(t);r(a)})}})}applyLanguage(t,e={}){const o=this.config.override[t]||{},r=this.langs[t]||{};return this.langs[t]={...r,...e,...o},this.langs[t]}get getLangs(){return this.config.langs}async setCurrent(t="en-US"){return await this.loadLang(t),this.locale=t,this.current=this.langs[t],this.current}}const y=new He,ni="formeo",oi="2.0.0",ri="module",si="dist/formeo.min.js",ii=["dist/*","demo/**/*"],ai="https://formeo.io",li={url:"https://github.com/Draggable/formeo",type:"git"},ci="Draggable https://draggable.io",di=[{name:"Kevin Chappell",email:"kevin.b.chappell@gmail.com",url:"https://kevin-chappell.com"}],ui={url:"https://github.com/draggable/formeo/issues"},hi="A zero dependency JavaScript module for drag and drop form creation.",pi=["drag and drop","form builder","form maker","forms"],fi="MIT",gi=["**/*","node_modules","test"],mi={files:{test:["test/**/*.spec.js"],"formeo-editor":{js:"src/js/editor.js"},"formeo-renderer":{js:"src/js/renderer.js"},site:["demo/assets/sass/site.scss"]}},vi={dev:"vite",preview:"vite preview",analyze:"webpack --mode production -p --progress --config tools/webpack.config --analyze",build:"npm-run-all -p build:icons build:formeo build:demo","build:formeo":"vite build --mode lib","build:formeo:watch":"npm run build:formeo -- --watch","build:demo":"vite build --mode demo","build:demo:watch":"vite build --mode demo --watch","build:icons":"node ./tools/generate-sprite",lint:"eslint ./src --ext .js || true",test:"node --experimental-test-snapshots --require ./tools/test-setup.cjs --test --no-warnings src/**/*.test.js","test:updateSnapshots":"node --experimental-test-snapshots --test-update-snapshots --require ./tools/test-setup.cjs --test --no-warnings src/**/*.test.js","test:ci":"yarn test --coverage",start:"npm-run-all build:icons dev","semantic-release":"semantic-release --ci --debug","travis-deploy-once":"travis-deploy-once --pro",prepush:"yarn test",defaults:"webpack-defaults"},bi={"@biomejs/biome":"^1.9.3","@commitlint/cli":"^19.5.0","@commitlint/config-conventional":"^19.5.0","@semantic-release/changelog":"^6.0.3","@semantic-release/git":"^10.0.1","@semantic-release/npm":"^12.0.1",jsdom:"^25.0.1",lefthook:"^1.7.18","npm-run-all":"^4.1.5","sass-embedded":"^1.80.1","semantic-release":"^24.1.2","svg-sprite":"^2.0.4",vite:"^5.4.8","vite-plugin-banner":"^0.8.0","vite-plugin-compression":"^0.5.1","vite-plugin-html":"^3.2.2"},yi={"formeo-i18n":"^2.1.3",lodash:"^4.17.21",mi18n:"^1.0.2",sortablejs:"^1.15.3"},wi={branch:"master",verifyConditions:["@semantic-release/changelog","@semantic-release/npm","@semantic-release/git"],prepare:["@semantic-release/changelog","@semantic-release/npm","@semantic-release/git"]},Ci={extends:["@commitlint/config-conventional"],rules:{"type-enum":[2,"always",["build","chore","ci","docs","feat","fix","perf","refactor","revert","style","test"]]}},Ei={name:ni,version:oi,type:ri,main:si,files:ii,homepage:ai,repository:li,author:ci,contributors:di,bugs:ui,description:hi,keywords:pi,license:fi,ignore:gi,config:mi,scripts:vi,devDependencies:bi,dependencies:yi,release:wi,commitlint:Ci},Wn=Ei.name,nn=Wn,ho=[{name:"cssPreload",src:"//cdnjs.cloudflare.com/ajax/libs/loadCSS/2.0.1/cssrelpreload.min.js"},{name:"mutationObserver",src:"//cdn.jsdelivr.net/npm/mutationobserver-shim/dist/mutationobserver.min.js"},{name:"fetch",src:"https://unpkg.com/unfetch/polyfill"}],_i="https://draggable.github.io/formeo/assets/img/formeo-sprite.svg",Tt="control-group",Wt=`${nn}-stage`,ut=`${nn}-row`,ot=`${nn}-column`,At=`${nn}-field`,Oi=new Map([[Wt,ut],[ut,ot],[ot,At]]),Si=["external","stages","rows","columns","fields"],xi=[{name:"controls",className:Tt},{name:"stage",className:Wt},{name:"row",className:ut},{name:"column",className:ot},{name:"field",className:At}],qn={controls:Tt,stage:Wt,row:ut,column:ot,field:At},Ti=Object.entries(qn).reduce((n,[t,e])=>({...n,[e]:t}),{}),Ai=Object.values(qn),$i=new RegExp(`${Ai.join("|")}`,"g"),Cr=xi.map(({name:n},t,e)=>{const{name:o}=e[t+1]||{};return o&&[n,o]}).filter(Boolean),Pi=Cr.slice().map(n=>n.slice().reverse()).reverse(),po=new Map(Cr),Ni=new Map(Pi.slice()),Di=[[{value:"100.0",label:"100%"}],[{value:"50.0,50.0",label:"50 | 50"},{value:"33.3,66.6",label:"33 | 66"},{value:"66.6,33.3",label:"66 | 33"}],[{value:"33.3,33.3,33.3",label:"33 | 33 | 33"},{value:"25.0,25.0,50.0",label:"25 | 25 | 50"},{value:"50.0,25.0,25.0",label:"50 | 25 | 25"},{value:"25.0,50.0,25.0",label:"25 | 50 | 25"}],[{value:"25.0,25.0,25.0,25.0",label:"25 | 25 | 25 | 25"}],[{value:"20.0,20.0,20.0,20.0,20.0",label:"20 | 20 | 20 | 20 | 20"}],[{value:"16.66,16.66,16.66,16.66,16.66,16.66",label:"16.66 | 16.66 | 16.66 | 16.66 | 16.66 | 16.66"}]],Mi=new Map(Di.reduce((n,t,e)=>(n.push([e,t]),n))),Li=[{type:"added",condition:(n,t)=>!!(n===void 0&&t)}],Er=`${Wn}-formData`,fo=`${Wn}-locale`,rt=333,pe=Math.round(rt/2),_r=Math.round(rt*2),Or="formeoSaved",on="formeoUpdated",Ii="formeoUpdatedStage",Fi="formeoUpdatedRow",ji="formeoUpdatedColumn",Ri="formeoUpdatedField",zi="formeoCleared",Sr="formeoOnRender",Hi="formeoConditionUpdated",Bi={equals:"==",notEquals:"!=",contains:"⊃",notContains:"!⊃"},ki={and:"&&",or:"||"},Vi={isVisible:"config.isVisible",isNotVisible:"config.isNotVisible"},Wi={equals:"="},qi=["label","logical","source","thenTarget","sourceProperty","comparison","target","targetProperty","assignment","value"],ae={value:"attrs.value",checked:"attrs.checked",...Vi},Gi={comparison:Bi,assignment:Wi,logical:ki,property:ae},xr=()=>({if:[{source:"",sourceProperty:"",comparison:"",target:"",targetProperty:""}],then:[{target:"",targetProperty:"",assignment:"",value:""}]}),Tr=/(\b[0-9a-f]{8}\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\b[0-9a-f]{12}\b)/gi,Be=/\bcol-\w+-\d+/g;function Ui(){this.__data__=[],this.size=0}var Yi=Ui;function Ki(n,t){return n===t||n!==n&&t!==t}var be=Ki,Xi=be;function Zi(n,t){for(var e=n.length;e--;)if(Xi(n[e][0],t))return e;return-1}var rn=Zi,Ji=rn,Qi=Array.prototype,ta=Qi.splice;function ea(n){var t=this.__data__,e=Ji(t,n);if(e<0)return!1;var o=t.length-1;return e==o?t.pop():ta.call(t,e,1),--this.size,!0}var na=ea,oa=rn;function ra(n){var t=this.__data__,e=oa(t,n);return e<0?void 0:t[e][1]}var sa=ra,ia=rn;function aa(n){return ia(this.__data__,n)>-1}var la=aa,ca=rn;function da(n,t){var e=this.__data__,o=ca(e,n);return o<0?(++this.size,e.push([n,t])):e[o][1]=t,this}var ua=da,ha=Yi,pa=na,fa=sa,ga=la,ma=ua;function qt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var o=n[t];this.set(o[0],o[1])}}qt.prototype.clear=ha;qt.prototype.delete=pa;qt.prototype.get=fa;qt.prototype.has=ga;qt.prototype.set=ma;var sn=qt,va=sn;function ba(){this.__data__=new va,this.size=0}var ya=ba;function wa(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var Ca=wa;function Ea(n){return this.__data__.get(n)}var _a=Ea;function Oa(n){return this.__data__.has(n)}var Sa=Oa;function xa(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Dt=xa,Ta=ve,Aa=Dt,$a="[object AsyncFunction]",Pa="[object Function]",Na="[object GeneratorFunction]",Da="[object Proxy]";function Ma(n){if(!Aa(n))return!1;var t=Ta(n);return t==Pa||t==Na||t==$a||t==Da}var Gn=Ma,La=lt,Ia=La["__core-js_shared__"],Fa=Ia,hn=Fa,go=function(){var n=/[^.]+$/.exec(hn&&hn.keys&&hn.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function ja(n){return!!go&&go in n}var Ra=ja,za=Function.prototype,Ha=za.toString;function Ba(n){if(n!=null){try{return Ha.call(n)}catch{}try{return n+""}catch{}}return""}var Ar=Ba,ka=Gn,Va=Ra,Wa=Dt,qa=Ar,Ga=/[\\^$.*+?()[\]{}|]/g,Ua=/^\[object .+?Constructor\]$/,Ya=Function.prototype,Ka=Object.prototype,Xa=Ya.toString,Za=Ka.hasOwnProperty,Ja=RegExp("^"+Xa.call(Za).replace(Ga,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qa(n){if(!Wa(n)||Va(n))return!1;var t=ka(n)?Ja:Ua;return t.test(qa(n))}var tl=Qa;function el(n,t){return n==null?void 0:n[t]}var nl=el,ol=tl,rl=nl;function sl(n,t){var e=rl(n,t);return ol(e)?e:void 0}var Mt=sl,il=Mt,al=lt,ll=il(al,"Map"),Un=ll,cl=Mt,dl=cl(Object,"create"),an=dl,mo=an;function ul(){this.__data__=mo?mo(null):{},this.size=0}var hl=ul;function pl(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var fl=pl,gl=an,ml="__lodash_hash_undefined__",vl=Object.prototype,bl=vl.hasOwnProperty;function yl(n){var t=this.__data__;if(gl){var e=t[n];return e===ml?void 0:e}return bl.call(t,n)?t[n]:void 0}var wl=yl,Cl=an,El=Object.prototype,_l=El.hasOwnProperty;function Ol(n){var t=this.__data__;return Cl?t[n]!==void 0:_l.call(t,n)}var Sl=Ol,xl=an,Tl="__lodash_hash_undefined__";function Al(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=xl&&t===void 0?Tl:t,this}var $l=Al,Pl=hl,Nl=fl,Dl=wl,Ml=Sl,Ll=$l;function Gt(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var o=n[t];this.set(o[0],o[1])}}Gt.prototype.clear=Pl;Gt.prototype.delete=Nl;Gt.prototype.get=Dl;Gt.prototype.has=Ml;Gt.prototype.set=Ll;var Il=Gt,vo=Il,Fl=sn,jl=Un;function Rl(){this.size=0,this.__data__={hash:new vo,map:new(jl||Fl),string:new vo}}var zl=Rl;function Hl(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var Bl=Hl,kl=Bl;function Vl(n,t){var e=n.__data__;return kl(t)?e[typeof t=="string"?"string":"hash"]:e.map}var ln=Vl,Wl=ln;function ql(n){var t=Wl(this,n).delete(n);return this.size-=t?1:0,t}var Gl=ql,Ul=ln;function Yl(n){return Ul(this,n).get(n)}var Kl=Yl,Xl=ln;function Zl(n){return Xl(this,n).has(n)}var Jl=Zl,Ql=ln;function tc(n,t){var e=Ql(this,n),o=e.size;return e.set(n,t),this.size+=e.size==o?0:1,this}var ec=tc,nc=zl,oc=Gl,rc=Kl,sc=Jl,ic=ec;function Ut(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var o=n[t];this.set(o[0],o[1])}}Ut.prototype.clear=nc;Ut.prototype.delete=oc;Ut.prototype.get=rc;Ut.prototype.has=sc;Ut.prototype.set=ic;var $r=Ut,ac=sn,lc=Un,cc=$r,dc=200;function uc(n,t){var e=this.__data__;if(e instanceof ac){var o=e.__data__;if(!lc||o.length<dc-1)return o.push([n,t]),this.size=++e.size,this;e=this.__data__=new cc(o)}return e.set(n,t),this.size=e.size,this}var hc=uc,pc=sn,fc=ya,gc=Ca,mc=_a,vc=Sa,bc=hc;function Yt(n){var t=this.__data__=new pc(n);this.size=t.size}Yt.prototype.clear=fc;Yt.prototype.delete=gc;Yt.prototype.get=mc;Yt.prototype.has=vc;Yt.prototype.set=bc;var Pr=Yt,yc=Mt,wc=function(){try{var n=yc(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Nr=wc,bo=Nr;function Cc(n,t,e){t=="__proto__"&&bo?bo(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var Yn=Cc,Ec=Yn,_c=be;function Oc(n,t,e){(e!==void 0&&!_c(n[t],e)||e===void 0&&!(t in n))&&Ec(n,t,e)}var Dr=Oc;function Sc(n){return function(t,e,o){for(var r=-1,s=Object(t),i=o(t),a=i.length;a--;){var l=i[n?a:++r];if(e(s[l],l,s)===!1)break}return t}}var xc=Sc,Tc=xc,Ac=Tc(),$c=Ac,ke={exports:{}};ke.exports;(function(n,t){var e=lt,o=t&&!t.nodeType&&t,r=o&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===o,i=s?e.Buffer:void 0,a=i?i.allocUnsafe:void 0;function l(c,d){if(d)return c.slice();var u=c.length,h=a?a(u):new c.constructor(u);return c.copy(h),h}n.exports=l})(ke,ke.exports);var Pc=ke.exports,Nc=lt,Dc=Nc.Uint8Array,Mr=Dc,yo=Mr;function Mc(n){var t=new n.constructor(n.byteLength);return new yo(t).set(new yo(n)),t}var Lc=Mc,Ic=Lc;function Fc(n,t){var e=t?Ic(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var jc=Fc;function Rc(n,t){var e=-1,o=n.length;for(t||(t=Array(o));++e<o;)t[e]=n[e];return t}var zc=Rc,Hc=Dt,wo=Object.create,Bc=function(){function n(){}return function(t){if(!Hc(t))return{};if(wo)return wo(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),kc=Bc;function Vc(n,t){return function(e){return n(t(e))}}var Lr=Vc,Wc=Lr,qc=Wc(Object.getPrototypeOf,Object),Ir=qc,Gc=Object.prototype;function Uc(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Gc;return n===e}var Kn=Uc,Yc=kc,Kc=Ir,Xc=Kn;function Zc(n){return typeof n.constructor=="function"&&!Xc(n)?Yc(Kc(n)):{}}var Jc=Zc,Qc=ve,td=Vt,ed="[object Arguments]";function nd(n){return td(n)&&Qc(n)==ed}var od=nd,Co=od,rd=Vt,Fr=Object.prototype,sd=Fr.hasOwnProperty,id=Fr.propertyIsEnumerable,ad=Co(function(){return arguments}())?Co:function(n){return rd(n)&&sd.call(n,"callee")&&!id.call(n,"callee")},jr=ad,ld=9007199254740991;function cd(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=ld}var Rr=cd,dd=Gn,ud=Rr;function hd(n){return n!=null&&ud(n.length)&&!dd(n)}var cn=hd,pd=cn,fd=Vt;function gd(n){return fd(n)&&pd(n)}var md=gd,Ve={exports:{}};function vd(){return!1}var bd=vd;Ve.exports;(function(n,t){var e=lt,o=bd,r=t&&!t.nodeType&&t,s=r&&!0&&n&&!n.nodeType&&n,i=s&&s.exports===r,a=i?e.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||o;n.exports=c})(Ve,Ve.exports);var Xn=Ve.exports,yd=ve,wd=Ir,Cd=Vt,Ed="[object Object]",_d=Function.prototype,Od=Object.prototype,zr=_d.toString,Sd=Od.hasOwnProperty,xd=zr.call(Object);function Td(n){if(!Cd(n)||yd(n)!=Ed)return!1;var t=wd(n);if(t===null)return!0;var e=Sd.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&zr.call(e)==xd}var Ad=Td,$d=ve,Pd=Rr,Nd=Vt,Dd="[object Arguments]",Md="[object Array]",Ld="[object Boolean]",Id="[object Date]",Fd="[object Error]",jd="[object Function]",Rd="[object Map]",zd="[object Number]",Hd="[object Object]",Bd="[object RegExp]",kd="[object Set]",Vd="[object String]",Wd="[object WeakMap]",qd="[object ArrayBuffer]",Gd="[object DataView]",Ud="[object Float32Array]",Yd="[object Float64Array]",Kd="[object Int8Array]",Xd="[object Int16Array]",Zd="[object Int32Array]",Jd="[object Uint8Array]",Qd="[object Uint8ClampedArray]",tu="[object Uint16Array]",eu="[object Uint32Array]",P={};P[Ud]=P[Yd]=P[Kd]=P[Xd]=P[Zd]=P[Jd]=P[Qd]=P[tu]=P[eu]=!0;P[Dd]=P[Md]=P[qd]=P[Ld]=P[Gd]=P[Id]=P[Fd]=P[jd]=P[Rd]=P[zd]=P[Hd]=P[Bd]=P[kd]=P[Vd]=P[Wd]=!1;function nu(n){return Nd(n)&&Pd(n.length)&&!!P[$d(n)]}var ou=nu;function ru(n){return function(t){return n(t)}}var su=ru,We={exports:{}};We.exports;(function(n,t){var e=yr,o=t&&!t.nodeType&&t,r=o&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===o,i=s&&e.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();n.exports=a})(We,We.exports);var iu=We.exports,au=ou,lu=su,Eo=iu,_o=Eo&&Eo.isTypedArray,cu=_o?lu(_o):au,Zn=cu;function du(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Hr=du,uu=Yn,hu=be,pu=Object.prototype,fu=pu.hasOwnProperty;function gu(n,t,e){var o=n[t];(!(fu.call(n,t)&&hu(o,e))||e===void 0&&!(t in n))&&uu(n,t,e)}var mu=gu,vu=mu,bu=Yn;function yu(n,t,e,o){var r=!e;e||(e={});for(var s=-1,i=t.length;++s<i;){var a=t[s],l=o?o(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),r?bu(e,a,l):vu(e,a,l)}return e}var wu=yu;function Cu(n,t){for(var e=-1,o=Array(n);++e<n;)o[e]=t(e);return o}var Eu=Cu,_u=9007199254740991,Ou=/^(?:0|[1-9]\d*)$/;function Su(n,t){var e=typeof n;return t=t??_u,!!t&&(e=="number"||e!="symbol"&&Ou.test(n))&&n>-1&&n%1==0&&n<t}var Br=Su,xu=Eu,Tu=jr,Au=en,$u=Xn,Pu=Br,Nu=Zn,Du=Object.prototype,Mu=Du.hasOwnProperty;function Lu(n,t){var e=Au(n),o=!e&&Tu(n),r=!e&&!o&&$u(n),s=!e&&!o&&!r&&Nu(n),i=e||o||r||s,a=i?xu(n.length,String):[],l=a.length;for(var c in n)(t||Mu.call(n,c))&&!(i&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Pu(c,l)))&&a.push(c);return a}var kr=Lu;function Iu(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var Fu=Iu,ju=Dt,Ru=Kn,zu=Fu,Hu=Object.prototype,Bu=Hu.hasOwnProperty;function ku(n){if(!ju(n))return zu(n);var t=Ru(n),e=[];for(var o in n)o=="constructor"&&(t||!Bu.call(n,o))||e.push(o);return e}var Vu=ku,Wu=kr,qu=Vu,Gu=cn;function Uu(n){return Gu(n)?Wu(n,!0):qu(n)}var Vr=Uu,Yu=wu,Ku=Vr;function Xu(n){return Yu(n,Ku(n))}var Zu=Xu,Oo=Dr,Ju=Pc,Qu=jc,th=zc,eh=Jc,So=jr,xo=en,nh=md,oh=Xn,rh=Gn,sh=Dt,ih=Ad,ah=Zn,To=Hr,lh=Zu;function ch(n,t,e,o,r,s,i){var a=To(n,e),l=To(t,e),c=i.get(l);if(c){Oo(n,e,c);return}var d=s?s(a,l,e+"",n,t,i):void 0,u=d===void 0;if(u){var h=xo(l),p=!h&&oh(l),f=!h&&!p&&ah(l);d=l,h||p||f?xo(a)?d=a:nh(a)?d=th(a):p?(u=!1,d=Ju(l,!0)):f?(u=!1,d=Qu(l,!0)):d=[]:ih(l)||So(l)?(d=a,So(a)?d=lh(a):(!sh(a)||rh(a))&&(d=eh(l))):u=!1}u&&(i.set(l,d),r(d,l,o,s,i),i.delete(l)),Oo(n,e,d)}var dh=ch,uh=Pr,hh=Dr,ph=$c,fh=dh,gh=Dt,mh=Vr,vh=Hr;function Wr(n,t,e,o,r){n!==t&&ph(t,function(s,i){if(r||(r=new uh),gh(s))fh(n,t,i,e,Wr,o,r);else{var a=o?o(vh(n,i),s,i+"",n,t,r):void 0;a===void 0&&(a=s),hh(n,i,a)}},mh)}var bh=Wr;function yh(n){return n}var qr=yh;function wh(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var Ch=wh,Eh=Ch,Ao=Math.max;function _h(n,t,e){return t=Ao(t===void 0?n.length-1:t,0),function(){for(var o=arguments,r=-1,s=Ao(o.length-t,0),i=Array(s);++r<s;)i[r]=o[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=o[r];return a[t]=e(i),Eh(n,this,a)}}var Oh=_h;function Sh(n){return function(){return n}}var xh=Sh,Th=xh,$o=Nr,Ah=qr,$h=$o?function(n,t){return $o(n,"toString",{configurable:!0,enumerable:!1,value:Th(t),writable:!0})}:Ah,Ph=$h,Nh=800,Dh=16,Mh=Date.now;function Lh(n){var t=0,e=0;return function(){var o=Mh(),r=Dh-(o-e);if(e=o,r>0){if(++t>=Nh)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var Ih=Lh,Fh=Ph,jh=Ih,Rh=jh(Fh),zh=Rh,Hh=qr,Bh=Oh,kh=zh;function Vh(n,t){return kh(Bh(n,t,Hh),n+"")}var Wh=Vh,qh=be,Gh=cn,Uh=Br,Yh=Dt;function Kh(n,t,e){if(!Yh(e))return!1;var o=typeof t;return(o=="number"?Gh(e)&&Uh(t,e.length):o=="string"&&t in e)?qh(e[t],n):!1}var Xh=Kh,Zh=Wh,Jh=Xh;function Qh(n){return Zh(function(t,e){var o=-1,r=e.length,s=r>1?e[r-1]:void 0,i=r>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,i&&Jh(e[0],e[1],i)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var a=e[o];a&&n(t,a,o,s)}return t})}var tp=Qh,ep=bh,np=tp,op=np(function(n,t,e,o){ep(n,t,e,o)}),rp=op;const sp=br(rp),Po=()=>crypto.randomUUID(),No=(n="",t)=>{if(!t)return console.warn("utils.match missing argument 2."),!1;const e=/[|\\{}()[\]^*$+?.]/g;let o=typeof t=="string"?[t]:t;o=o.map(s=>s==="*"?"":s.replace(e,"\\$&"));let r=!0;return o.length&&(r=!new RegExp(o.join("|"),"i").exec(n)),r},ip=(n,t)=>{const e=n.indexOf(t);e!==-1&&n.splice(e,1)},U=n=>{var e;const t=(e=n.className)==null?void 0:e.match($i);return t&&Ti[t[0]]},Bt=n=>Array.from(new Set(n)),W=n=>{let t;if(n){const{attrs:e={}}=n;t=e.id||n.id||Po(),n.id=t}else t=Po();return t},$t=(n,t,e=Object.create(null))=>sp({},n,t,(r,s)=>{if(Array.isArray(r))return Array.isArray(s)?Bt(e.mergeArray?r.concat(s):s):s}),Pt=n=>{let t;const e=n instanceof Promise;if(n===null||!(typeof n=="object")||e)return n;if(n instanceof Date)return t=new Date,t.setTime(n.getTime()),t;if(n instanceof Array){t=[];for(let r=0,s=n.length;r<s;r++)t[r]=Pt(n[r]);return t}if(n instanceof Object){t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=Pt(n[r]));return t}debugger;throw new Error("Unable to copy Object, type not supported.")},Pn=(n,t)=>n/t*100,qe=n=>n.toString()+"%",Ge=Object.create(null,{get:{value:n=>{const t=window.sessionStorage&&window.sessionStorage.getItem(n);try{return JSON.parse(t)}catch(e){console.error(e)}}},set:{value:(n,t)=>{try{return window.sessionStorage&&window.sessionStorage.setItem(n,JSON.stringify(t))}catch(e){console.error(e)}}}}),bt=n=>Si.some(t=>new RegExp(`^${t}.`).test(n)),Ue=n=>n.startsWith("external"),ap=n=>/^is|^has/.test(n);function Gr(n,t){let e=!1;return function(){if(!e){n(...arguments),e=!0;const o=setTimeout(()=>{e=!1,clearTimeout(o)},t)}}}function fe(n){return n}function lp(){}function H(n,t){let e=t;return Array.isArray(t)||(e=t.replace(/\[(\d)\]/g,".$1").split(".")),e.reduce((o,r)=>{const s=o[r];if(e.shift(),Array.isArray(s)){const[i]=e,a=Number(i);return e.shift(),i?isNaN(a)?H(s.map(l=>l[i]).flat(),e):H(n[r][a],e):s}return s||e.splice(0),H(s,e)},n)}function cp(n,t,e){let o=t;Array.isArray(t)||(o=t.replace(/\[(\d)\]/g,".$1").split(".")),o.reduce((r,s,i)=>(i===o.length-1?r[s]=e:(!r[s]||typeof r[s]!="object")&&(r[s]=isNaN(Number(o[i+1]))?{}:[]),r[s]),n)}const Ur=n=>{const t={...n},e={string:()=>"",boolean:()=>!1,object:o=>Ur(o)};return Object.keys(n).forEach(o=>{const r=typeof n[o];e[r]&&(t[o]=e[r](n[o]))}),t},dp="a an and as at but by for for from in into near nor of on onto or the to with".split(" ").map(n=>`\\s${n}\\s`),up=new RegExp(`(?!${dp.join("|")})\\w\\S*`,"g"),hp=/\s+/g;function Nt(n){return typeof n!="string"||n.trim().match(hp)?n:n.replace(up,e=>e.charAt(0).toUpperCase()+e.substring(1).replace(/[A-Z]/g,o=>` ${o}`))}const Nn=(n,t="-")=>n.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,t),Yr=n=>Number.isInteger(Number(n)),wt=(n,t)=>{const e=t||n.parentElement;return Array.prototype.slice.call(e.childNodes).indexOf(n)},ge=(n,t,e)=>{const o=e.split("||"),s=Bt(t).map(i=>n.find(a=>{const l=o.find(c=>!!H(a,c));return l&&H(a,l)===i})).filter(Boolean).concat(n);return Bt(s)},dn=(n,t,e)=>{for(let o=0;o<n.length;o++)t.call(e,n[o],o)},Jn=(n,t)=>{const e=[];return dn(n,(o,r)=>e.push(t(o,r))),e},pp=n=>({className:"class"})[n]||Nn(n),Kr=n=>n.replace(/\b\w/g,t=>t.toUpperCase()),fp=n=>window.JSON.parse(window.JSON.stringify(n)),gp=(n,t)=>t.filter(e=>!~n.indexOf(e)),Xr=()=>window.navigator.userAgent.indexOf("MSIE ")!==-1,k={capitalize:Kr,safeAttrName:pp,forEach:dn,copyObj:fp,map:Jn,subtract:gp,indexOfNode:wt,isInt:Yr,get:H,orderObjectsBy:ge,isIE:Xr};class Qn{constructor(t,e=Object.create(null)){m(this,"toJSON",(t,e)=>JSON.stringify(t,null,e));m(this,"get",t=>H(this.data,t));m(this,"getChangeType",(t,e)=>{const o=Li.find(({condition:r})=>r(t,e))||{type:"unknown"};return o.desc=o.type==="added"?`${t} to ${e}`:e,o});m(this,"add",(t,e=Object.create(null))=>{const{id:o}=e,r=t||o||W();return this.set(r,e)});m(this,"remove",t=>{const e=t.split("."),o=e.pop(),r=this.get(e);return Array.isArray(r)?r.splice(Number(o),1):delete r[o],r});m(this,"getData",()=>Object.entries(this.data).reduce((t,[e,o])=>(t[e]=o!=null&&o.data?o.getData():o,t),{}));m(this,"setCallbacks",{});m(this,"configVal",Object.create(null));this.name=t,this.data=e,this.dataPath=""}get size(){return Object.keys(this.data).length}get js(){return this.data}get json(){return this.data}set(t,e){const o=H(this.data,t),r=cp(this.data,t,e),s=Array.isArray(t)?t.join("."):t,i=Object.keys(this.setCallbacks).filter(l=>new RegExp(l).test(s)),a={newVal:e,oldVal:o,path:t};if(i.forEach(l=>this.setCallbacks[l].forEach(c=>c(a))),!this.disableEvents){const l=this.getChangeType(o,e),c={entity:this,dataPath:this.dataPath.replace(/\.+$/,""),changePath:this.dataPath+t,value:e,data:r,change:`${l.type}: ${l.desc}`,src:this.dom};o&&(c.previousValue=o),A.formeoUpdated(c)}return r}addSetCallback(t,e){this.setCallbacks[t]?this.setCallbacks[t].push(e):this.setCallbacks[t]=[e]}removeSetCallback(t,e){this.setCallbacks[t]=this.setCallbacks[t].filter(o=>o!==e)}empty(){this.data=Object.create(null)}}/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Do(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,o)}return e}function at(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Do(Object(e),!0).forEach(function(o){mp(n,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Do(Object(e)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(e,o))})}return n}function Le(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Le=function(t){return typeof t}:Le=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(n)}function mp(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ht(){return ht=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},ht.apply(this,arguments)}function vp(n,t){if(n==null)return{};var e={},o=Object.keys(n),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function bp(n,t){if(n==null)return{};var e=vp(n,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(e[o]=n[o])}return e}var yp="1.15.3";function dt(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var pt=dt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ye=dt(/Edge/i),Mo=dt(/firefox/i),le=dt(/safari/i)&&!dt(/chrome/i)&&!dt(/android/i),Zr=dt(/iP(ad|od|hone)/i),Jr=dt(/chrome/i)&&dt(/android/i),Qr={capture:!1,passive:!1};function T(n,t,e){n.addEventListener(t,e,!pt&&Qr)}function S(n,t,e){n.removeEventListener(t,e,!pt&&Qr)}function Ye(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function ts(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function et(n,t,e,o){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&Ye(n,t):Ye(n,t))||o&&n===e)return n;if(n===e)break}while(n=ts(n))}return null}var Lo=/\s+/g;function X(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var o=(" "+n.className+" ").replace(Lo," ").replace(" "+t+" "," ");n.className=(o+(e?" "+t:"")).replace(Lo," ")}}function C(n,t,e){var o=n&&n.style;if(o){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=e+(typeof e=="string"?"":"px")}}function Rt(n,t){var e="";if(typeof n=="string")e=n;else do{var o=C(n,"transform");o&&o!=="none"&&(e=o+" "+e)}while(!t&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function es(n,t,e){if(n){var o=n.getElementsByTagName(t),r=0,s=o.length;if(e)for(;r<s;r++)e(o[r],r);return o}return[]}function it(){var n=document.scrollingElement;return n||document.documentElement}function j(n,t,e,o,r){if(!(!n.getBoundingClientRect&&n!==window)){var s,i,a,l,c,d,u;if(n!==window&&n.parentNode&&n!==it()?(s=n.getBoundingClientRect(),i=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,u=s.width):(i=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||e)&&n!==window&&(r=r||n.parentNode,!pt))do if(r&&r.getBoundingClientRect&&(C(r,"transform")!=="none"||e&&C(r,"position")!=="static")){var h=r.getBoundingClientRect();i-=h.top+parseInt(C(r,"border-top-width")),a-=h.left+parseInt(C(r,"border-left-width")),l=i+s.height,c=a+s.width;break}while(r=r.parentNode);if(o&&n!==window){var p=Rt(r||n),f=p&&p.a,b=p&&p.d;p&&(i/=b,a/=f,u/=f,d/=b,l=i+d,c=a+u)}return{top:i,left:a,bottom:l,right:c,width:u,height:d}}}function Io(n,t,e){for(var o=yt(n,!0),r=j(n)[t];o;){var s=j(o)[e],i=void 0;if(i=r>=s,!i)return o;if(o===it())break;o=yt(o,!1)}return!1}function kt(n,t,e,o){for(var r=0,s=0,i=n.children;s<i.length;){if(i[s].style.display!=="none"&&i[s]!==w.ghost&&(o||i[s]!==w.dragged)&&et(i[s],e.draggable,n,!1)){if(r===t)return i[s];r++}s++}return null}function to(n,t){for(var e=n.lastElementChild;e&&(e===w.ghost||C(e,"display")==="none"||t&&!Ye(e,t));)e=e.previousElementSibling;return e||null}function Q(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==w.clone&&(!t||Ye(n,t))&&e++;return e}function Fo(n){var t=0,e=0,o=it();if(n)do{var r=Rt(n),s=r.a,i=r.d;t+=n.scrollLeft*s,e+=n.scrollTop*i}while(n!==o&&(n=n.parentNode));return[t,e]}function wp(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===n[e][o])return Number(e)}return-1}function yt(n,t){if(!n||!n.getBoundingClientRect)return it();var e=n,o=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=C(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return it();if(o||t)return e;o=!0}}while(e=e.parentNode);return it()}function Cp(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function pn(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var ce;function ns(n,t){return function(){if(!ce){var e=arguments,o=this;e.length===1?n.call(o,e[0]):n.apply(o,e),ce=setTimeout(function(){ce=void 0},t)}}}function Ep(){clearTimeout(ce),ce=void 0}function os(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function rs(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}function ss(n,t,e){var o={};return Array.from(n.children).forEach(function(r){var s,i,a,l;if(!(!et(r,t.draggable,n,!1)||r.animated||r===e)){var c=j(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,c.left),o.top=Math.min((i=o.top)!==null&&i!==void 0?i:1/0,c.top),o.right=Math.max((a=o.right)!==null&&a!==void 0?a:-1/0,c.right),o.bottom=Math.max((l=o.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Y="Sortable"+new Date().getTime();function _p(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(C(r,"display")==="none"||r===w.ghost)){n.push({target:r,rect:j(r)});var s=at({},n[n.length-1].rect);if(r.thisAnimationDuration){var i=Rt(r,!0);i&&(s.top-=i.f,s.left-=i.e)}r.fromRect=s}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(wp(n,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var s=!1,i=0;n.forEach(function(a){var l=0,c=a.target,d=c.fromRect,u=j(c),h=c.prevFromRect,p=c.prevToRect,f=a.rect,b=Rt(c,!0);b&&(u.top-=b.f,u.left-=b.e),c.toRect=u,c.thisAnimationDuration&&pn(h,u)&&!pn(d,u)&&(f.top-u.top)/(f.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=Sp(f,h,p,r.options)),pn(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=r.options.animation),r.animate(c,f,u,l)),l&&(s=!0,i=Math.max(i,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),n=[]},animate:function(o,r,s,i){if(i){C(o,"transition",""),C(o,"transform","");var a=Rt(this.el),l=a&&a.a,c=a&&a.d,d=(r.left-s.left)/(l||1),u=(r.top-s.top)/(c||1);o.animatingX=!!d,o.animatingY=!!u,C(o,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=Op(o),C(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),C(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){C(o,"transition",""),C(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function Op(n){return n.offsetWidth}function Sp(n,t,e,o){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*o.animation}var Lt=[],fn={initializeByDefault:!0},we={mount:function(t){for(var e in fn)fn.hasOwnProperty(e)&&!(e in t)&&(t[e]=fn[e]);Lt.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Lt.push(t)},pluginEvent:function(t,e,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var s=t+"Global";Lt.forEach(function(i){e[i.pluginName]&&(e[i.pluginName][s]&&e[i.pluginName][s](at({sortable:e},o)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](at({sortable:e},o)))})},initializePlugins:function(t,e,o,r){Lt.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,ht(o,c.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var i=this.modifyOption(t,s,t.options[s]);typeof i<"u"&&(t.options[s]=i)}},getEventProperties:function(t,e){var o={};return Lt.forEach(function(r){typeof r.eventProperties=="function"&&ht(o,r.eventProperties.call(e[r.pluginName],t))}),o},modifyOption:function(t,e,o){var r;return Lt.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[e]=="function"&&(r=s.optionListeners[e].call(t[s.pluginName],o))}),r}};function xp(n){var t=n.sortable,e=n.rootEl,o=n.name,r=n.targetEl,s=n.cloneEl,i=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,d=n.oldDraggableIndex,u=n.newDraggableIndex,h=n.originalEvent,p=n.putSortable,f=n.extraEventProperties;if(t=t||e&&e[Y],!!t){var b,_=t.options,x="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!pt&&!ye?b=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(o,!0,!0)),b.to=i||e,b.from=a||e,b.item=r||e,b.clone=s,b.oldIndex=l,b.newIndex=c,b.oldDraggableIndex=d,b.newDraggableIndex=u,b.originalEvent=h,b.pullMode=p?p.lastPutMode:void 0;var O=at(at({},f),we.getEventProperties(o,t));for(var L in O)b[L]=O[L];e&&e.dispatchEvent(b),_[x]&&_[x].call(t,b)}}var Tp=["evt"],G=function(t,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,s=bp(o,Tp);we.pluginEvent.bind(w)(t,e,at({dragEl:v,parentEl:I,ghostEl:E,rootEl:N,nextEl:St,lastDownEl:Ie,cloneEl:M,cloneHidden:vt,dragStarted:oe,putSortable:R,activeSortable:w.active,originalEvent:r,oldIndex:jt,oldDraggableIndex:de,newIndex:Z,newDraggableIndex:mt,hideGhostForTarget:cs,unhideGhostForTarget:ds,cloneNowHidden:function(){vt=!0},cloneNowShown:function(){vt=!1},dispatchSortableEvent:function(a){B({sortable:e,name:a,originalEvent:r})}},s))};function B(n){xp(at({putSortable:R,cloneEl:M,targetEl:v,rootEl:N,oldIndex:jt,oldDraggableIndex:de,newIndex:Z,newDraggableIndex:mt},n))}var v,I,E,N,St,Ie,M,vt,jt,Z,de,mt,Se,R,Ft=!1,Ke=!1,Xe=[],_t,tt,gn,mn,jo,Ro,oe,It,ue,he=!1,xe=!1,Fe,z,vn=[],Dn=!1,Ze=[],un=typeof document<"u",Te=Zr,zo=ye||pt?"cssFloat":"float",Ap=un&&!Jr&&!Zr&&"draggable"in document.createElement("div"),is=function(){if(un){if(pt)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),as=function(t,e){var o=C(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=kt(t,0,e),i=kt(t,1,e),a=s&&C(s),l=i&&C(i),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+j(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+j(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&o[zo]==="none"||i&&o[zo]==="none"&&c+d>r)?"vertical":"horizontal"},$p=function(t,e,o){var r=o?t.left:t.top,s=o?t.right:t.bottom,i=o?t.width:t.height,a=o?e.left:e.top,l=o?e.right:e.bottom,c=o?e.width:e.height;return r===a||s===l||r+i/2===a+c/2},Pp=function(t,e){var o;return Xe.some(function(r){var s=r[Y].options.emptyInsertThreshold;if(!(!s||to(r))){var i=j(r),a=t>=i.left-s&&t<=i.right+s,l=e>=i.top-s&&e<=i.bottom+s;if(a&&l)return o=r}}),o},ls=function(t){function e(s,i){return function(a,l,c,d){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(i||u))return!0;if(s==null||s===!1)return!1;if(i&&s==="clone")return s;if(typeof s=="function")return e(s(a,l,c,d),i)(a,l,c,d);var h=(i?a:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var o={},r=t.group;(!r||Le(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=e(r.pull,!0),o.checkPut=e(r.put),o.revertClone=r.revertClone,t.group=o},cs=function(){!is&&E&&C(E,"display","none")},ds=function(){!is&&E&&C(E,"display","")};un&&!Jr&&document.addEventListener("click",function(n){if(Ke)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Ke=!1,!1},!0);var Ot=function(t){if(v){t=t.touches?t.touches[0]:t;var e=Pp(t.clientX,t.clientY);if(e){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[Y]._onDragOver(o)}}},Np=function(t){v&&v.parentNode[Y]._isOutsideThisEl(t.target)};function w(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=ht({},t),n[Y]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return as(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,a){i.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:w.supportPointer!==!1&&"PointerEvent"in window&&!le,emptyInsertThreshold:5};we.initializePlugins(this,n,e);for(var o in e)!(o in t)&&(t[o]=e[o]);ls(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:Ap,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?T(n,"pointerdown",this._onTapStart):(T(n,"mousedown",this._onTapStart),T(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(n,"dragover",this),T(n,"dragenter",this)),Xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ht(this,_p())}w.prototype={constructor:w,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(It=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,v):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,r=this.options,s=r.preventOnFilter,i=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=r.filter;if(zp(o),!v&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&le&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=et(l,r.draggable,o,!1),!(l&&l.animated)&&Ie!==l)){if(jt=Q(l),de=Q(l,r.draggable),typeof d=="function"){if(d.call(this,t,l,this)){B({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),G("filter",e,{evt:t}),s&&t.cancelable&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=et(c,u.trim(),o,!1),u)return B({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:o,toEl:o}),G("filter",e,{evt:t}),!0}),d)){s&&t.cancelable&&t.preventDefault();return}r.handle&&!et(c,r.handle,o,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,o){var r=this,s=r.el,i=r.options,a=s.ownerDocument,l;if(o&&!v&&o.parentNode===s){var c=j(o);if(N=s,v=o,I=v.parentNode,St=v.nextSibling,Ie=o,Se=i.group,w.dragged=v,_t={target:v,clientX:(e||t).clientX,clientY:(e||t).clientY},jo=_t.clientX-c.left,Ro=_t.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,v.style["will-change"]="all",l=function(){if(G("delayEnded",r,{evt:t}),w.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Mo&&r.nativeDraggable&&(v.draggable=!0),r._triggerDragStart(t,e),B({sortable:r,name:"choose",originalEvent:t}),X(v,i.chosenClass,!0)},i.ignore.split(",").forEach(function(d){es(v,d.trim(),bn)}),T(a,"dragover",Ot),T(a,"mousemove",Ot),T(a,"touchmove",Ot),T(a,"mouseup",r._onDrop),T(a,"touchend",r._onDrop),T(a,"touchcancel",r._onDrop),Mo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0),G("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(ye||pt))){if(w.eventCanceled){this._onDrop();return}T(a,"mouseup",r._disableDelayedDrag),T(a,"touchend",r._disableDelayedDrag),T(a,"touchcancel",r._disableDelayedDrag),T(a,"mousemove",r._delayedDragTouchMoveHandler),T(a,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&T(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&bn(v),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;S(t,"mouseup",this._disableDelayedDrag),S(t,"touchend",this._disableDelayedDrag),S(t,"touchcancel",this._disableDelayedDrag),S(t,"mousemove",this._delayedDragTouchMoveHandler),S(t,"touchmove",this._delayedDragTouchMoveHandler),S(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):e?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(v,"dragend",this),T(N,"dragstart",this._onDragStart));try{document.selection?je(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Ft=!1,N&&v){G("dragStarted",this,{evt:e}),this.nativeDraggable&&T(document,"dragover",Np);var o=this.options;!t&&X(v,o.dragClass,!1),X(v,o.ghostClass,!0),w.active=this,t&&this._appendGhost(),B({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(tt){this._lastX=tt.clientX,this._lastY=tt.clientY,cs();for(var t=document.elementFromPoint(tt.clientX,tt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(tt.clientX,tt.clientY),t!==e);)e=t;if(v.parentNode[Y]._isOutsideThisEl(t),e)do{if(e[Y]){var o=void 0;if(o=e[Y]._onDragOver({clientX:tt.clientX,clientY:tt.clientY,target:t,rootEl:e}),o&&!this.options.dragoverBubble)break}t=e}while(e=ts(e));ds()}},_onTouchMove:function(t){if(_t){var e=this.options,o=e.fallbackTolerance,r=e.fallbackOffset,s=t.touches?t.touches[0]:t,i=E&&Rt(E,!0),a=E&&i&&i.a,l=E&&i&&i.d,c=Te&&z&&Fo(z),d=(s.clientX-_t.clientX+r.x)/(a||1)+(c?c[0]-vn[0]:0)/(a||1),u=(s.clientY-_t.clientY+r.y)/(l||1)+(c?c[1]-vn[1]:0)/(l||1);if(!w.active&&!Ft){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(E){i?(i.e+=d-(gn||0),i.f+=u-(mn||0)):i={a:1,b:0,c:0,d:1,e:d,f:u};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");C(E,"webkitTransform",h),C(E,"mozTransform",h),C(E,"msTransform",h),C(E,"transform",h),gn=d,mn=u,tt=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!E){var t=this.options.fallbackOnBody?document.body:N,e=j(v,!0,Te,!0,t),o=this.options;if(Te){for(z=t;C(z,"position")==="static"&&C(z,"transform")==="none"&&z!==document;)z=z.parentNode;z!==document.body&&z!==document.documentElement?(z===document&&(z=it()),e.top+=z.scrollTop,e.left+=z.scrollLeft):z=it(),vn=Fo(z)}E=v.cloneNode(!0),X(E,o.ghostClass,!1),X(E,o.fallbackClass,!0),X(E,o.dragClass,!0),C(E,"transition",""),C(E,"transform",""),C(E,"box-sizing","border-box"),C(E,"margin",0),C(E,"top",e.top),C(E,"left",e.left),C(E,"width",e.width),C(E,"height",e.height),C(E,"opacity","0.8"),C(E,"position",Te?"absolute":"fixed"),C(E,"zIndex","100000"),C(E,"pointerEvents","none"),w.ghost=E,t.appendChild(E),C(E,"transform-origin",jo/parseInt(E.style.width)*100+"% "+Ro/parseInt(E.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,r=t.dataTransfer,s=o.options;if(G("dragStart",this,{evt:t}),w.eventCanceled){this._onDrop();return}G("setupClone",this),w.eventCanceled||(M=rs(v),M.removeAttribute("id"),M.draggable=!1,M.style["will-change"]="",this._hideClone(),X(M,this.options.chosenClass,!1),w.clone=M),o.cloneId=je(function(){G("clone",o),!w.eventCanceled&&(o.options.removeCloneOnHide||N.insertBefore(M,v),o._hideClone(),B({sortable:o,name:"clone"}))}),!e&&X(v,s.dragClass,!0),e?(Ke=!0,o._loopId=setInterval(o._emulateDragOver,50)):(S(document,"mouseup",o._onDrop),S(document,"touchend",o._onDrop),S(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(o,r,v)),T(document,"drop",o),C(v,"transform","translateZ(0)")),Ft=!0,o._dragStartId=je(o._dragStarted.bind(o,e,t)),T(document,"selectstart",o),oe=!0,le&&C(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,o=t.target,r,s,i,a=this.options,l=a.group,c=w.active,d=Se===l,u=a.sort,h=R||c,p,f=this,b=!1;if(Dn)return;function _(te,As){G(te,f,at({evt:t,isOwner:d,axis:p?"vertical":"horizontal",revert:i,dragRect:r,targetRect:s,canSort:u,fromSortable:h,target:o,completed:O,onMove:function(so,$s){return Ae(N,e,v,r,so,j(so),t,$s)},changed:L},As))}function x(){_("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function O(te){return _("dragOverCompleted",{insertion:te}),te&&(d?c._hideClone():c._showClone(f),f!==h&&(X(v,R?R.options.ghostClass:c.options.ghostClass,!1),X(v,a.ghostClass,!0)),R!==f&&f!==w.active?R=f:f===w.active&&R&&(R=null),h===f&&(f._ignoreWhileAnimating=o),f.animateAll(function(){_("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===v&&!v.animated||o===e&&!o.animated)&&(It=null),!a.dragoverBubble&&!t.rootEl&&o!==document&&(v.parentNode[Y]._isOutsideThisEl(t.target),!te&&Ot(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),b=!0}function L(){Z=Q(v),mt=Q(v,a.draggable),B({sortable:f,name:"change",toEl:e,newIndex:Z,newDraggableIndex:mt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=et(o,a.draggable,e,!0),_("dragOver"),w.eventCanceled)return b;if(v.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||f._ignoreWhileAnimating===o)return O(!1);if(Ke=!1,c&&!a.disabled&&(d?u||(i=I!==N):R===this||(this.lastPutMode=Se.checkPull(this,c,v,t))&&l.checkPut(this,c,v,t))){if(p=this._getDirection(t,o)==="vertical",r=j(v),_("dragOverValid"),w.eventCanceled)return b;if(i)return I=N,x(),this._hideClone(),_("revert"),w.eventCanceled||(St?N.insertBefore(v,St):N.appendChild(v)),O(!0);var D=to(e,a.draggable);if(!D||Ip(t,p,this)&&!D.animated){if(D===v)return O(!1);if(D&&e===t.target&&(o=D),o&&(s=j(o)),Ae(N,e,v,r,o,s,t,!!o)!==!1)return x(),D&&D.nextSibling?e.insertBefore(v,D.nextSibling):e.appendChild(v),I=e,L(),O(!0)}else if(D&&Lp(t,p,this)){var J=kt(e,0,a,!0);if(J===v)return O(!1);if(o=J,s=j(o),Ae(N,e,v,r,o,s,t,!1)!==!1)return x(),e.insertBefore(v,J),I=e,L(),O(!0)}else if(o.parentNode===e){s=j(o);var st=0,Ct,Xt=v.parentNode!==e,K=!$p(v.animated&&v.toRect||r,o.animated&&o.toRect||s,p),Zt=p?"top":"left",ft=Io(o,"top","top")||Io(v,"top","top"),Jt=ft?ft.scrollTop:void 0;It!==o&&(Ct=s[Zt],he=!1,xe=!K&&a.invertSwap||Xt),st=Fp(t,o,s,p,K?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,xe,It===o);var ct;if(st!==0){var Et=Q(v);do Et-=st,ct=I.children[Et];while(ct&&(C(ct,"display")==="none"||ct===E))}if(st===0||ct===o)return O(!1);It=o,ue=st;var Qt=o.nextElementSibling,gt=!1;gt=st===1;var _e=Ae(N,e,v,r,o,s,t,gt);if(_e!==!1)return(_e===1||_e===-1)&&(gt=_e===1),Dn=!0,setTimeout(Mp,30),x(),gt&&!Qt?e.appendChild(v):o.parentNode.insertBefore(v,gt?Qt:o),ft&&os(ft,0,Jt-ft.scrollTop),I=v.parentNode,Ct!==void 0&&!xe&&(Fe=Math.abs(Ct-j(o)[Zt])),L(),O(!0)}if(e.contains(v))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){S(document,"mousemove",this._onTouchMove),S(document,"touchmove",this._onTouchMove),S(document,"pointermove",this._onTouchMove),S(document,"dragover",Ot),S(document,"mousemove",Ot),S(document,"touchmove",Ot)},_offUpEvents:function(){var t=this.el.ownerDocument;S(t,"mouseup",this._onDrop),S(t,"touchend",this._onDrop),S(t,"pointerup",this._onDrop),S(t,"touchcancel",this._onDrop),S(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;if(Z=Q(v),mt=Q(v,o.draggable),G("drop",this,{evt:t}),I=v&&v.parentNode,Z=Q(v),mt=Q(v,o.draggable),w.eventCanceled){this._nulling();return}Ft=!1,xe=!1,he=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Mn(this.cloneId),Mn(this._dragStartId),this.nativeDraggable&&(S(document,"drop",this),S(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),le&&C(document.body,"user-select",""),C(v,"transform",""),t&&(oe&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),(N===I||R&&R.lastPutMode!=="clone")&&M&&M.parentNode&&M.parentNode.removeChild(M),v&&(this.nativeDraggable&&S(v,"dragend",this),bn(v),v.style["will-change"]="",oe&&!Ft&&X(v,R?R.options.ghostClass:this.options.ghostClass,!1),X(v,this.options.chosenClass,!1),B({sortable:this,name:"unchoose",toEl:I,newIndex:null,newDraggableIndex:null,originalEvent:t}),N!==I?(Z>=0&&(B({rootEl:I,name:"add",toEl:I,fromEl:N,originalEvent:t}),B({sortable:this,name:"remove",toEl:I,originalEvent:t}),B({rootEl:I,name:"sort",toEl:I,fromEl:N,originalEvent:t}),B({sortable:this,name:"sort",toEl:I,originalEvent:t})),R&&R.save()):Z!==jt&&Z>=0&&(B({sortable:this,name:"update",toEl:I,originalEvent:t}),B({sortable:this,name:"sort",toEl:I,originalEvent:t})),w.active&&((Z==null||Z===-1)&&(Z=jt,mt=de),B({sortable:this,name:"end",toEl:I,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){G("nulling",this),N=v=I=E=St=M=Ie=vt=_t=tt=oe=Z=mt=jt=de=It=ue=R=Se=w.dragged=w.ghost=w.clone=w.active=null,Ze.forEach(function(t){t.checked=!0}),Ze.length=gn=mn=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":v&&(this._onDragOver(t),Dp(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,o=this.el.children,r=0,s=o.length,i=this.options;r<s;r++)e=o[r],et(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Rp(e));return t},sort:function(t,e){var o={},r=this.el;this.toArray().forEach(function(s,i){var a=r.children[i];et(a,this.options.draggable,r,!1)&&(o[s]=a)},this),e&&this.captureAnimationState(),t.forEach(function(s){o[s]&&(r.removeChild(o[s]),r.appendChild(o[s]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return et(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(e===void 0)return o[t];var r=we.modifyOption(this,t,e);typeof r<"u"?o[t]=r:o[t]=e,t==="group"&&ls(o)},destroy:function(){G("destroy",this);var t=this.el;t[Y]=null,S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart),S(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Xe.splice(Xe.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!vt){if(G("hideClone",this),w.eventCanceled)return;C(M,"display","none"),this.options.removeCloneOnHide&&M.parentNode&&M.parentNode.removeChild(M),vt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(vt){if(G("showClone",this),w.eventCanceled)return;v.parentNode==N&&!this.options.group.revertClone?N.insertBefore(M,v):St?N.insertBefore(M,St):N.appendChild(M),this.options.group.revertClone&&this.animate(v,M),C(M,"display",""),vt=!1}}};function Dp(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Ae(n,t,e,o,r,s,i,a){var l,c=n[Y],d=c.options.onMove,u;return window.CustomEvent&&!pt&&!ye?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=n,l.dragged=e,l.draggedRect=o,l.related=r||t,l.relatedRect=s||j(t),l.willInsertAfter=a,l.originalEvent=i,n.dispatchEvent(l),d&&(u=d.call(c,l,i)),u}function bn(n){n.draggable=!1}function Mp(){Dn=!1}function Lp(n,t,e){var o=j(kt(e.el,0,e.options,!0)),r=ss(e.el,e.options,E),s=10;return t?n.clientX<r.left-s||n.clientY<o.top&&n.clientX<o.right:n.clientY<r.top-s||n.clientY<o.bottom&&n.clientX<o.left}function Ip(n,t,e){var o=j(to(e.el,e.options.draggable)),r=ss(e.el,e.options,E),s=10;return t?n.clientX>r.right+s||n.clientY>o.bottom&&n.clientX>o.left:n.clientY>r.bottom+s||n.clientX>o.right&&n.clientY>o.top}function Fp(n,t,e,o,r,s,i,a){var l=o?n.clientY:n.clientX,c=o?e.height:e.width,d=o?e.top:e.left,u=o?e.bottom:e.right,h=!1;if(!i){if(a&&Fe<c*r){if(!he&&(ue===1?l>d+c*s/2:l<u-c*s/2)&&(he=!0),he)h=!0;else if(ue===1?l<d+Fe:l>u-Fe)return-ue}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return jp(t)}return h=h||i,h&&(l<d+c*s/2||l>u-c*s/2)?l>d+c/2?1:-1:0}function jp(n){return Q(v)<Q(n)?1:-1}function Rp(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,o=0;e--;)o+=t.charCodeAt(e);return o.toString(36)}function zp(n){Ze.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var o=t[e];o.checked&&Ze.push(o)}}function je(n){return setTimeout(n,0)}function Mn(n){return clearTimeout(n)}un&&T(document,"touchmove",function(n){(w.active||Ft)&&n.cancelable&&n.preventDefault()});w.utils={on:T,off:S,css:C,find:es,is:function(t,e){return!!et(t,e,t,!1)},extend:Cp,throttle:ns,closest:et,toggleClass:X,clone:rs,index:Q,nextTick:je,cancelNextTick:Mn,detectDirection:as,getChild:kt,expando:Y};w.get=function(n){return n[Y]};w.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(w.utils=at(at({},w.utils),o.utils)),we.mount(o)})};w.create=function(n,t){return new w(n,t)};w.version=yp;var F=[],re,Ln,In=!1,yn,wn,Je,se;function Hp(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var o=e.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):o.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var o=e.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):(S(document,"pointermove",this._handleFallbackAutoScroll),S(document,"touchmove",this._handleFallbackAutoScroll),S(document,"mousemove",this._handleFallbackAutoScroll)),Ho(),Re(),Ep()},nulling:function(){Je=Ln=re=In=se=yn=wn=null,F.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,o){var r=this,s=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(s,i);if(Je=e,o||this.options.forceAutoScrollFallback||ye||pt||le){Cn(e,this.options,a,o);var l=yt(a,!0);In&&(!se||s!==yn||i!==wn)&&(se&&Ho(),se=setInterval(function(){var c=yt(document.elementFromPoint(s,i),!0);c!==l&&(l=c,Re()),Cn(e,r.options,c,o)},10),yn=s,wn=i)}else{if(!this.options.bubbleScroll||yt(a,!0)===it()){Re();return}Cn(e,this.options,yt(a,!1),!1)}}},ht(n,{pluginName:"scroll",initializeByDefault:!0})}function Re(){F.forEach(function(n){clearInterval(n.pid)}),F=[]}function Ho(){clearInterval(se)}var Cn=ns(function(n,t,e,o){if(t.scroll){var r=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,i=t.scrollSensitivity,a=t.scrollSpeed,l=it(),c=!1,d;Ln!==e&&(Ln=e,Re(),re=t.scroll,d=t.scrollFn,re===!0&&(re=yt(e,!0)));var u=0,h=re;do{var p=h,f=j(p),b=f.top,_=f.bottom,x=f.left,O=f.right,L=f.width,D=f.height,J=void 0,st=void 0,Ct=p.scrollWidth,Xt=p.scrollHeight,K=C(p),Zt=p.scrollLeft,ft=p.scrollTop;p===l?(J=L<Ct&&(K.overflowX==="auto"||K.overflowX==="scroll"||K.overflowX==="visible"),st=D<Xt&&(K.overflowY==="auto"||K.overflowY==="scroll"||K.overflowY==="visible")):(J=L<Ct&&(K.overflowX==="auto"||K.overflowX==="scroll"),st=D<Xt&&(K.overflowY==="auto"||K.overflowY==="scroll"));var Jt=J&&(Math.abs(O-r)<=i&&Zt+L<Ct)-(Math.abs(x-r)<=i&&!!Zt),ct=st&&(Math.abs(_-s)<=i&&ft+D<Xt)-(Math.abs(b-s)<=i&&!!ft);if(!F[u])for(var Et=0;Et<=u;Et++)F[Et]||(F[Et]={});(F[u].vx!=Jt||F[u].vy!=ct||F[u].el!==p)&&(F[u].el=p,F[u].vx=Jt,F[u].vy=ct,clearInterval(F[u].pid),(Jt!=0||ct!=0)&&(c=!0,F[u].pid=setInterval((function(){o&&this.layer===0&&w.active._onTouchMove(Je);var Qt=F[this.layer].vy?F[this.layer].vy*a:0,gt=F[this.layer].vx?F[this.layer].vx*a:0;typeof d=="function"&&d.call(w.dragged.parentNode[Y],gt,Qt,n,Je,F[this.layer].el)!=="continue"||os(F[this.layer].el,gt,Qt)}).bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==l&&(h=yt(h,!1)));In=c}},30),us=function(t){var e=t.originalEvent,o=t.putSortable,r=t.dragEl,s=t.activeSortable,i=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=o||s;a();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(i("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function eo(){}eo.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=kt(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:us};ht(eo,{pluginName:"revertOnSpill"});function no(){}no.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable,r=o||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:us};ht(no,{pluginName:"removeOnSpill"});w.mount(new Hp);w.mount(no,eo);const Bo={add:{attr:n=>{const t=window.prompt(n.message.attr);if(t&&n.isDisabled(t))return window.alert(y.get("attributeNotPermitted",t||"")),nt.add.attrs(n);let e;t&&(e=String(window.prompt(n.message.value,"")),n.addAction(t,e))},option:n=>{n.addAction()},condition:n=>{n.addAction(n)}},click:{btn:n=>{n.action()}},save:{form:fe}},nt={init:function(n){const t=Object.keys(Bo);return this.opts=t.reduce((e,o)=>(e[o]={...Bo[o],...n[o]},e),n),this},add:{attrs:n=>nt.opts.add.attr(n),options:n=>nt.opts.add.option(n),conditions:n=>(n.template=xr(),nt.opts.add.condition(n))},click:{btn:n=>nt.opts.click.btn(n)},save:{form:n=>(nt.opts.sessionStorage&&Ge.set(Er,n),A.formeoSaved({formData:n}),nt.opts.save.form(n))}},ko=Object.freeze({type:"field",displayType:"slider"}),$e=n=>({transform:`translateX(${n?`${n}px`:0})`});class hs{constructor(t){m(this,"toggleTabbedLayout",()=>{this.getPanelDisplay();const t=this.isTabbed;return this.panelsWrap.parentElement.classList.toggle("tabbed-panels",t),t&&this.panelNav.removeAttribute("style"),t});m(this,"resizePanels",()=>{this.toggleTabbedLayout();const t=this.panelsWrap.style,e=g.getStyle(this.currentPanel,"height");return t.height=e,e});this.opts=$t(ko,t),this.panelDisplay=this.opts.displayType,this.activePanelIndex=0,this.panelNav=this.createPanelNav();const e=this.createPanelsWrap();this.nav=this.navActions();const o=new window.ResizeObserver(([{contentRect:{width:s}}])=>{this.currentWidth!==s&&(this.toggleTabbedLayout(),this.currentWidth=s,this.nav.setTranslateX(this.activePanelIndex,!1))}),r=window.setTimeout(()=>{o.observe(e),window.clearTimeout(r)},_r)}getPanelDisplay(){const t=this.panelsWrap,o=parseInt(g.getStyle(t,"width"))>390?"tabbed":"slider",r=this.opts.displayType==="auto";return this.panelDisplay=r?o:this.opts.displayType||ko.displayType,this.panelDisplay}createPanelsWrap(){const t=g.create({className:"panels",content:this.opts.panels.map(({config:{label:e},...o})=>o)});return this.opts.type==="field"&&this.sortableProperties(t),this.panelsWrap=t,this.panels=t.children,this.currentPanel=this.panels[this.activePanelIndex],t}sortableProperties(t){const e=this,o=t.getElementsByClassName("field-edit-group");return k.forEach(o,(r,s)=>{r.fieldId=e.opts.id,r.isSortable&&w.create(r,{animation:150,group:{name:"edit-"+r.editGroup,pull:!0,put:["properties"]},sort:!0,handle:".prop-order",onSort:i=>{e.propertySave(i.to),e.resizePanels()}})})}createPanelNavLabels(){const t=this.opts.panels.map(r=>({tag:"h5",action:{click:s=>{const i=wt(s.target,s.target.parentElement);this.currentPanel=this.panels[i];const a=s.target.parentElement.childNodes;this.nav.refresh(i),g.removeClasses(a,"active-tab"),s.target.classList.add("active-tab")}},content:r.config.label})),e={className:"panel-labels",content:{content:t}},[o]=t;return o.className="active-tab",g.create(e)}createPanelNav(){this.labels=this.createPanelNavLabels();const t={tag:"button",attrs:{className:"next-group",title:y.get("controlGroups.nextGroup"),type:"button"},dataset:{toggle:"tooltip",placement:"top"},action:{click:o=>this.nav.nextGroup(o)},content:g.icon("triangle-right")},e={tag:"button",attrs:{className:"prev-group",title:y.get("controlGroups.prevGroup"),type:"button"},dataset:{toggle:"tooltip",placement:"top"},action:{click:o=>this.nav.prevGroup(o)},content:g.icon("triangle-left")};return g.create({tag:"nav",attrs:{className:"panel-nav"},content:[e,this.labels,t]})}get isTabbed(){return this.panelDisplay==="tabbed"}navActions(){const t={},e=this.currentPanel.parentElement,o=this.labels.firstChild,r=this.currentPanel.parentElement.childNodes;this.activePanelIndex=wt(this.currentPanel,e);let s={nav:0,panel:0},i={...s};const a=d=>{const u=o.children;return g.removeClasses(r,"active-panel"),g.removeClasses(u,"active-tab"),this.currentPanel=r[d],this.currentPanel.classList.add("active-panel"),u[d].classList.add("active-tab"),this.currentPanel},l=d=>({nav:-o.offsetWidth*d,panel:-e.offsetWidth*d}),c=({offset:d,reset:u,duration:h=pe,animate:p=!this.isTabbed})=>{const f=[$e(i.panel),$e(d.panel)],b=[$e(i.nav),$e(this.isTabbed?0:d.nav)];if(u){const[L]=f,[D]=b;f.push(L),b.push(D)}const _={easing:"ease-in-out",duration:p?h:0,fill:"forwards"},x=e.animate(f,_);o.animate(b,_);const O=()=>{this.panelsWrap.style.height=g.getStyle(this.currentPanel,"height"),x.removeEventListener("finish",O),u||(i=d)};x.addEventListener("finish",O)};return t.setTranslateX=(d,u=!0)=>{s=l(d||this.activePanelIndex),c({offset:s,animate:u})},t.refresh=d=>{d!==void 0&&(this.activePanelIndex=d,a(d)),this.resizePanels(),t.setTranslateX(this.activePanelIndex,!1)},t.nextGroup=()=>{const d=this.activePanelIndex+1;if(d!==r.length){const u=a(d);s={nav:-o.offsetWidth*d,panel:-u.offsetLeft},c({offset:s}),this.activePanelIndex++}else s={nav:i.nav-8,panel:i.panel-8},c({offset:s,reset:!0});return this.currentPanel},t.prevGroup=()=>{if(this.activePanelIndex!==0){const d=this.activePanelIndex-1,u=a(d);s={nav:-o.offsetWidth*d,panel:-u.offsetLeft},c({offset:s}),this.activePanelIndex--}else s={nav:8,panel:8},c({offset:s,reset:!0})},t}}const V={getStyle:(n,t=!1)=>{let e;return window.getComputedStyle?e=window.getComputedStyle(n,null):n.currentStyle&&(e=n.currentStyle),t?e[t]:e},fadeOut:(n,t=250)=>{const e=1/(t/60);n.style.opacity=1,function o(){const r=Number(n.style.opacity)-e;r>0?(n.style.opacity=r,window.requestAnimationFrame(o)):n.remove()}()},slideDown:(n,t=250,e=!1)=>{n.style.display="block";const o=V.getStyle(n),r=parseInt(o.height,10),s=r/(t/60);n.style.height="0px",function i(){const a=parseFloat(n.style.height),l=a+s;a<r?(n.style.height=l+"px",window.requestAnimationFrame(i)):(n.style.height="auto",e&&e(n))}()},slideUp:(n,t=250,e=!1)=>{const o=V.getStyle(n),r=parseInt(o.height),s=o.overflow;n.style.overflow="hidden",n.style.height=r+"px";const i=o.minHeight;n.style.minHeight="auto";const a=parseFloat(r/(t/60)).toFixed(2);(function l(){const d=parseInt(n.style.height,10)-a;d>0?(n.style.height=d+"px",window.requestAnimationFrame(l)):(n.style.overflow=s,n.style.display="none",n.style.minHeight=i,delete n.style.height,e&&e(n))})()},slideToggle:(n,t=250,e=V.getStyle(n,"display")==="none")=>{e?V.slideDown(n,t):V.slideUp(n,t)}},Pe="f-autocomplete",Ne="highlight-component";let Vo=Date.now(),En;const Bp=(n,t)=>n.reduce((e,o)=>e+(o===t),0),ps=({name:n,id:t,...e})=>["config.label","attrs.id","meta.id"].reduce((i,a)=>(i||(i=e.get(a)),i),null)||n==="external"&&((...i)=>y.get(i.join("."))||Nt(i.join(" ")))(n,t),kp=n=>{const t=[],e=$.flatList();return Object.entries(e).map(([r,s])=>{const i=ps(s);if(i){const a={tag:"span",content:` ${Nt(s.name)}`,className:"component-type"},l=`${s.name}.${i}`;t.push(l);const c=Bp(t,l),d={tag:"span",content:c>1&&`(${c})`,className:"component-label-count"};return g.makeOption([r,[`${i} `,d,a]],n)}}).filter(Boolean)};class Vp{constructor(t,e,o){this.key=t,this.className=t.replace(/\./g,"-"),this.value=e,this.events=[],this.i18nKey=o,this.build()}build(){const t=o=>{const r=this.list,s=this.getActiveOption();let a=new Map([[38,()=>{const l=this.getPreviousOption(s);l&&this.selectOption(l)}],[40,()=>{const l=this.getNextOption(s);l&&this.selectOption(l)}],[13,()=>{s&&(this.selectOption(s),this.setValue(s),r.style.display==="none"?this.showList(s):this.hideList()),o.preventDefault()}],[27,()=>{this.hideList()}]]).get(o.keyCode);return a||(a=()=>!1),a()},e={focus:({target:o})=>{this.updateOptions(),o.parentElement.classList.add(`${this.className}-focused`);const r=g.toggleElementsByStr(this.list.querySelectorAll("li"),o.value);o.addEventListener("keydown",t);const s=this.list.querySelector(".active-option")||r[0];this.showList(s)},blur:({target:o})=>{o.parentElement.classList.remove(`${this.className}-focused`),o.removeEventListener("keydown",t),this.hideList()},input:o=>{const r=g.toggleElementsByStr(this.list.querySelectorAll("li"),o.target.value);if(o.target.value.length===0&&this.clearValue(),r.length===0)this.hideList();else{const s=this.getActiveOption()||r[0];this.showList(s)}this.hiddenField.value=o.target.value,this.value=o.target.value,this.runEvent("onChange",{target:this.hiddenField})}};return this.displayField=g.create({tag:"input",autocomplete:"off",action:e,attrs:{type:"text",className:`${Pe}-display-field`,value:this.label||this.value,placeholder:y.get(`${this.i18nKey}.${this.key}.placeholder`)}}),this.hiddenField=g.create({tag:"input",attrs:{type:"hidden",className:this.className,value:this.value}}),this.list=g.create({tag:"ul",attrs:{className:`${Pe}-list`}}),this.dom=g.create({children:[this.displayField,this.hiddenField,this.list],className:this.className,action:{onRender:()=>{const o=this.value&&$.getAddress(this.value);this.label=o&&ps(o),this.label&&(this.displayField.value=this.label),this.updateOptions()}}}),this.dom}updateOptions(){const t=Date.now();t-Vo>_r&&(g.empty(this.list),this.generateOptions(),Vo=t),(En||this.generateOptions()).forEach(o=>this.list.appendChild(o))}generateOptions(){const t=kp(),e=o=>{const r=`${Pe}-list-item`;return o.classList.contains(r)||(o=o.parentElement),o};return En=t.map(o=>{const r=o.value;let[s]=o.label;s=s.trim();const i={tag:"li",children:o.label,dataset:{value:r,label:s},className:`${Pe}-list-item`,action:{mousedown:({target:a})=>{a=e(a),this.setValue(a),this.selectOption(a),this.hideList()},mouseover:({target:a})=>{a=e(a),this.removeHighlight(),this.highlightComponent(a)}}};return g.create(i)}),En}hideList(t=this.list){V.slideUp(t,pe),this.removeHighlight()}showList(t,e=this.list){this.selectOption(t),V.slideDown(e,pe)}getActiveOption(t=this.list){const e=t.getElementsByClassName("active-option")[0];return e&&e.style.display!=="none"?e:null}getPreviousOption(t){let e=t;do e=e?e.previousSibling:null;while(e!=null&&e.style.display==="none");return e}getNextOption(t){let e=t;do e=e?e.nextSibling:null;while(e!=null&&e.style.display==="none");return e}selectOption(t,e=this.list){const o=e.querySelectorAll("li");for(let r=0;r<o.length;r++){const{dataset:{value:s}}=o[r];if(o[r].classList.remove("active-option"),s){const i=$.getAddress(s);i.dom&&i.dom.classList.remove(Ne)}}t&&(t.classList.add("active-option"),this.highlightComponent(t))}removeHighlight(){const t=document.getElementsByClassName(Ne);for(let e=0;e<t.length;e++)t[e].classList.remove(Ne)}highlightComponent(t){const{dataset:{value:e}}=t;if(e){const o=$.getAddress(e);o.dom&&o.dom.classList.add(Ne)}}clearValue(){this.selectOption(null),this.displayField.value="",this.hiddenField.value="",this.value="",this.runEvent("onChange",{target:this.hiddenField})}setValue(t){const{label:e,value:o}=t.dataset;this.displayField.value=e,this.hiddenField.value=o,this.value=o,this.runEvent("onChange",{target:this.hiddenField})}addEvent(t,e){this.events.push([t,e])}runEvent(t,e){this.events.forEach(([o,r])=>{o===t&&r(e)})}}const Wp=n=>{const t=Ue(n),e={"field.property":ae,...Gi},r=t?(s=>$.getAddress(s).getData())(n):e[n];return Object.keys(r).reduce((s,i)=>(s[i]=i,s),{})},Wo=(n,t)=>{const e=Wp(n);return Object.entries(e).reduce((o,[r,s])=>{if(r!=="id"){const i={tag:"option",content:y.get(`${n}.${r}`)||r.toLowerCase(),attrs:{value:s}};t===s&&(i.attrs.selected=!0),o.push(g.create(i))}return o},[])},qo=(n,t)=>{g.empty(n),t.forEach(e=>n.add(e))},_n=({key:n,value:t,type:e="text",checked:o})=>{const r={tag:"input",attrs:{type:e,value:t,placeholder:y.get(`${n}.placeholder`)||Nt(n)},className:n.replace(/\./g,"-"),config:{}};return o&&(r.attrs.checked=!0),r},fs=n=>{const t=y.get(n);if(t)return t;const e=n.split(".");return y.get(e[e.length-1])},ie={autocomplete:(n,t,e)=>new Vp(n,t,e),string:(n,t)=>_n({key:n,value:t}),boolean:(n,t)=>_n({key:n,value:t,type:n==="selected"?"radio":"checkbox",checked:t}),number:(n,t)=>_n({key:n,value:t,type:"number"}),array:(n,t=[])=>({tag:"select",attrs:{placeholder:fs(`placeholder.${n}`)},className:n.replace(/\./g,"-"),options:t}),object:n=>Object.entries(n).map(([t,e])=>ie[g.childType(e)](t,e))},qp=["selected","checked"],Gp={boolean:(n,t)=>({click:({target:{checked:e}})=>{var o,r;((r=(o=t.data)==null?void 0:o.attrs)==null?void 0:r.type)==="radio"&&t.set("options",t.data.options.map(s=>({...s,selected:!1}))),t.set(n,e),t.updatePreview()}}),string:(n,t)=>({input:({target:{value:e}})=>{t.set(n,e)}}),number:(n,t)=>({input:({target:{value:e}})=>{t.set(n,Number(e)),t.updatePreview()}}),array:(n,t)=>({change:({target:{value:e}})=>{t.set(n,e),t.updatePreview()}}),object:()=>({})};class De{constructor({key:t,data:e,index:o,field:r}){m(this,"generateConditionFields",(t,e)=>{const o={tag:"label",className:`condition-label ${t}-condition-label`,content:y.get(t)||t};return e.map((r,s)=>{const i=[],a=Object.entries(r).map(([c,d])=>{const u=this.conditionInput(c,d,t,s);return u&&i.push([u.className,d.trim()].filter(Boolean).join("-")),u}).filter(Boolean),l=ge(a,qi.map(c=>`condition-${c}`),"className||dom.className");return this.processConditionUIState(l),s||l.unshift(o),this.itemFieldGroups.push(l),{children:l,className:`f-condition-row ${t}-condition-row ${i.join(" ")}`}})});m(this,"processConditionUIState",t=>{const e=i=>(i=i.split("|"),t.filter(a=>i.includes(a.className))),o=i=>{i=Array.isArray(i)?i:[i];const a=setTimeout(()=>{i.forEach(l=>{l.dom&&(l=l.dom),l.style.display="none"}),clearTimeout(a)},rt)},r=i=>{i=Array.isArray(i)?i:[i];const a=setTimeout(()=>{i.forEach(l=>{l.dom&&(l=l.dom),l.removeAttribute("style")}),clearTimeout(a)},rt)},s=new Map([["condition-source",i=>{const a=e("condition-sourceProperty"),l=a[0],c=Ue(i.value)?i.value:"field.property",d=Wo(c,l.value);return qo(l,d),i.value?r(a):o(a)}],["condition-target",i=>{const a=e("condition-targetProperty");return bt(i.value)&&i.value?r(a):o(a)}],["condition-sourceProperty",i=>{const a=e("condition-comparison|condition-targetProperty|condition-target"),l=i.value,c=l.substring(l.lastIndexOf(".")+1,l.length);return ap(c)?o(a):r(a)}]]);t.forEach(i=>{const a=s.get(i.className);a&&a(i)})});m(this,"conditionInput",(t,e,o,r)=>{const s=this.field,i=`${this.itemKey}.${o}.${r}`,a=`${this.field.id}.${i}`,l=`${s.name}s.${a}.${t}`,c=(p,f,b)=>{const _=Wo(b||p,f),x=ie.array(`condition.${p}`);x.action={change:d,onRender:L=>d({target:L})};const O=g.create(x);return qo(O,_),O},d=({target:p})=>{const f=p.closest(".f-condition-row"),b=new RegExp(`${p.className}(?:\\S?)+`,"gm");f.className=f.className.replace(b,""),f.classList.add([p.className,p.value].filter(Boolean).join("-"));const _={dataPath:l,value:p.value,src:p};A.formeoUpdated(_),$.setAddress(l,p.value);const x=p.closest(".f-condition-row"),O=wt(x);this.processConditionUIState(this.itemFieldGroups[O])},u={comparison:p=>c("comparison",p),logical:p=>c("logical",p),source:(p,f="source")=>{const b=ie.autocomplete(`condition.${f}`,p,o);return $.setConditionMap(p,s),b.addEvent("onChange",_=>{$.removeConditionMap($.getAddress(l)),d(_),$.setConditionMap(_.target.value,s)}),b},sourceProperty:p=>c("sourceProperty",p,"field.property"),targetProperty:p=>c("targetProperty",p,"field.property"),target:p=>u.source(p,"target"),value:p=>{const f=ie.string("condition.value",p);return f.action={input:d},g.create(f)},assignment:p=>c("assignment",p)};if(u[t])return u[t](e);console.error(`${t}: invalid condition attribute`)});this.itemValues=ge(Object.entries(e),qp,"0");const[s,i]=t.split(".");this.field=r,this.itemKey=t,this.itemIndex=o,this.panelName=s,this.isDisabled=r.isDisabledProp(i,s),this.isHidden=this.isDisabled&&r.config.panels[s].hideDisabled,this.isLocked=r.isLockedProp(i,s),this.dom=g.create({tag:"li",className:[`field-${t.replace(/\./g,"-")}`,"prop-wrap",this.isHidden&&"hidden-property"],children:{className:"field-prop",children:[this.itemInputs,this.itemControls]}})}get itemInputs(){return this.itemFieldGroups=[],{className:`${this.panelName}-prop-inputs prop-inputs f-input-group`,children:this.itemValues.map(([e,o])=>{let r=this.panelName==="conditions"?this.generateConditionFields(e,o):this.itemInput(e,o);return["selected","checked"].includes(e)&&(r={className:"f-addon",children:r}),r})}}get itemControls(){if(this.isLocked)return{className:`${this.panelName}-prop-controls prop-controls`,content:[]};const t={tag:"button",attrs:{type:"button",className:"prop-remove prop-control"},action:{click:()=>{V.slideUp(this.dom,250,o=>{this.field.remove(this.itemKey),g.remove(o),this.field.resizePanelWrap()})}},content:g.icon("remove")};return{className:`${this.panelName}-prop-controls prop-controls`,content:[t]}}itemInput(t,e){const o=g.childType(e)||"string",r=Object.assign({},{config:{},attrs:{}},ie[o](t,e)),s=this.itemKey.replace(/.\d+$/,c=>`${c}.${t}`),i=s.split(".").filter(isNaN).join("."),[a,l]=[[...this.itemKey.split("."),t],[t]].map(c=>[this.field.id,...c].filter(Boolean).join("-"));return r.config=Object.assign({},r.config,{label:this.panelName!=="options"&&fs(i),labelAfter:!1}),r.attrs=Object.assign({},r.attrs,{name:r.attrs.type==="checkbox"?`${l}[]`:l,id:a,disabled:this.isDisabled,locked:this.isLocked}),r.action={...Gp[o](s,this.field)},r}}class Up{constructor(t,e,o){m(this,"addAttribute",(t,e)=>{const o=Nn(t),r=`attrs.${o}`;y.current[r]||y.put(r,Kr(t)),typeof e=="string"&&["true","false"].includes(e)&&(e=JSON.parse(e)),this.field.set(`attrs.${t}`,e);const s=this.props.querySelector(`.field-attrs-${o}`),i=new De({key:r,data:{[o]:e},field:this.field});s?this.props.replaceChild(i.dom,s):this.props.appendChild(i.dom),this.field.resizePanelWrap()});m(this,"addOption",()=>{const t=this.field.data.meta.id,e=this.field.get("options"),o=t==="select"?"option":t,r=y.get("newOptionLabel",{type:o})||"New Option",s=`options.${this.data.length}`,a={...e.length?Ur(e[e.length-1]):{},label:r,value:Nn(r)},l=new De({key:s,data:a,field:this.field,index:this.props.children.length});this.editPanelItems.push(l),this.props.appendChild(l.dom),this.field.set(s,a),this.field.resizePanelWrap()});m(this,"addCondition",t=>{const o=`conditions.${this.field.get("conditions").length}`,r=this.props.querySelector(`.field-${o.replace(".","-")}`),s=new De({key:o,data:t.template,field:this.field});r?this.props.replaceChild(s.dom,r):this.props.appendChild(s.dom),this.field.set(o,t.template),this.field.resizePanelWrap()});this.type=g.childType(t),this.data=this.type==="object"?Object.entries(t):t,this.name=e,this.field=o,this.panelConfig=this.getPanelConfig(this.data)}getPanelConfig(t){return this.props=this.createProps(t),this.editButtons=this.createEditButtons(),{id:`${this.field.id}-${this.name}-panel`,config:{label:y.get(`panel.label.${this.name}`)},attrs:{className:`f-panel ${this.name}-panel`},children:[this.props,this.editButtons]}}createProps(t){this.editPanelItems=Array.from(t).map((o,r)=>{const s=this.type==="array",i=[this.name,s?String(r):o[0]].join("."),a=s?o:{[o[0]]:o[1]};return new De({key:i,data:a,field:this.field})});const e={tag:"ul",attrs:{className:["field-edit-group",`field-edit-${this.name}`]},editGroup:this.name,isSortable:this.name==="options",content:this.editPanelItems};return g.create(e)}createEditButtons(){const t=this,e=this.name,o=y.get(`panelEditButtons.${e}`),r={attrs:t.addAttribute,options:t.addOption,conditions:t.addCondition};return{className:"panel-action-buttons",content:[{...g.btnTemplate({content:o,title:o}),className:`add-${e}`,action:{click:a=>{const l={btnCoords:g.coords(a.target),addAction:r[e]};e==="attrs"&&(l.isDisabled=t.field.isDisabledProp,l.isLocked=t.field.isLockedProp,l.message={attr:y.get(`action.add.${e}.attr`),value:y.get(`action.add.${e}.value`)});const c=Nt(e),d=new window.CustomEvent(`onAdd${c}`,{detail:l});nt.add[e](l),document.dispatchEvent(d)}}}]}}}class Ce extends Qn{constructor(e,o={},r){super(e,{...o,id:o.id||W()});m(this,"mutationHandler",e=>e.map(o=>{}));m(this,"remove",e=>{if(e){const s=e.split("."),i=s.pop(),a=this.get(s);return Array.isArray(a)?Yr(i)?a.splice(Number(i),1):this.set(s,a.filter(l=>l!==i)):delete a[i],a}if(this.name==="stage")return null;const o=this.parent,r=this.children;return dn(r,s=>s.remove()),this.dom.parentElement.removeChild(this.dom),ip($.getAddress(`${o.name}s.${o.id}.children`),this.id),o.children.length||o.emptyClass(),o.name==="row"&&o.autoColumnWidths(),$[`${this.name}s`].delete(this.id)});m(this,"emptyClass",()=>this.dom.classList.toggle("empty",!this.children.length));m(this,"removeClasses",e=>{const o={string:()=>this.dom.classList.remove(e),array:()=>e.map(r=>this.dom.classList.remove(r))};return o.object=o.string,o[g.childType(e)](this.dom)});m(this,"loadChildren",(e=this.data.children)=>e.map(o=>this.addChild({id:o})));m(this,"saveChildOrder",()=>{if(this.render)return;const e=this.children.map(({id:o})=>o);return this.set("children",e),e});m(this,"onSort",()=>this.saveChildOrder());m(this,"onEnd",({to:{parentElement:e},from:{parentElement:o}})=>{e==null||e.classList.remove(`hovering-${U(e)}`),o==null||o.classList.remove(`hovering-${U(o)}`)});m(this,"runConditions",()=>{const e=this.get("conditions");return e!=null&&e.length?e.map(r=>{const s=this.processConditions(r.if),i=this.processResults(r.then);return s.map(a=>this.evaluateConditions(a)&&this.execResults(i))}):null});m(this,"value",(e,o)=>{const r=e.split("."),s=this.getComponent(e),i=s&&r.slice(2,r.length).join(".");return[!s,!i,!ae[i]].some(Boolean)?e:o?s.set(ae[i],o):s.get(ae[i])});m(this,"getResult",e=>({"=":(r,s,i)=>r.set(s,i)})[e]);m(this,"processResults",e=>e.map(({operator:o,target:r,value:s})=>{const i=this.getComponent(r),a=i&&r.split(".").slice(2,r.length).join(".");return{target:i,propertyPath:a,action:this.getResult(o),value:this.value(s)}}));m(this,"execResults",e=>{const o=e.map(r=>this.execResult(r));return Promise.all(o)});m(this,"execResult",({target:e,action:o,value:r,propertyPath:s})=>new Promise((i,a)=>{try{return i(o(e,r))}catch(l){return a(l)}}));m(this,"cloneData",()=>{const e={...Pt(this.data),id:W()};return this.name!=="field"&&(e.children=[]),e});m(this,"clone",(e=this.parent)=>{const o=e.addChild(this.cloneData(),this.index+1);return this.name!=="field"&&this.cloneChildren(o),this.name==="column"&&e.autoColumnWidths(),o});m(this,"cloneChildren",e=>{this.children.forEach(o=>o&&o.clone(e))});m(this,"createChildWrap",e=>g.create({tag:"ul",attrs:{className:"children"},children:e}));this.id=this.data.id,this.name=e,this.config=$[`${this.name}s`].config,$t(this.config,o.config),this.dataPath=`${this.name}s.${this.id}.`,this.observer=new MutationObserver(this.mutationHandler),this.render=r}observe(e){this.observer.disconnect(),this.observer.observe(e,{childList:!0})}get js(){return this.data}get json(){return this.data}empty(){const e=this.children.map(o=>o.remove());return this.data.children=this.data.children.filter(o=>e.indexOf(o)===-1),this.dom.classList.add("empty"),e}getActionButtons(){let e="97px";const o=`hovering-${this.name}`;return{className:`${this.name}-actions group-actions`,action:{onRender:r=>e=`${r.getElementsByTagName("button").length*24+1}px`,mouseenter:({target:r})=>{this.dom.classList.add(o),r.style[this.name==="row"?"height":"width"]=e},mouseleave:({target:r})=>{this.dom.classList.remove(o),r.removeAttribute("style")}},children:{className:"action-btn-wrap",children:this.buttons}}}toggleEdit(e=!this.isEditing){this.isEditing=e;const o=this.dom,r=`editing-${this.name}`,s=this.dom.querySelector(`.${this.name}-edit`);V.slideToggle(s,rt,e),this.name==="field"&&(V.slideToggle(this.preview,rt,!e),o.parentElement.classList.toggle(`column-${r}`,e)),o.classList.toggle(r,e)}get buttons(){const e=this,o=l=>l.map(c=>g.icon(c)),r={handle:(l=["move","handle"])=>({...g.btnTemplate({content:o(l)}),className:["item-handle"],meta:{id:"handle"}}),edit:(l=["edit"])=>({...g.btnTemplate({content:o(l)}),className:["item-edit-toggle"],meta:{id:"edit"},action:{click:c=>{e.toggleEdit()}}}),remove:(l=["remove"])=>({...g.btnTemplate({content:o(l)}),className:["item-remove"],meta:{id:"remove"},action:{click:(c,d)=>{V.slideUp(e.dom,rt,()=>{e.name==="column"&&e.parent.autoColumnWidths(),e.remove()})}}}),clone:(l=["copy","handle"])=>({...g.btnTemplate({content:o(l)}),className:["item-clone"],meta:{id:"clone"},action:{click:()=>this.clone()}})},{buttons:s,disabled:i}=this.config.actionButtons;return s.filter(l=>!i.includes(l)).map(l=>{var c;return((c=r[l])==null?void 0:c.call(r))||l})}get index(){return wt(this.dom)}get parentType(){return Ni.get(this.name)}get parent(){const e=this.parentType;if(!this.dom||!e)return null;const o=this.dom.closest(`.${qn[e]}`);return o&&g.asComponent(o)}get children(){if(!this.dom)return[];const e=this.domChildren,o=po.get(this.name);return Jn(e,r=>$.getAddress(`${o}s.${r.id}`)).filter(Boolean)}get domChildren(){const e=this.dom.querySelector(".children");return e?e.children:[]}addChild(e={},o=this.domChildren.length){typeof e!="object"&&(e={id:e});const r=this.dom.querySelector(".children"),{id:s=W()}=e,i=po.get(this.name);if(!i)return null;const a=`${i}s`,l=$.getAddress(`${a}.${s}`)||$[a].add(s,e);r.insertBefore(l.dom,r.children[o]);const c=l.get("children");return c!=null&&c.length&&l.loadChildren(c),this.removeClasses("empty"),this.saveChildOrder(),l}onAdd({from:e,to:o,item:r,newIndex:s}){var p;const i=this;e.classList.contains(Tt)||(e=e.parentElement);const a=U(e),l=U(o.parentElement),c=()=>{i.saveChildOrder(),i.removeClasses("empty")},d=new Map([[-2,()=>{const f=i.addChild({},s).addChild();return f.addChild.bind(f)}],[-1,()=>{const f=i.addChild({},s);return f.addChild.bind(f)}],[0,()=>i.addChild.bind(i)],[1,f=>{const b=wt(i.dom);return()=>i.parent.addChild(f,b+1)}],[2,f=>()=>i.parent.parent.addChild(f)]]),u={controls:()=>{const{controlData:f}=me.get(r.id),{meta:{id:b}}=f,_=b.startsWith("layout-")?b.replace(/^layout-/,""):"field",O=H({stage:{row:0,column:-1,field:-2},row:{row:1,column:0,field:-1},column:{row:2,column:1,field:0},field:1},`${i.name}.${_}`),L=d.get(O)();return g.remove(r),L(f,s)},row:()=>{const f={stage:-1,row:0,column:1},b=(d.get(f[l])||fe)();return b==null?void 0:b({id:r.id},s)},column:()=>{const f={stage:-2,row:-1},b=(d.get(f[l])||fe)();return b==null?void 0:b(r.id)}},h=(p=u[a])==null?void 0:p.call(u,r,s);return c(),h}onRemove({from:{parentElement:e}}){return e.classList.contains(ot)&&e.classList.remove("column-editing-field"),this.name!=="stage"&&!this.children.length?this.remove():(this.emptyClass(),this.saveChildOrder())}onRender(){const{events:e}=this.config;if(!e)return null;e.onRender&&g.onRender(this.dom,e.onRender)}set config(e){const o=H(this.data,"meta.id"),r=H(e,"all"),s=o&&H(e,o),i=H(e,this.id),a=[r,s,i].reduce((l,c)=>c?$t(l,c):l,this.configVal);this.configVal=a}get config(){return this.configVal}getComponent(e){const[o,r]=e.split("."),s=$[o];return r===this.id?this:s==null?void 0:s.get(r)}}const Yp=()=>({conditions:[xr()]});class gs extends Ce{constructor(e=Object.create(null)){super("field",{...Yp(),...e});m(this,"updateConditionsPanel",()=>{const e=setTimeout(()=>{const o=this.editPanels.find(({name:i})=>i==="conditions");if(!o)return null;const r=o.createProps(),s=this.dom.querySelector(".field-edit-conditions");s.parentElement.replaceChild(r,s),clearTimeout(e)},rt)});m(this,"updatePreview",Gr(()=>{if(!this.preview.parentElement)return null;this.updateLabel();const e=g.create(this.fieldPreview(),!0);this.preview.parentElement.replaceChild(e,this.preview),this.preview=e},rt));m(this,"isDisabledProp",(e,o="attrs")=>{const r=this.config.panels[o];return r?r.disabled.concat(this.get(`config.disabled${Nt(o)}`)).includes(e):!1});m(this,"isLockedProp",(e,o="attrs")=>{const r=this.config.panels[o];return r?r.locked.concat(this.get(`config.locked${Nt(o)}`)).includes(e):!1});this.label=g.create(this.labelConfig),this.preview=g.create(this.fieldPreview()),this.editPanels=[];const o=this.getActionButtons(),r=o.children.children.some(i=>{var a;return((a=i.meta)==null?void 0:a.id)==="edit"});let s={tag:"li",attrs:{className:At},id:this.id,children:[this.label,o,r&&this.fieldEdit,this.preview].filter(Boolean),panelNav:this.panelNav,dataset:{hoverTag:y.get("field")},action:{mouseenter:()=>this.dom.classList.add(`hovering-${this.name}`),mouseleave:()=>this.dom.classList.remove(`hovering-${this.name}`)}};s=g.create(s),this.observe(s),this.dom=s,this.isEditing=!1,this.onRender(s)}get labelConfig(){if(!!this.get("config.hideLabel"))return;const o=this.get("config.editorLabel")||this.get("config.label"),r=this.get("attrs.required"),s=this.config.label.disableHTML;return{className:"prev-label",children:[{...(()=>{const c={tag:"label",attrs:{}};return s?(c.tag="input",c.attrs.value=o,c):(c.attrs.contenteditable=!0,c.children=o,c)})(),action:{input:({target:{innerHTML:c,innerText:d,value:u}})=>{super.set("config.label",s?u:c);const h=$.getConditionMap(`fields.${this.id}`);if(h)return h.updateConditionSourceLabel(`${this.name}s.${this.id}`,s?u:d)}}},r&&g.requiredMark()]}}updateConditionSourceLabel(e,o){const r=this.editPanels.find(({name:s})=>s==="conditions");if(!r)return null;r.editPanelItems.forEach(({itemFieldGroups:s})=>{s.forEach(i=>{const a=i.find(l=>l.value===e);a&&(a.displayField.value=o)})})}set(...e){const[o,r]=e,s=super.set(o,r);return this.updatePreview(),s}updateLabel(){if(!this.label)return null;const e=g.create(this.labelConfig);this.label.parentElement.replaceChild(e,this.label),this.label=e}get fieldEdit(){const e=this;this.editPanels=[];const o=["object","array"],r=["config","meta","action","events",...this.config.panels.disabled],i=Bt([...this.config.panels.order,...Object.keys(this.data)]).filter(d=>!r.includes(d)),a={className:["field-edit","slide-toggle","formeo-panels-wrap"]};i.forEach(d=>{const u=this.get(d),h=g.childType(u);if(o.includes(h)){const p=new Up(u,d,this);this.editPanels.push(p)}});const l={panels:this.editPanels.map(({panelConfig:d})=>d),id:e.id,displayType:"auto"},c=this.editPanels.length;return c&&(this.panels=new hs(l),a.className.push(`panel-count-${c}`),a.content=[this.panels.panelNav,this.panels.panelsWrap],this.panelNav=this.panels.nav,this.resizePanelWrap=this.panels.nav.refresh,a.action={onRender:()=>{if(this.resizePanelWrap(),!c){const d=this.dom,u=d.querySelector(".item-edit-toggle"),h=d.querySelector(".field-actions"),p=h.getElementsByTagName("button");h.style.maxWidth=`${p.length*p[0].clientWidth}px`,g.remove(u)}}}),a}fieldPreview(){var r;const e=Pt(this.data);return e.id=`prev-${this.id}`,(r=this.data)!=null&&r.config.editableContent&&(e.attrs={...e.attrs,contenteditable:!0}),{attrs:{className:"field-preview",style:this.isEditing&&"display: none;"},content:g.create(e,!0),action:{change:s=>{const{target:i}=s,{checked:a,type:l}=i;if(["checkbox","radio"].includes(l)){const c=+i.id.split("-").pop();l==="radio"&&this.set("options",this.get("options").map(u=>({...u,selected:!1})));const d=l==="checkbox"?"checked":"selected";this.set(`options.${c}.${d}`,a)}},click:s=>{s.target.contentEditable==="true"&&s.preventDefault()},input:s=>{["input","meter","progress","button"].includes(this.data.tag)&&super.set("attrs.value",s.target.value),s.target.contentEditable&&super.set("content",s.target.innerHTML)}}}}}const Qe={js:[],css:[]},ms=n=>new Promise((t,e)=>{if(Qe.js.includes(n))return t(n);const o=g.create({tag:"script",attrs:{type:"text/javascript",async:!0,src:`//${(void 0).src}`},action:{load:()=>{Qe.js.push(n),t(n)},error:()=>e(new Error(`${(void 0).src} failed to load.`))}}),r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r)}),vs=n=>{n=Array.isArray(n)?n:[n];const t=n.map(e=>new Promise((o,r)=>{if(Qe.css.includes(e))return o(e);function s(){this.removeEventListener("load",s),this.rel="stylesheet",Qe.css.push(e),o(e)}const i=g.create({tag:"link",attrs:{rel:"preload",href:e,as:"style"},action:{load:s,error:()=>r(new Error(`${(void 0).src} failed to load.`))}});document.head.appendChild(i)}));return Promise.all(t)},On=n=>(typeof n=="string"?Promise.resolve(n):n.text()).then(e=>{const o="formeo-sprite";let r=document.getElementById(o);return r||(r=g.create({id:o,children:e,attrs:{hidden:!0,style:"display: none;"}}),document.body.insertBefore(r,document.body.childNodes[0])),r}),Kp=n=>{const t=Array.isArray(n)?ho.filter(({name:e})=>n.indexOf(e)!==-1):ho;return Promise.all(t.map(({src:e})=>ms(e)))},Go=(n,t,e=lp)=>new Promise((o,r)=>fetch(n).then(s=>o(t?t(s):s)).catch(s=>r(new Error(e(s))))),Xp={js:ms,css:vs};class q{constructor({events:t={},dependencies:e={},...o}={}){m(this,"parsedHtml",t=>{const e=document.createElement("textarea");return e.innerHTML=t,e.textContent});this.events=t,this.controlData=o,this.depsLoaded=this.fetchDependencies(e)}onRenderPreview(){}fetchDependencies(t,e=!0){const o=Object.entries(t).map(([r,s])=>Xp[r](s));return Promise.all(o)}on(t){const e={prerender:fe,renderComponent:fe,render:o=>{const r=()=>{this.onRender&&this.onRender(o)};this.depsLoaded.then(()=>{r()})}};return t?e[t]:e}static i18n(t,e){const o=this.definition;let r=o.i18n||{};const s=r.locale;r=r[s]||r.default||r;const i=typeof r=="object"?r[t]:r;if(i)return i;let a=o.i18n;return typeof a=="object"&&(a=a[t]),r.get(a,e)}}const Zp={config:{label:"row"},meta:{group:"layout",icon:"rows",id:"layout-row"}},Jp={config:{label:"column"},meta:{group:"layout",icon:"columns",id:"layout-column"}},Qp=[Zp,Jp];class tf extends q{constructor(){const t={tag:"input",attrs:{type:"hidden",value:""},config:{label:y.get("hidden"),hideLabel:!0},meta:{group:"common",icon:"hidden",id:"hidden"}};super(t)}}class ef extends q{constructor(){const t={tag:"input",attrs:{type:"number",required:!1,className:""},config:{label:y.get("number")},meta:{group:"common",icon:"hash",id:"number"}};super(t)}}class nf extends q{constructor(){const t={tag:"textarea",config:{label:y.get("controls.form.textarea")},meta:{group:"common",icon:"textarea",id:"textarea"},attrs:{required:!1}};super(t)}}class of extends q{constructor(){const t={tag:"input",attrs:{required:!1,type:"text",className:""},config:{label:y.get("controls.form.input.text")},meta:{group:"common",icon:"text-input",id:"text-input"}};super(t)}}class rf extends q{constructor(){const t={tag:"input",attrs:{type:"file",required:!1},config:{label:y.get("fileUpload")},meta:{group:"common",icon:"upload",id:"upload"}};super(t)}}const oo=(n,t=3)=>Array.from({length:t},(e,o)=>o+1).map(e=>{const o=n==="checkbox"?"checked":"selected";return{label:y.get("labelCount",{label:Nt(n),count:e}),value:`${n}-${e}`,[o]:!e}});class sf extends q{constructor(){const t={tag:"select",config:{label:y.get("controls.form.select")},attrs:{required:!1,className:""},meta:{group:"common",icon:"select",id:"select"},options:oo("option")};super(t)}}class af extends q{constructor(){const t={tag:"input",attrs:{type:"checkbox",required:!1},config:{label:y.get("controls.form.checkbox-group"),disabledAttrs:["type"]},meta:{group:"common",icon:"checkbox",id:"checkbox"},options:oo("checkbox",1)};super(t)}}class lf extends q{constructor(){const t={tag:"input",attrs:{type:"radio",required:!1},config:{label:y.get("controls.form.radio-group"),disabledAttrs:["type"]},meta:{group:"common",icon:"radio-group",id:"radio"},options:oo("radio")};super(t)}}class cf extends q{constructor(){const t={tag:"button",attrs:{className:[{label:"grouped",value:"f-btn-group"},{label:"ungrouped",value:"f-field-group"}]},config:{label:y.get("controls.form.button"),hideLabel:!0},meta:{group:"common",icon:"button",id:"button"},options:[{label:y.get("button"),type:["button","submit","reset"].map((e,o)=>({label:e,type:e})),className:[{label:"default",value:"",selected:!0},{label:"primary",value:"primary"},{label:"danger",value:"error"},{label:"success",value:"success"},{label:"warning",value:"warning"}]}]};super(t)}}class df extends q{constructor(){const t={tag:"input",attrs:{type:"date",required:!1,className:""},config:{label:y.get("controls.form.input.date")},meta:{group:"common",icon:"calendar",id:"date-input"}};super(t)}}const uf=[cf,df,tf,ef,nf,of,rf,sf,af,lf],Uo=Array.from(Array(5).keys()).slice(1).map(n=>`h${n}`),Sn="controls.html.header";class hf extends q{constructor(){const t={tag:Uo[0],attrs:{tag:Uo.map((e,o)=>({label:e.toUpperCase(),value:e,selected:!o})),className:""},config:{label:y.get(Sn),hideLabel:!0,editableContent:!0},meta:{group:"html",icon:"header",id:"html.header"},content:y.get(Sn)};super(t)}static get definition(){return{i18n:{header:"Header222"}}}get content(){return super.i18n(Sn)}}class pf extends q{constructor(){const t={tag:"p",attrs:{className:""},config:{label:y.get("controls.html.paragraph"),hideLabel:!0,editableContent:!0},meta:{group:"html",icon:"paragraph",id:"paragraph"},content:"Leverage agile frameworks to provide a robust synopsis for high level overviews. Iterative approaches to corporate strategy foster collaborative thinking to further the overall value proposition. Organically grow the holistic world view of disruptive innovation via workplace diversity and empowerment."};super(t)}}class ff extends q{constructor(){const t={tag:"hr",config:{label:y.get("controls.html.divider"),hideLabel:!0},meta:{group:"html",icon:"divider",id:"divider"}};super(t)}}class gf extends q{constructor(){const t={tag:"textarea",config:{label:"WYSIWYG",editableContent:!0},meta:{group:"html",icon:"rich-text",id:"tinymce"},attrs:{required:!1},action:{onRender:e=>{e.id&&(this.textareaID=e.id,window.tinymce.remove("textarea#"+e.id),window.tinymce.init({selector:"textarea#"+e.id}))}}};super(t)}}const mf=[hf,pf,ff,gf],vf=Object.freeze({sortable:!0,elementOrder:{},groupOrder:[],groups:[{id:"layout",label:"controls.groups.layout",elementOrder:["row","column"]},{id:"common",label:"controls.groups.form",elementOrder:["button","checkbox"]},{id:"html",label:"controls.groups.html",elementOrder:["header","block-text"]}],disable:{groups:[],elements:[],formActions:[]},elements:[],container:null,panels:{displayType:"slider"}}),bf=[...uf,...mf,...Qp];let yf=class{constructor(){m(this,"applyControlEvents",({clone:t})=>{const e=t.querySelector("button");Object.keys(this.controlEvents).map(o=>e.addEventListener(o,this.controlEvents[o]))});m(this,"groupLabel",t=>y.get(t)||t||"");m(this,"addElement",t=>{const e=H(this.get(t),"controlData"),{meta:{group:o,id:r}}=e,s={row:()=>zt.active.addChild(),column:()=>s.row().addChild(),field:i=>s.column().addChild(i)};return o!=="layout"?s.field(e):s[r.replace("layout-","")]()});m(this,"applyOptions",(t={})=>{const{container:e,elements:o,groupOrder:r,...s}=$t(vf,t);this.container=e,this.groupOrder=Bt(r.concat(["common","html","layout"])),this.elements=o.concat(bf),this.options=s});this.data=new Map,this.controlEvents={focus:({target:t})=>{const e=t.closest(`.${Tt}`);return e&&this.panels.nav.refresh(wt(e))},click:({target:t})=>this.addElement(t.parentElement.id)}}init(t,e=!1){return this.applyOptions(t),this.registerControls(),this.buildDOM(e),this}registerControls(){return this.controls=this.elements.map(t=>{const e=typeof t=="function",o=e?new t:new q(t),{controlData:{meta:r,config:s}}=o,i=e?s.label:y.get(s.label)||s.label,{id:a}=this.add(o),l={tag:"button",attrs:{type:"button"},content:[{tag:"span",className:"control-icon",children:g.icon(r.icon)},i],action:this.controlEvents};return o.dom=g.create({tag:"li",id:a,className:["field-control",`${r.group}-control`,`${r.id}-control`],content:l,meta:r}),o.dom}),this.controls}groupElements(){let t=this.options.groups.slice(),e=this.controls.slice(),o=[];const r=[];return t=ge(t,this.groupOrder,"id"),t=t.filter(s=>No(s.id,this.options.disable.groups)),o=t.map(s=>{const i={tag:"ul",attrs:{className:Tt,id:`${s.id}-${Tt}`},config:{label:this.groupLabel(s.label)}};if(this.options.elementOrder[s.id]){const a=this.options.elementOrder[s.id],l=Bt(a.concat(s.elementOrder));s.elementOrder=l}return e=ge(e,s.elementOrder,"meta.id"),i.content=e.filter(a=>{const{controlData:l}=this.get(a.id),c=l.meta.id||"",d=[No(c,this.options.disable.elements),l.meta.group===s.id,!r.includes(l.meta.id)];let u=!0;return u=d.every(h=>h===!0),u&&r.push(c),u}),i}),o}add(t=Object.create(null)){const{id:e,...o}=t,r=e||W(),s=Pt(o);return this.data.set(r,s),{id:r,...s}}get(t){return this.data.get(t)}formActions(){if(this.options.disable.formActions===!0)return null;const t={...g.btnTemplate({content:[g.icon("bin"),y.get("clear")],title:y.get("clearAll")}),className:["clear-form"],action:{click:r=>{ze.size?(A.confirmClearAll=new window.CustomEvent("confirmClearAll",{detail:{confirmationMessage:y.get("confirmClearAll"),clearAllAction:()=>{zt.clearAll().then(()=>{const s={src:r.target};A.formeoCleared(s)})},btnCoords:g.coords(r.target)}}),document.dispatchEvent(A.confirmClearAll)):window.alert(y.get("cannotClearFields"))}}},e={...g.btnTemplate({content:[g.icon("floppy-disk"),y.get("save")],title:y.get("save")}),className:["save-form"],action:{click:({target:r})=>{const{formData:s}=$,i={action:()=>{},coords:g.coords(r),message:"",button:r};return nt.click.btn(i),nt.save.form(s)}}};return{className:"form-actions f-btn-group",content:Object.entries({clearBtn:t,saveBtn:e}).reduce((r,[s,i])=>(this.options.disable.formActions.includes(s)||r.push(i),r),[])}}buildDOM(t){const e=this.groupElements(),o=this.formActions(),{displayType:r}=this.options.panels;this.panels=new hs({panels:e,type:"controls",displayType:r});const s=["control-groups","formeo-panels-wrap",`panel-count-${e.length}`],i=g.create({className:s,content:[this.panels.panelNav,this.panels.panelsWrap]});let a="formeo-controls";t&&(a+=" formeo-sticky");const l=g.create({className:a,content:[i,o]}),c=l.getElementsByClassName("control-group");this.dom=l,this.groups=c;const[d]=c;this.currentGroup=d,this.actions={filter:u=>{const h=u!=="",p=this.controls;let f=i.querySelector(".filtered-term");if(g.toggleElementsByStr(p,u),h){const b=y.get("controls.filteringTerm",u);l.classList.add("filtered"),f?f.textContent=b:(f=g.create({tag:"h5",className:"filtered-term",content:b}),i.insertBefore(f,i.firstChild))}else f&&(l.classList.remove("filtered"),f.remove())},addElement:this.addElement,addGroup:u=>console.log(u)};for(let u=c.length-1;u>=0;u--){const h=`formeo-controls-${c[u]}`;this.options.sortable||window.localStorage.removeItem(h),w.create(c[u],{animation:150,forceFallback:!0,fallbackClass:"control-moving",fallbackOnBody:!0,group:{name:"controls",pull:"clone",put:!1},onRemove:this.applyControlEvents,onStart:({item:p})=>{const{controlData:f}=this.get(p.id);this.options.ghostPreview&&(p.innerHTML="",p.appendChild(new gs(f).preview))},sort:this.options.sortable,store:{get:()=>{const p=window.localStorage.getItem(h);return p?p.split("|"):[]},set:p=>{const f=p.toArray();window.localStorage.setItem(h,f.join("|"))}}})}return l}};const me=new yf;class Ee extends Qn{constructor(){super(...arguments);m(this,"load",(e=Object.create(null))=>(this.empty(),typeof e=="string"&&(e=JSON.parse(e)),Object.entries(e).forEach(([o,r])=>this.add(o,r)),this.data));m(this,"get",e=>e?H(this.data,e):this.add());m(this,"add",(e,o=Object.create(null))=>{const r=e||W(),s=this.Component({...o,id:r});return this.set(r,s),this.active=s,s});m(this,"remove",e=>(Array.isArray(e)?e.forEach(o=>{this.get(o).remove()}):this.get(e).remove(),this.data));m(this,"delete",e=>(delete this.data[e],e));m(this,"clearAll",(e=!0)=>{const o=Object.values(this.data).map(r=>r.empty(e));return Promise.all(o)});m(this,"conditionMap",new Map)}set config(e){this.configVal=$t(this.configVal,Pt(e))}get config(){return this.configVal}}const wf=()=>Object.freeze({children:[]});class Cf extends Ce{constructor(t,e){super("stage",Object.assign({},wf(),t),e);const o=this.createChildWrap();this.dom=g.create({attrs:{className:[Wt,"empty"],id:this.id},children:o}),this.sortable=w.create(o,{animation:150,fallbackClass:"row-moving",forceFallback:!0,group:{name:"stage",pull:!0,put:["row","column","controls"]},sort:!0,disabled:!1,onAdd:this.onAdd.bind(this),onRemove:this.onRemove.bind(this),onStart:()=>ro.active=this,onSort:this.onSort.bind(this),draggable:`.${ut}`,handle:".item-handle"})}empty(t=!0){return new Promise(e=>{t?(this.dom.classList.add("removing-all-fields"),V.slideUp(this.dom,rt,()=>{e(super.empty(t)),this.dom.classList.remove("removing-all-fields"),V.slideDown(this.dom,rt)})):e(super.empty())})}onAdd(...t){const e=super.onAdd(...t);e&&e.name==="column"&&e.parent.autoColumnWidths()}}let Ef=class extends Ee{constructor(t){super("stages",t)}Component(t){return new Cf(t)}};const ro=new Ef,Fn="custom-column-widths",bs="column-preset",Yo="resizing-columns";function _f(n){const t=this,e=n.target.parentElement,o=e.nextSibling||e.previousSibling,r=e.closest(`.${ut}`),s=g.getStyle(r),i=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight);if(n.target.removeEventListener("pointerdown",t),t.move=({touches:a,type:l,clientX:c})=>{if(l==="touchmove"){const[_]=a;c=_.clientX}const d=t.colStartWidth+c-t.startX,u=t.sibStartWidth-c+t.startX,h=parseFloat(Pn(d,t.rowWidth)),p=parseFloat(Pn(u,t.rowWidth)),f=qe(h.toFixed(1)),b=qe(p.toFixed(1));e.dataset.colWidth=f,o.dataset.colWidth=b,e.style.width=f,o.style.width=b,t.resized=!0},t.stop=function(){window.removeEventListener("pointermove",t.move),window.removeEventListener("pointerup",t.stop),window.removeEventListener("touchmove",t.move),window.removeEventListener("touchend",t.stop),t.resized&&(Of(r,t.rowWidth),r.classList.remove(Yo),$.setAddress(`columns.${e.id}.config.width`,e.dataset.colWidth),$.setAddress(`columns.${o.id}.config.width`,o.dataset.colWidth),t.resized=!1)},n.type==="touchstart"){const[a]=n.touches;t.startX=a.clientX}else t.startX=n.clientX;r.classList.add(Yo),e.className.replace(Be,""),o.className.replace(Be,""),t.colStartWidth=e.offsetWidth||g.getStyle(e,"width"),t.sibStartWidth=o.offsetWidth||g.getStyle(o,"width"),t.rowWidth=r.offsetWidth-i,window.addEventListener("pointerup",t.stop,!1),window.addEventListener("pointermove",t.move,!1),window.addEventListener("touchend",t.stop,!1),window.addEventListener("touchmove",t.move,!1)}const ys=(n,t=n.querySelector(`.${bs}`))=>{const e=t.querySelector(`.${Fn}`);return e&&t.removeChild(e)},Of=(n,t)=>{const e=n.querySelector(`.${bs}`),o=e.querySelector(`.${Fn}`),r=n.querySelector(".children").children,s=Jn(r,c=>Pn(c.clientWidth,t).toFixed(1)),i=s.join(","),a=s.join(" | ");o&&ys(n,e);const l=g.create({tag:"option",attrs:{className:Fn,value:i},content:a});return e.add(l),e.value=i,i},Sf=()=>Object.freeze({config:{fieldset:!1,legend:"",inputGroup:!1},children:[],className:[ut]});class xf extends Ce{constructor(e){super("row",Object.assign({},Sf(),e));m(this,"autoColumnWidths",()=>{const e=this.children;if(!e.length)return;const o=parseFloat((100/e.length).toFixed(1))/1;e.forEach(r=>{r.removeClasses(Be);const s=r.dom,i=qe(o);r.set("config.width",i),s.style.width=i,s.dataset.colWidth=i;const a=setTimeout(()=>{clearTimeout(a),r.refreshFieldPanels()},pe);document.dispatchEvent(A.columnResized)}),this.updateColumnPreset()});m(this,"updateColumnPreset",()=>{const e=this.dom.querySelector(".column-preset"),o=e.parentElement,r=this.columnPresetControl(this.id),s=g.create(r);return o.replaceChild(s,e),r});m(this,"setColumnWidths",e=>{e!=="custom"&&(typeof e=="string"&&(e=e.split(",")),this.children.forEach((o,r)=>{o.setWidth(`${e[r]}%`),o.refreshFieldPanels()}))});m(this,"columnPresetControl",()=>{const e=this,o={tag:"select",attrs:{ariaLabel:y.get("defineColumnLayout"),className:"column-preset"},action:{change:({target:{value:l}})=>{l!=="custom"&&(ys(this.dom),e.setColumnWidths(l))}},options:[]},r=Mi,s=this.children,i=r.get(s.length-1)||[],a=s.map(l=>{const c=l.get("config.width")||"";return Number(c.replace("%","")).toFixed(1)}).join(",");if(i.length){const l=i.slice();!l.find(d=>d.value===a)&&l.push({value:a,label:a.replace(/,/g," | "),className:"custom-column-widths"}),o.options=l.map(d=>{const u=Object.assign({},d);return d.value===a&&(u.selected=!0),u})}return o});const o=this.createChildWrap();this.dom=g.create({tag:"li",className:[ut,"empty"],dataset:{hoverTag:y.get("row"),editingHoverTag:y.get("editing.row")},id:this.id,content:[this.getActionButtons(),this.editWindow,o]}),this.sortable=w.create(o,{animation:150,fallbackClass:"column-moving",forceFallback:!0,group:{name:"row",pull:!0,put:["row","column","controls"]},sort:!0,disabled:!1,onRemove:this.onRemove.bind(this),onEnd:this.onEnd.bind(this),onAdd:this.onAdd.bind(this),onSort:this.onSort.bind(this),filter:".resize-x-handle",draggable:`.${ot}`,handle:".item-handle"}),this.onRender()}get editWindow(){const e=this,o={className:`${this.name}-edit group-config`},r={tag:"label",content:y.get("row.settings.fieldsetWrap")},s={tag:"input",id:e.id+"-fieldset",attrs:{type:"checkbox",checked:this.get("config.fieldset"),ariaLabel:y.get("row.settings.fieldsetWrap.aria")},action:{click:({target:{checked:f}})=>{this.set("config.fieldset",!!f)}}},i={tag:"input",id:`${this.id}-inputGroup`,attrs:{type:"checkbox",checked:this.get("config.inputGroup"),ariaLabel:y.get("row.settings.inputGroup.aria")},action:{click:({target:{checked:f}})=>this.set("config.inputGroup",f)},config:{label:y.get("row.makeInputGroup"),description:y.get("row.makeInputGroupDesc")}},a={tag:"span",className:"input-group-addon",content:s},l={tag:"input",attrs:{type:"text",ariaLabel:"Legend for fieldset",value:e.get("config.legend"),placeholder:"Legend"},action:{input:({target:{value:f}})=>e.set("config.legend",f)},className:""},c={className:"input-group",content:[a,l]},d=g.formGroup([r,c]),u={tag:"label",content:y.get("defineColumnWidths"),className:"col-sm-4 form-control-label"},h={className:"col-sm-8",content:{className:"column-preset"},action:{onRender:f=>{this.updateColumnPreset()}}},p=g.formGroup([u,h],"row");return o.children=[i,g.create("hr"),d,g.create("hr"),p],o}onAdd(...e){super.onAdd(...e),this.autoColumnWidths()}onRemove(...e){super.onRemove(...e),this.autoColumnWidths()}}const Tf={actionButtons:{buttons:["handle","edit","clone","remove"],disabled:[]}};let Af=class extends Ee{constructor(t){super("rows",t),this.config={all:Tf}}Component(t){return new xf(t)}};const ws=new Af,$f=()=>Object.freeze({config:{width:"100%"},children:[],className:ot}),Ko={resizeHandle:()=>({className:"resize-x-handle",action:{pointerdown:_f},content:[g.icon("triangle-down"),g.icon("triangle-up")]}),editWindow:()=>({className:"column-edit group-config"})};class Pf extends Ce{constructor(e){super("column",Object.assign({},$f(),e));m(this,"fieldOrderClasses",()=>{const e=this.children.map(({dom:o})=>o);e.length&&(this.removeClasses(["first-field","last-field"]),e[0].classList.add("first-field"),e[e.length-1].classList.add("last-field"))});m(this,"refreshFieldPanels",()=>{this.children.forEach(e=>e.panels.nav.refresh())});m(this,"setWidth",e=>(this.dom.dataset.colWidth=e,this.dom.style.width=e,this.set("config.width",e)));const o=this,r=this.createChildWrap();this.dom=g.create({tag:"li",className:[ot,"empty"],dataset:{hoverTag:y.get("column")},action:{mouseup:s=>{const i=s.target.parentElement;i.resizing&&(i.resizing=!1,i.parentElement.classList.remove("resizing-columns"))}},id:this.id,content:[this.getActionButtons(),Ko.editWindow(),Ko.resizeHandle(),r]}),this.processConfig(this.dom),A.columnResized=new window.CustomEvent("columnResized",{detail:{column:this.dom,instance:o}}),this.sortable=w.create(r,{animation:150,fallbackClass:"field-moving",forceFallback:!0,group:{name:"column",pull:!0,put:["column","controls"]},sort:!0,disabled:!1,onEnd:this.onEnd.bind(this),onAdd:this.onAdd.bind(this),onSort:this.onSort.bind(this),onRemove:this.onRemove.bind(this),onMove:s=>{s.from!==s.to&&s.from.classList.remove("hovering-column")},draggable:`.${At}`,handle:".item-handle"})}processConfig(e){const o=k.get(this.data,"config.width");o&&(e.dataset.colWidth=o,e.style.width=o,e.style.float="left")}addChild(...e){super.addChild(...e),this.fieldOrderClasses()}}const Nf={actionButtons:{buttons:["clone","handle","remove"],disabled:[]}};let Df=class extends Ee{constructor(t){super("columns",t),this.config={all:Nf}}Component(t){return new Pf(t)}};const Cs=new Df,Mf={actionButtons:{buttons:["handle","edit","clone","remove"],disabled:[]},panels:{disabled:[],attrs:{disabled:["type"],hideDisabled:!0,locked:[]},order:["attrs","options","conditions"]},label:{disableHTML:!1}};let Lf=class extends Ee{constructor(e){super("fields",e);m(this,"get",e=>{let o=e&&H(this.data,e);if(!o){const r=me.get(e);r&&(o=this.add(null,r.controlData))}return o});this.config={all:Mf}}Component(e){return new gs(e)}};const Es=new Lf;let If=class extends Ee{constructor(t){super("externals",t)}Component(t){return new Ce("external",t)}};const Ff=new If,zt=ro,ze=ws,Ht=Cs,xn=Es,jn=me,Xo=Ff,jf={id:W()};class Rf extends Qn{constructor(e){super("components");m(this,"sessionFormData",()=>{var e;if((e=this.opts)!=null&&e.sessionStorage)return Ge.get(Er)});m(this,"load",(e,o=this.opts||Object.create(null))=>{this.empty(),typeof e=="string"&&(e=JSON.parse(e)),this.opts=o;const{stages:r={[W()]:{}},rows:s,columns:i,fields:a,id:l=W()}=Object.assign({},this.sessionFormData(),e);return this.set("id",l),this.add("stages",zt.load(r)),this.add("rows",ze.load(s)),this.add("columns",Ht.load(i)),this.add("fields",xn.load(a)),this.add("externals",Xo.load(o.external)),Object.values(this.get("stages")).forEach(c=>c.loadChildren()),this.data});this.opts=e,this.data=jf,this.disableEvents=!0,this.stages=zt,this.rows=ze,this.columns=Ht,this.fields=xn,this.controls=jn,this.externals=Xo}flatList(e=this.data,o=Object.create(null)){return Object.entries(e).reduce((r,[s,i])=>(typeof i=="object"&&Object.entries(i).forEach(([a,l])=>{r[`${s}.${a}`]=l}),r),o)}get json(){return window.JSON.stringify(this.formData)}get formData(){return{id:this.get("id"),stages:ro.getData(),rows:ws.getData(),columns:Cs.getData(),fields:Es.getData()}}set config(e){const{stages:o,rows:r,columns:s,fields:i}=e;zt.config=o,ze.config=r,Ht.config=s,xn.config=i}setAddress(e,o){const[r,s,...i]=Array.isArray(e)?e:e.split("."),a=r.replace(/s?$/,"s"),l=this[a].get(s);return l&&l.set(i,o),l}getAddress(e){if(!bt(e))return;const[o,r,...s]=Array.isArray(e)?e:e.split("."),i=o.replace(/s?$/,"s"),a=this[i].get(r);return s.length?a.get(s):a}getConditionMap(e){if(bt(e)){const o=e.split(".");return o.every(r=>!!r)&&this[o[0]].conditionMap.get(o[1])}}setConditionMap(e,o){if(bt(e)){const r=e.split(".");return r.every(s=>!!s)&&this[r[0]].conditionMap.set(r[1],o)}}removeConditionMap(e){if(bt(e)){const o=e.split(".");return o.every(r=>!!r)&&this[o[0]].conditionMap.delete(o[1])}}}const $=new Rf,Zo="no-transition",zf={debug:!1,bubbles:!0,formeoLoaded:n=>{},onAdd:()=>{},onUpdate:n=>A.opts.debug&&console.log(n),onUpdateStage:n=>A.opts.debug&&console.log(n),onUpdateRow:n=>A.opts.debug&&console.log(n),onUpdateColumn:n=>A.opts.debug&&console.log(n),onUpdateField:n=>A.opts.debug&&console.log(n),onRender:n=>A.opts.debug&&console.log(n),onSave:n=>{},confirmClearAll:n=>{window.confirm(n.confirmationMessage)&&n.clearAllAction(n)}},ne=({src:n,...t},e=on)=>{const o=new window.CustomEvent(e,{detail:t,bubbles:A.opts.debug||A.opts.bubbles});return o.data=(n||document).dispatchEvent(o),o},A={init:function(n){return this.opts={...zf,...n},this},formeoSaved:n=>ne(n,Or),formeoUpdated:n=>ne(n,on),formeoCleared:n=>ne(n,zi),formeoOnRender:n=>ne(n,Sr),formeoConditionUpdated:n=>ne(n,Hi)},Hf=Gr(()=>{A.opts.onUpdate({timeStamp:window.performance.now(),type:on,detail:$.formData})},pe);document.addEventListener(on,Hf);document.addEventListener(Ii,n=>{const{timeStamp:t,type:e,detail:o}=n;A.opts.onUpdate({timeStamp:t,type:e,detail:o})});document.addEventListener(Fi,n=>{const{timeStamp:t,type:e,detail:o}=n;A.opts.onUpdate({timeStamp:t,type:e,detail:o})});document.addEventListener(ji,n=>{const{timeStamp:t,type:e,detail:o}=n;A.opts.onUpdate({timeStamp:t,type:e,detail:o})});document.addEventListener(Ri,n=>{const{timeStamp:t,type:e,detail:o}=n;A.opts.onUpdate({timeStamp:t,type:e,detail:o})});document.addEventListener(Sr,n=>{const{timeStamp:t,type:e,detail:o}=n;A.opts.onRender({timeStamp:t,type:e,detail:o})});document.addEventListener("confirmClearAll",n=>{n={timeStamp:n.timeStamp,type:n.type,confirmationMessage:n.detail.confirmationMessage,clearAllAction:n.detail.clearAllAction,btnCoords:n.detail.btnCoords},A.opts.confirmClearAll(n)});document.addEventListener(Or,({timeStamp:n,type:t,detail:{formData:e}})=>{const o={timeStamp:n,type:t,formData:e};A.opts.onSave(o)});document.addEventListener("formeoLoaded",n=>{A.opts.formeoLoaded(n.detail.formeo)});let Tn;function Bf(){Tn=Tn||window.requestAnimationFrame(()=>{Tn=!1,Object.values(Ht.data).forEach(n=>{n.dom.classList.add(Zo),jn.dom.classList.add(Zo),jn.panels.nav.refresh(),n.refreshFieldPanels()})})}window.addEventListener("resize",Bf);class kf{constructor(){m(this,"render",t=>(t.id=`f-${t.id||W()}`,this.create(t)));m(this,"create",(t,e=!1)=>{if(!t)return;t=this.processTagName(t);const o=this;let r;const{tag:s}=t,i=["children","content"];let a;const l={attrs:{},className:[k.get(t,"config.inputWrap")||"f-field-group"],children:[],config:{}};let c=document.createElement(s);const d={string:h=>{c.innerHTML+=h},object:h=>h&&c.appendChild(o.create(h,e)),node:h=>c.appendChild(h),component:h=>c.appendChild(h.dom),array:h=>{for(const p of h)r=o.childType(p),d[r](p)},function:h=>{h=h(),r=o.childType(h),d[r](h)},undefined:()=>null,boolean:()=>null};if(i.push("tag"),t.className){const{className:h}=t;t.attrs=Object.assign({},t.attrs,{className:h}),delete t.className}if(t.options){let{options:h}=t;if(h=this.processOptions(h,t,e),this.holdsContent(c)&&s!=="button")d.array.call(this,h),delete t.content;else return k.forEach(h,p=>{l.children.push(o.create(p,e))}),t.attrs.className&&(l.className=t.attrs.className),l.config=Object.assign({},t.config),this.create(l,e);i.push("options")}if(c.tagName==="OPTION"){const h=setTimeout(()=>{c.selected=!1,clearTimeout(h)},0)}if(t.attrs&&(o.processAttrs(t,c,e),i.push("attrs")),t.config){if(t.config.label&&(t.config.label&&s!=="button"||["radio","checkbox"].includes(k.get(t,"attrs.type")))&&!e){const h=o.label(t);if(!t.config.hideLabel){const p=[...o.labelAfter(t)?[c,h]:[h,c]];l.children.push(p)}}i.push("config")}if(t.content||t.children){const h=t.content||t.children;r=o.childType(h),d[r]||console.error(`childType: ${r} is not supported`),d[r].call(this,h)}if(t.dataset){for(const h in t.dataset)t.dataset.hasOwnProperty(h)&&(c.dataset[h]=typeof t.dataset[h]=="function"?t.dataset[h]():t.dataset[h]);i.push("dataset")}t.action&&(this.actionHandler(c,t.action),i.push("action"));const u=k.subtract(i,Object.keys(t));for(a=u.length-1;a>=0;a--)c[u[a]]=t[u[a]];return l.children.length&&(c=this.create(l)),c});m(this,"onRender",(t,e)=>{t.parentElement?e(t):window.requestAnimationFrame(()=>this.onRender(t,e))});m(this,"toggleElementsByStr",(t,e)=>{const o=[],r=(s,i)=>{i?(s.style.display="block",o.push(s)):s.style.display="none"};return g.elementsContainText(t,e,r),o});m(this,"elementsContainText",(t,e,o)=>{const r=[];return dn(t,s=>{const a=s.textContent.toLowerCase().indexOf(e.toLowerCase())!==-1;o&&o(s,a),a&&r.push(s)}),r});m(this,"generateOption",({type:t="option",label:e,value:o,i:r=0,selected:s})=>({tag:t==="option"?"option":"input",attrs:{type:t,value:o||`${t}-${r}`,[t==="option"?"selected":"checked"]:s||!r},config:{label:e||y.get("labelCount",{label:y.get("option"),count:r})}}));m(this,"makeOption",([t,e],o,r)=>{const s={value:t,label:y.get(`${r}.${e}`)||e};return t===o&&(s.selected=!0),s});m(this,"requiredMark",()=>({tag:"span",className:"text-error",children:"*"}));m(this,"removeEmpty",t=>{const e=t.parentElement,o=U(t),r=e.getElementsByClassName(`formeo-${o}`);if(this.remove(t),!r.length)if(this.isStage(e))this.emptyClass(e);else return this.removeEmpty(e)});m(this,"btnTemplate",({title:t="",...e})=>({tag:"button",attrs:{type:"button",title:t},...e}));m(this,"isControls",t=>U(t)===Tt);m(this,"isStage",t=>U(t)===Wt);m(this,"isRow",t=>U(t)===ut);m(this,"isColumn",t=>U(t)===ot);m(this,"isField",t=>U(t)===At);m(this,"asComponent",t=>$[`${U(t)}s`].get(t.id));this.options=Object.create(null),this.styleSheet=(()=>{const t=document.createElement("style");return t.setAttribute("media","screen"),t.setAttribute("type","text/css"),t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet})()}set setOptions(t){this.options=$t(Object.assign({},this.options,t))}processTagName(t){let e;if(typeof t=="string"&&(e=t,t={tag:e}),t.attrs){const{tag:o,...r}=t.attrs;o&&(typeof o=="string"?e=o:e=(o.find(i=>i.selected===!0)||o[0]).value),t.attrs=r}return t.tag=e||t.tag||"div",t}actionHandler(t,e){const o={onRender:g.onRender},r=["focus","blur"],s=i=>(a,l)=>a.addEventListener(i,l,r.includes(i));return Object.entries(e).map(([i,a])=>(o[i]||s(i))(t,a))}icon(t=null){if(!t)return;const e="f-i-",o=document.getElementById(e+t);let r;const s={glyphicons:i=>`<span class="glyphicon glyphicon-${i}" aria-hidden="true"></span>`,"font-awesome":i=>{const[a,l]=i.split(" ");return`<i class="${a} fa-${l}"></i>`},fontello:i=>`<i class="${e}${i}">${i}</i>`};return o?r=`<svg class="svg-icon ${e}${t}"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#${e}${t}"></use></svg>`:g.options.iconFont?r=s[g.options.iconFont](t):r=t,r}processAttrs(t,e,o){const{attrs:r={}}=t;o||!r.name&&this.isInput(t.tag)&&e.setAttribute("name",W(t)),Object.keys(r).forEach(s=>{const i=k.safeAttrName(s);let a=r[s]||"";if(Array.isArray(a))if(typeof a[0]=="object"){const l=a.filter(c=>c.selected===!0);a=l.length?l[0].value:a[0].value}else a=a.join(" ");if(a)if(e.tagName==="OPTION"&&i==="selected"){const l=setTimeout(()=>{e.setAttribute(i,a),clearTimeout(l)},0)}else e.setAttribute(i,a)})}processOptions(t,e,o){const{action:r,attrs:s}=e,i=s.type||e.tag,a=s.id||e.id,l=(d,u)=>{const{label:h,...p}=d,f=()=>{const _={tag:"input",attrs:{name:a,type:i,value:d.value||"",id:`${a}-${u}`,...p},action:r},x={tag:"label",attrs:{for:`${a}-${u}`},config:{inputWrap:"form-check"},children:d.label},O={children:[_,x],className:[`f-${i}`]};return e.attrs.className&&(e.config.inputWrap=e.attrs.className),e.config.inline&&O.className.push(`f-${i}-inline`),d.selected&&(_.attrs.checked=!0),o&&(x.attrs.contenteditable=!0),O},b={select:()=>({tag:"option",attrs:d,children:d.label}),button:_=>{const{type:x,label:O,className:L,id:D}=_;return Object.assign({},e,{attrs:{type:x},className:L,id:D||W(),options:void 0,children:O,action:e.action})},checkbox:f,radio:f};return b[i]&&b[i](d)};return t.map(l)}holdsContent(t){return t.outerHTML.indexOf("/")!==-1}isBlockInput(t){return!this.isInput(t)&&this.holdsContent(t)}isInput(t){return typeof t!="string"&&(t=t.tagName),["input","textarea","select"].indexOf(t)!==-1}parsedHtml(t){const e=document.createElement("textarea");return e.innerHTML=t,e.textContent}labelAfter(t){const e=k.get(t,"attrs.type"),o=k.get(t,"config.labelAfter");return o!==void 0?o:e==="checkbox"||e==="radio"}label(t,e){const o=k.get(t,"attrs.required");let{config:{label:r=""}}=t;const{id:s,attrs:i}=t;typeof r=="function"&&(r=r());const a={tag:"label",attrs:{for:s||i&&i.id},className:[],children:[r,o&&this.requiredMark()],action:{}};return e&&(delete a.attrs.for,a.attrs.contenteditable=!0,a.fMap=e),a}childType(t){return t===void 0?t:[["array",e=>Array.isArray(e)],["node",e=>e instanceof window.Node||e instanceof window.HTMLElement],["component",()=>t&&t.dom],[typeof t,()=>!0]].find(e=>e[1](t))[0]}getStyle(t,e=!1){let o;return window.getComputedStyle?o=window.getComputedStyle(t,null):t.currentStyle&&(o=t.currentStyle),e?o[e]:o}getElement(t){const e={node:()=>t,object:()=>document.getElementById(t.id),string:()=>document.getElementById(t)},o=this.childType(t);return e[o]()}empty(t){for(;t.firstChild;)this.remove(t.firstChild);return t}clone(t,e){const o={},r=this,{id:s,fType:i}=t,a=Pt(o[i].get(s)),l=wt(t)+1;let c=!1;return a.id=W(),o[i].set(a.id,a),e||(e=t.parentElement,c=!0),{rows:()=>{a.columns=[];const u=zt.active,h=u.addRow(null,a.id),p=t.getElementsByClassName(ot);return u.insertBefore(h,u.childNodes[l]),k.forEach(p,f=>r.clone(f,h)),h},columns:()=>{a.fields=[];const u=r.addColumn(e,a.id);e.insertBefore(u,e.childNodes[l]);const h=t.getElementsByClassName(At);return c&&g.columnWidths(e),k.forEach(h,p=>r.clone(p,u)),u},fields:()=>{const u=r.addField(e,a.id);return e.insertBefore(u,e.childNodes[l]),u}}[i]()}remove(t){const e=U(t);return e?$.remove(`${e}s.${t.id}`):t.parentElement.removeChild(t)}removeClasses(t,e){const o={string:r=>r.classList.remove(e),array:r=>e.forEach(s=>r.classList.remove(s))};o.object=o.string,k.forEach(t,o[this.childType(e)])}addClasses(t,e){const o={string:r=>r.classList.add(e),array:r=>e.forEach(s=>r.classList.add(s))};k.forEach(t,o[this.childType(e)])}columnWidths(t){const e=t.getElementsByClassName(ot);if(!e.length)return;const o=parseFloat((100/e.length).toFixed(1))/1;this.removeClasses(e,Be),k.forEach(e,r=>{Ht.get(r.id).refreshFieldPanels();const s=qe(o);r.style.width=s,r.style.float="left",Ht.set(`${r.id}.config.width`,s),r.dataset.colWidth=s,document.dispatchEvent(A.columnResized)}),g.updateColumnPreset(t)}formGroup(t,e=""){return{className:["f-field-group",e],children:t}}coords(t){const e=t.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{pageX:e.left+e.width/2,pageY:e.top-o.top-e.height/2}}clearStage(t){t.classList.add("removing-all-fields");const e=()=>{g.empty(t),t.classList.remove("removing-all-fields"),g.emptyClass(t),V.slideDown(t,300)};V.slideUp(t,600,e)}toggleSortable(t,e){const o=U(t);if(!o)return;const r=U(t.parentElement),s=g[o].get(t.id).sortable;e||(e=!s.option("disabled")),s.option("disabled",e),r&&["rows","columns","stages"].includes(r)&&this.toggleSortable(t.parentElement,e)}emptyClass(t){const e=t.getElementsByClassName(Oi.get(t.classList.item(0)));t.classList.toggle("empty",!e.length)}insertRule(t){const e=this.styleSheet,o=e.cssRules.length;for(let r=0,s=t.length;r<s;r++){let i=1,a=t[r];const l=t[r][0];let c="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],i=0);for(let d=a.length;i<d;i++){const u=a[i],h=u[2]?" !important":"";c+=`${u[0]}:${u[1]}${h};`}return e.insertRule(`${l} { ${c} }`,o)}}}const g=new kf,Vf=`en-US = English
dir = ltr

action.add.attrs.attr = What attribute would you like to add?
action.add.attrs.value = Default Value
addOption = Add Option
allFieldsRemoved = All fields were removed.
allowSelect = Allow Select
attribute = Attribute
attributes = Attributes
attrs.class = Class
attrs.className = Class
attrs.dir = Direction
attrs.id = Id
attrs.required = Required
attrs.style = Style
attrs.title = Title
attrs.type = Type
attrs.value = Value
autocomplete = Autocomplete
button = Button
cannotBeEmpty = This field cannot be empty
checkbox = Checkbox
checkboxes = Checkboxes
class = Class
clear = Clear
clearAllMessage = Are you sure you want to clear all fields?
close = Close
column = Column
confirmClearAll = Are you sure you want to remove all fields?
content = Content
control = Control
controlGroups.nextGroup = Next Group
controlGroups.prevGroup = Previous Group
controls.form.button = Button
controls.form.checkbox-group = Checkbox Group
controls.form.input.date = Date
controls.form.input.email = Email
controls.form.input.file = File Upload
controls.form.input.hidden = Hidden Input
controls.form.input.number = Number
controls.form.input.text = Text Input
controls.form.radio-group = Radio Group
controls.form.select = Select
controls.form.textarea = TextArea
controls.groups.form = Form Fields
controls.groups.html = HTML Elements
controls.groups.layout = Layout
controls.html.divider = Divider
controls.html.header = Header
controls.html.paragraph = Paragraph
controls.layout.column = Column
controls.layout.row = Row
controls.filteringTerm = Filtering "{term}"
copy = Copy To Clipboard
danger = Danger
description = Help Text
descriptionField = Description
defineColumnLayout = Define a column layout
defineColumnWidths = Define column widths
editing.row = Editing Row
editorTitle = Form Elements
field = Field
fieldNonEditable = This field cannot be edited.
fieldRemoveWarning = Are you sure you want to remove this field?
fileUpload = File Upload
formUpdated = Form Updated
getStarted = Drag a field from the right to get started.
group = Group
grouped = Grouped
hidden = Hidden Input
hide = Edit
htmlElements = HTML Elements
if = If
info = Info
input.date = Date
input.text = Text
label = Label
labelCount = {label} {count}
labelEmpty = Field Label cannot be empty
layout = Layout
limitRole = Limit access to one or more of the following roles:
mandatory = Mandatory
maxlength = Max Length
meta.group = Group
meta.icon = Ico
meta.label = Label
minOptionMessage = This field requires a minimum of 2 options
name = Name
no = No
number = Number
off = Off
on = On
option = Option
optional = optional
optionEmpty = Option value required
optionLabel = Option {count}
options = Options
order = Order
panel.label.attrs = Attributes
panel.label.conditions = Conditions
panel.label.config = Configuration
panel.label.meta = Meta
panel.label.options = Options
panelEditButtons.attrs = + Attribute
panelEditButtons.options = + Option
panelEditButtons.conditions = + Condition
placeholder = Placeholder
placeholder.className = space separated classes
placeholder.email = Enter you email
placeholder.label = Label
placeholder.password = Enter your password
placeholder.placeholder = Placeholder
placeholder.text = Enter some Text
placeholder.textarea = Enter a lot of text
placeholder.value = Value
preview = Preview
primary = Primary
remove = Remove
removeType = Remove {type}
removeMessage = Remove Element
required = Required
reset = Reset
richText = Rich Text Editor
roles = Access
row = Row
row.makeInputGroup = Make this row an input group.
row.makeInputGroupDesc = Input Groups enable users to add sets of inputs at a time.
row.settings.fieldsetWrap = Wrap row in a &lt;fieldset&gt; tag
row.settings.fieldsetWrap.aria = Wrap Row in Fieldset
cannotClearFields = There are no fields to clear
save = Save
secondary = Secondary
select = Select
selectColor = Select Color
selectionsMessage = Allow Multiple Selections
selectOptions = Options
separator = Separator
settings = Settings
size = Size
sizes = Sizes
sizes.lg = Large
sizes.m = Default
sizes.sm = Small
sizes.xs = Extra Small
style = Style
styles = Styles
styles.btn = Button Style
styles.btn.danger = Danger
styles.btn.default = Default
styles.btn.info = Info
styles.btn.primary = Primary
styles.btn.success = Success
styles.btn.warning = Warning
subtype = Type
success = Success
text = Text Field
then = Then
toggle = Toggle
ungrouped = Un-Grouped
warning = Warning
yes = Yes
and = and
or = or
field.property.value = value
field.property.label = label
field.property.valid = valid
field.property.invalid = not valid
field.property.isVisible = is visible
field.property.isNotVisible = is not visible
newOptionLabel = New {type}
operator.visible = visible
operator.notVisible = not visible
operator.equals = equals
operator.notEquals = not equal
operator.contains = contains
operator.notContains = not contains
condition.target.placeholder = target
if.condition.target.placeholder = target / value
if.condition.source.placeholder = source
then.condition.target.placeholder = target
condition.value.placeholder = value
attributeNotPermitted = Attribute "{attribute}" is not permitted, please choose another.
`;y.addLanguage("en-US",Vf);const Wf={get editor(){return{stickyControls:!1,allowEdit:!0,dataType:"json",debug:!1,sessionStorage:!1,editorContainer:null,external:{},svgSprite:null,iconFont:null,config:{},events:{},actions:{},controls:{},polyfills:Xr(),i18n:{location:"https://draggable.github.io/formeo/assets/lang/"}}}},qf='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol id="f-i-autocomplete" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M6,5h1v1H6V5z M4,4H3v1h1V4z M6,4H5v1h1V4z M2,5v1h1V5H2z M3,7h1V6H3V7z M5,7h1V6H5V7z M4,5v1h1V5H4z M2,14h1v-1H2V14z M4,14h1v-1H4V14z M6,14h1v-1H6V14z M9,13H8v1h1V13z M16,3.5v4C16,8.3,15.3,9,14.5,9H14v3v3c0,0.6-0.4,1-1,1H1c-0.6,0-1-0.4-1-1V3.5 C0,2.7,0.7,2,1.5,2h3H8V1.5V1H7H6V0.5V0h2.5H11v0.5V1h-1H9v0.5V2h3h2.5C15.3,2,16,2.7,16,3.5z M13,12H7H1v3h12V12z M3,11v-1H2v1H3z M5,11v-1H4v1H5z M15,3.5C15,3.2,14.8,3,14.5,3H9v2.5V8H8.5H8V7.5V7H7V6h1V5.5V5H7V4h1V3.5V3H1.5C1.2,3,1,3.2,1,3.5v4 C1,7.8,1.2,8,1.5,8H8v1H6v0.5V10h2.5H11V9.5V9H9V8h5.5C14.8,8,15,7.8,15,7.5V3.5z"/></symbol><symbol viewBox="0 0 32 32" id="f-i-bin" xmlns="http://www.w3.org/2000/svg"><path d="M4 10v20c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-20h-22zM10 28h-2v-14h2v14zM14 28h-2v-14h2v14zM18 28h-2v-14h2v14zM22 28h-2v-14h2v14zM26.5 4h-6.5v-2.5c0-.825-.675-1.5-1.5-1.5h-7c-.825 0-1.5.675-1.5 1.5v2.5h-6.5c-.825 0-1.5.675-1.5 1.5v2.5h26v-2.5c0-.825-.675-1.5-1.5-1.5zM18 4h-6v-1.975h6v1.975z"/></symbol><symbol id="f-i-button" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><metadata id="acmetadata8"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><path id="acrect4140" d="M 0.4765625,4 A 0.47706934,0.47706934 0 0 0 0,4.4765625 L 0,11.523438 A 0.47706934,0.47706934 0 0 0 0.4765625,12 L 15.523438,12 A 0.47706934,0.47706934 0 0 0 16,11.523438 L 16,4.4765625 A 0.47706934,0.47706934 0 0 0 15.523438,4 L 0.4765625,4 Z m 0.4765625,0.953125 14.09375,0 0,6.09375 -14.09375,0 0,-6.09375 z"/><g id="aclayer1"><g id="actext4203"><g id="acg4212" transform="translate(0.10112835,0.1001358)"><path id="acpath4208" d="m 6.0690374,6.4093857 q -0.5371093,0 -0.8544922,0.4003906 -0.3149414,0.4003906 -0.3149414,1.0913086 0,0.6884766 0.3149414,1.0888672 0.3173829,0.4003906 0.8544922,0.4003906 0.5371094,0 0.8496094,-0.4003906 0.3149414,-0.4003906 0.3149414,-1.0888672 0,-0.690918 -0.3149414,-1.0913086 -0.3125,-0.4003906 -0.8496094,-0.4003906 z m 0,-0.4003906 q 0.7666016,0 1.225586,0.5151367 0.4589843,0.5126953 0.4589843,1.3769531 0,0.8618164 -0.4589843,1.3769531 -0.4589844,0.5126953 -1.225586,0.5126953 -0.7690429,0 -1.2304687,-0.5126953 -0.4589844,-0.5126953 -0.4589844,-1.3769531 0,-0.8642578 0.4589844,-1.3769531 0.4614258,-0.5151367 1.2304687,-0.5151367 z"/><path id="acpath4210" d="m 8.5250921,6.074913 0.4931641,0 0,1.5405274 1.6357418,-1.5405274 0.634766,0 -1.809082,1.6992188 1.938477,1.9458008 -0.649415,0 -1.7504878,-1.7553711 0,1.7553711 -0.4931641,0 0,-3.6450196 z"/></g></g></g></symbol><symbol viewBox="0 0 32 32" id="f-i-calendar" xmlns="http://www.w3.org/2000/svg"><path d="M12.048 16.961c-0.178 0.257-0.395 0.901-0.652 1.059-0.257 0.157-0.547 0.267-0.869 0.328-0.323 0.062-0.657 0.089-1.002 0.079v1.527h2.467v6.046h1.991v-9.996h-1.584c-0.056 0.381-0.173 0.7-0.351 0.957zM23 8h2c0.553 0 1-0.448 1-1v-6c0-0.552-0.447-1-1-1h-2c-0.553 0-1 0.448-1 1v6c0 0.552 0.447 1 1 1zM7 8h2c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1h-2c-0.552 0-1 0.448-1 1v6c0 0.552 0.448 1 1 1zM30 4h-2v5c0 0.552-0.447 1-1 1h-6c-0.553 0-1-0.448-1-1v-5h-8v5c0 0.552-0.448 1-1 1h-6c-0.552 0-1-0.448-1-1v-5h-2c-1.104 0-2 0.896-2 2v24c0 1.104 0.896 2 2 2h28c1.104 0 2-0.896 2-2v-24c0-1.104-0.896-2-2-2zM30 29c0 0.553-0.447 1-1 1h-26c-0.552 0-1-0.447-1-1v-16c0-0.552 0.448-1 1-1h26c0.553 0 1 0.448 1 1v16zM15.985 17.982h4.968c-0.936 1.152-1.689 2.325-2.265 3.705-0.575 1.381-0.638 2.818-0.749 4.312h2.131c0.009-0.666-0.195-1.385-0.051-2.156 0.146-0.771 0.352-1.532 0.617-2.285 0.267-0.752 0.598-1.461 0.996-2.127 0.396-0.667 0.853-1.229 1.367-1.686v-1.742h-7.015v1.979z"/></symbol><symbol id="f-i-checkbox" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M13.5,5v8c0,0.8-0.7,1.5-1.5,1.5H3c-0.8,0-1.5-0.7-1.5-1.5V4c0-0.8,0.7-1.5,1.5-1.5h9c0.7,0,1.3,0.5,1.5,1.2l2.4-1.4L13.5,5 z M12.5,6.2L7.7,12L2.8,5.5l4.9,1.6l4.8-2.9V4c0-0.3-0.2-0.5-0.5-0.5H3C2.7,3.5,2.5,3.7,2.5,4v9c0,0.3,0.2,0.5,0.5,0.5h9 c0.3,0,0.5-0.2,0.5-0.5V6.2z"/></symbol><symbol id="f-i-checkbox-group" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M0,1h16V0H0V1z M0,3h16V2H0V3z M6,5v1h9V5H6z M15,14v-1H6v1H15z M6,10h9V9H6V10z M4,12l-2.5,1.5L0,13l1.5,2L4,12z M4,8 L1.5,9.5L0,9l1.5,2L4,8z M4,4L1.5,5.5L0,5l1.5,2L4,4z"/></symbol><symbol xml:space="preserve" viewBox="0 0 16 16" id="f-i-columns" xmlns="http://www.w3.org/2000/svg"><metadata id="agmetadata4318"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><path id="agrect4860-3-5" d="M 16,0.5 A 0.50004997,0.50004997 0 0 0 15.5,0 l -5,0 -5,0 -5,0 A 0.50004997,0.50004997 0 0 0 0,0.5 l 0,15 A 0.50004997,0.50004997 0 0 0 0.5,16 l 5,0 5,0 5,0 A 0.50004997,0.50004997 0 0 0 16,15.5 l 0,-15 z M 15,1 15,15 11,15 11,1 15,1 Z M 10,1 10,15 6,15 6,1 10,1 Z M 5,1 5,15 1,15 1,1 5,1 Z"/></symbol><symbol viewBox="0 0 32 32" id="f-i-copy" xmlns="http://www.w3.org/2000/svg"><path d="M20 8v-8h-14l-6 6v18h12v8h20v-24h-12zM6 2.828v3.172h-3.172l3.172-3.172zM2 22v-14h6v-6h10v6l-6 6v8h-10zM18 10.828v3.172h-3.172l3.172-3.172zM30 30h-16v-14h6v-6h10v20z"/></symbol><symbol id="f-i-divider" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><metadata id="aimetadata10"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><rect y="7" x="0" height="1" width="15" id="airect4182"/></symbol><symbol viewBox="0 0 28 32" id="f-i-edit" xmlns="http://www.w3.org/2000/svg"><path d="M22 2l-4 4 6 6 4-4-6-6zM0 24l0.021 6.018 5.979-0.018 16-16-6-6-16 16zM6 28h-4v-4h2v2h2v2z"/></symbol><symbol viewBox="0 0 32 32" id="f-i-floppy-disk" xmlns="http://www.w3.org/2000/svg"><path d="M28 0h-28v32h32v-28l-4-4zM16 4h4v8h-4v-8zM28 28h-24v-24h2v10h18v-10h2.343l1.657 1.657v22.343z"/></symbol><symbol xml:space="preserve" viewBox="0 0 16 16" id="f-i-handle" xmlns="http://www.w3.org/2000/svg"><metadata id="almetadata8"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><g transform="translate(0,-2)" id="alg4220"><rect id="alrect4191" width="2" height="2" x="2" y="7"/><rect id="alrect4191-2" width="2" height="2" x="7" y="7"/><rect id="alrect4191-4" width="2" height="2" x="12" y="7"/></g><g transform="translate(0,2)" id="alg4220-6"><rect id="alrect4191-40" width="2" height="2" x="2" y="7"/><rect id="alrect4191-2-3" width="2" height="2" x="7" y="7"/><rect id="alrect4191-4-9" width="2" height="2" x="12" y="7"/></g></symbol><symbol viewBox="0 0 448 512" id="f-i-hash" xmlns="http://www.w3.org/2000/svg"><g id="amicomoon-ignore"/><path d="M448 192v-64h-80.064l16-128h-64l-16 128h-127.968l16-128h-64l-16 128h-111.968v64h103.968l-15.968 128h-88v64h80l-16 128h64l16-128h127.968l-16 128h64.032l16-128h112v-64h-104l15.936-128h88.064zM279.968 320h-127.968l15.968-128h127.968l-15.968 128z"/></symbol><symbol viewBox="0 0 28 28" id="f-i-header" xmlns="http://www.w3.org/2000/svg"><path d="M26.281 26q-0.688 0-2.070-0.055t-2.086-0.055q-0.688 0-2.063 0.055t-2.063 0.055q-0.375 0-0.578-0.32t-0.203-0.711q0-0.484 0.266-0.719t0.609-0.266 0.797-0.109 0.703-0.234q0.516-0.328 0.516-2.188l-0.016-6.109q0-0.328-0.016-0.484-0.203-0.063-0.781-0.063h-10.547q-0.594 0-0.797 0.063-0.016 0.156-0.016 0.484l-0.016 5.797q0 2.219 0.578 2.562 0.25 0.156 0.75 0.203t0.891 0.055 0.703 0.234 0.313 0.711q0 0.406-0.195 0.75t-0.57 0.344q-0.734 0-2.18-0.055t-2.164-0.055q-0.672 0-2 0.055t-1.984 0.055q-0.359 0-0.555-0.328t-0.195-0.703q0-0.469 0.242-0.703t0.562-0.273 0.742-0.117 0.656-0.234q0.516-0.359 0.516-2.234l-0.016-0.891v-12.703q0-0.047 0.008-0.406t0-0.57-0.023-0.602-0.055-0.656-0.102-0.57-0.172-0.492-0.25-0.281q-0.234-0.156-0.703-0.187t-0.828-0.031-0.641-0.219-0.281-0.703q0-0.406 0.187-0.75t0.562-0.344q0.719 0 2.164 0.055t2.164 0.055q0.656 0 1.977-0.055t1.977-0.055q0.391 0 0.586 0.344t0.195 0.75q0 0.469-0.266 0.68t-0.602 0.227-0.773 0.063-0.672 0.203q-0.547 0.328-0.547 2.5l0.016 5q0 0.328 0.016 0.5 0.203 0.047 0.609 0.047h10.922q0.391 0 0.594-0.047 0.016-0.172 0.016-0.5l0.016-5q0-2.172-0.547-2.5-0.281-0.172-0.914-0.195t-1.031-0.203-0.398-0.773q0-0.406 0.195-0.75t0.586-0.344q0.688 0 2.063 0.055t2.063 0.055q0.672 0 2.016-0.055t2.016-0.055q0.391 0 0.586 0.344t0.195 0.75q0 0.469-0.273 0.688t-0.625 0.227-0.805 0.047-0.688 0.195q-0.547 0.359-0.547 2.516l0.016 14.734q0 1.859 0.531 2.188 0.25 0.156 0.719 0.211t0.836 0.070 0.648 0.242 0.281 0.695q0 0.406-0.187 0.75t-0.562 0.344z"/></symbol><symbol xml:space="preserve" viewBox="0 0 16 16" id="f-i-hidden" xmlns="http://www.w3.org/2000/svg"><metadata id="aometadata8"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><path id="aopath5816" d="M 1,5 2,5 2,4 1,4 Z"/><path id="aopath5814" d="M 3,5 4,5 4,4 3,4 Z"/><path id="aopath5812" d="M 5,5 6,5 6,4 5,4 Z"/><path id="aopath5810" d="M 7,5 8,5 8,4 7,4 Z"/><path id="aopath5808" d="M 9,5 10,5 10,4 9,4 Z"/><path id="aopath5806" d="m 11,5 1,0 0,-1 -1,0 z"/><path id="aopath5804" d="m 13,5 1,0 0,-1 -1,0 z"/><path id="aopath5800" d="M 0,6 1,6 1,5 0,5 Z"/><path id="aopath5798" d="m 15,6.9997352 1,0 0,-1 -1,0 z"/><path id="aopath5796" d="M 0,8 1,8 1,7 0,7 Z"/><path id="aopath5794" d="m 15,8.9997352 1,0 0,-1 -1,0 z"/><path id="aopath5792" d="m 0,10 1,0 0,-1.0000001 -1,0 z"/><path id="aopath5790" d="m 15,10.999735 1,0 0,-0.9999998 -1,0 z"/><path id="aopath5786" d="m 2,12 1,0 0,-1 -1,0 z"/><path id="aopath5784" d="m 4,12 1,0 0,-1 -1,0 z"/><path id="aopath5782" d="m 6,12 1,0 0,-1 -1,0 z"/><path id="aopath5780" d="m 8,12 1,0 0,-1 -1,0 z"/><path id="aopath5778" d="m 10,12 1,0 0,-1 -1,0 z"/><path id="aopath5776" d="m 12,12 1,0 0,-1 -1,0 z"/><path id="aorect5768" d="m 14,12 1,0 0,-1 -1,0 z"/><path d="m 15,5 1,0 0,-1 -1,0 z" id="aopath5827"/><path d="m 0,12 1,0 0,-1 -1,0 z" id="aopath5829"/></symbol><symbol viewBox="0 0 384 512" id="f-i-menu" xmlns="http://www.w3.org/2000/svg"><g id="apicomoon-ignore"/><path d="M0 96v64h384v-64h-384zM0 288h384v-64h-384v64zM0 416h384v-64h-384v64z"/></symbol><symbol viewBox="0 0 16 32" id="f-i-minus" xmlns="http://www.w3.org/2000/svg"><path d="M0 14v4h16v-4h-16z"/></symbol><symbol viewBox="0 0 512 512" id="f-i-move" xmlns="http://www.w3.org/2000/svg"><path d="M287.744 94.736v129.008h128v-64l96.256 96.256-96.256 96.24v-65.488h-128v129.008h64.496l-96.24 96.24-96.256-96.24h64v-129.008h-128v64.992l-95.744-95.744 95.744-95.744v63.488h128v-129.008h-62.496l94.752-94.736 94.752 94.736h-63.008z"/></symbol><symbol viewBox="0 0 512 512" id="f-i-move-vertical" xmlns="http://www.w3.org/2000/svg"><metadata id="armetadata10"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="3440" inkscape:window-height="1416" id="arnamedview6" showgrid="false" inkscape:zoom="1.84375" inkscape:cx="421.4312" inkscape:cy="218.56484" inkscape:window-x="0" inkscape:window-y="24" inkscape:window-maximized="1" inkscape:current-layer="svg2" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"/><path d="m 287.744,94.736 0,321.024 64.496,0 L 256,512 l -96.256,-96.24 64,0 0,-321.024 -62.496,0 L 256,0 350.752,94.736 Z" id="arpath4" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" inkscape:connector-curvature="0" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" sodipodi:nodetypes="ccccccccccc"/></symbol><symbol viewBox="0 0 20 28" id="f-i-paragraph" xmlns="http://www.w3.org/2000/svg"><path d="M19.969 2.953v1.141q0 0.453-0.289 0.953t-0.664 0.5q-0.781 0-0.844 0.016-0.406 0.094-0.5 0.484-0.047 0.172-0.047 1v18q0 0.391-0.281 0.672t-0.672 0.281h-1.687q-0.391 0-0.672-0.281t-0.281-0.672v-19.031h-2.234v19.031q0 0.391-0.273 0.672t-0.68 0.281h-1.687q-0.406 0-0.68-0.281t-0.273-0.672v-7.75q-2.297-0.187-3.828-0.922-1.969-0.906-3-2.797-1-1.828-1-4.047 0-2.594 1.375-4.469 1.375-1.844 3.266-2.484 1.734-0.578 6.516-0.578h7.484q0.391 0 0.672 0.281t0.281 0.672z"/></symbol><symbol id="f-i-phone-receiver" viewBox="0 0 578.106 578.106" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><g><g><path d="M577.83,456.128c1.225,9.385-1.635,17.545-8.568,24.48l-81.396,80.781 c-3.672,4.08-8.465,7.551-14.381,10.404c-5.916,2.857-11.729,4.693-17.439,5.508c-0.408,0-1.635,0.105-3.676,0.309 c-2.037,0.203-4.689,0.307-7.953,0.307c-7.754,0-20.301-1.326-37.641-3.979s-38.555-9.182-63.645-19.584 c-25.096-10.404-53.553-26.012-85.376-46.818c-31.823-20.805-65.688-49.367-101.592-85.68 c-28.56-28.152-52.224-55.08-70.992-80.783c-18.768-25.705-33.864-49.471-45.288-71.299 c-11.425-21.828-19.993-41.616-25.705-59.364S4.59,177.362,2.55,164.51s-2.856-22.95-2.448-30.294 c0.408-7.344,0.612-11.424,0.612-12.24c0.816-5.712,2.652-11.526,5.508-17.442s6.324-10.71,10.404-14.382L98.022,8.756 c5.712-5.712,12.24-8.568,19.584-8.568c5.304,0,9.996,1.53,14.076,4.59s7.548,6.834,10.404,11.322l65.484,124.236 c3.672,6.528,4.692,13.668,3.06,21.42c-1.632,7.752-5.1,14.28-10.404,19.584l-29.988,29.988c-0.816,0.816-1.53,2.142-2.142,3.978 s-0.918,3.366-0.918,4.59c1.632,8.568,5.304,18.36,11.016,29.376c4.896,9.792,12.444,21.726,22.644,35.802 s24.684,30.293,43.452,48.653c18.36,18.77,34.68,33.354,48.96,43.76c14.277,10.4,26.215,18.053,35.803,22.949 c9.588,4.896,16.932,7.854,22.031,8.871l7.648,1.531c0.816,0,2.145-0.307,3.979-0.918c1.836-0.613,3.162-1.326,3.979-2.143 l34.883-35.496c7.348-6.527,15.912-9.791,25.705-9.791c6.938,0,12.443,1.223,16.523,3.672h0.611l118.115,69.768 C571.098,441.238,576.197,447.968,577.83,456.128z"/></g></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></symbol><symbol id="f-i-radio-group" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M0,1h16V0H0V1z M0,3h16V2H0V3z M5,6h10V5H5V6z M15,9H5v1h10V9z M15,14v-1H5v1H15z M1.5,7C0.7,7,0,6.3,0,5.5S0.7,4,1.5,4 S3,4.7,3,5.5S2.3,7,1.5,7z M1.5,5C1.2,5,1,5.2,1,5.5S1.2,6,1.5,6S2,5.8,2,5.5S1.8,5,1.5,5z M1.5,11.1C0.7,11.1,0,10.4,0,9.6 s0.7-1.5,1.5-1.5S3,8.7,3,9.6S2.3,11.1,1.5,11.1z M1.5,9.1C1.2,9.1,1,9.3,1,9.6s0.2,0.5,0.5,0.5S2,9.8,2,9.6S1.8,9.1,1.5,9.1z M1.5,15C0.7,15,0,14.3,0,13.5S0.7,12,1.5,12S3,12.7,3,13.5S2.3,15,1.5,15z M1.5,13C1.2,13,1,13.2,1,13.5S1.2,14,1.5,14 S2,13.8,2,13.5S1.8,13,1.5,13z"/></symbol><symbol viewBox="0 0 512 512" id="f-i-remove" xmlns="http://www.w3.org/2000/svg"><metadata id="awmetadata8"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><g id="awlayer1"><g transform="translate(170.37199,5.9577983)" id="awg4172"><path id="awrect4155" d="m -159.9194,-18.102955 87.322034,0 0,510.915285 -87.322034,0 z" transform="matrix(0.70710678,-0.70710678,0.70710678,0.70710678,0,0)"/><path id="awrect4155-5" d="m 193.69366,-139.19925 87.32204,0 0,510.91528 -87.32204,0 z" transform="matrix(0.70710678,0.70710678,-0.70710678,0.70710678,0,0)"/></g></g></symbol><symbol id="f-i-rich-text" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M15,1H1C0.4,1,0,1.4,0,2v12c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1V2C16,1.4,15.6,1,15,1z M1,3.1h0.8v0.3H1V3.1z M1,3.6h0.8 v0.3H1V3.6z M15,14H1V5.1h14V14z M15,4.9H1V4.6h14V4.9z M15,4.4H1V4.1h0.8v0.2h1.5V4.1h1.3v0.2H6V4.1h1.3v0.2h1.5V4.1H10v0.2h1.5 V4.1h1.3v0.2h1.5V4.1H15V4.4z M4.5,3.6v0.3H3.3V3.6H4.5z M3.3,3.4V3.1h1.3v0.3H3.3z M7.3,3.6v0.3H6V3.6H7.3z M6,3.4V3.1h1.3v0.3H6z M10,3.6v0.3H8.8V3.6H10z M8.8,3.4V3.1H10v0.3H8.8z M12.8,3.6v0.3h-1.3V3.6H12.8z M11.5,3.4V3.1h1.3v0.3H11.5z M15,3.9h-0.8V3.6H15 V3.9z M15,3.4h-0.8V3.1H15V3.4z M15,2.9h-0.8V2.8h-1.5v0.2h-1.3V2.8H10v0.2H8.8V2.8H7.3v0.2H6V2.8H4.5v0.2H3.3V2.8H1.8v0.2H1V2.6h14 V2.9z M15,2.4H1V2.1h14V2.4z M3,12v-1h10v1H3z M13,10H3V9h10V10z M11,8H3V7h8V8z"/></symbol><symbol xml:space="preserve" viewBox="0 0 16 16" id="f-i-rows" xmlns="http://www.w3.org/2000/svg"><metadata id="aymetadata4318"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><cc:Work rdf:about="" xmlns:cc="http://creativecommons.org/ns#"><dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" xmlns:dc="http://purl.org/dc/elements/1.1/"/><dc:title xmlns:dc="http://purl.org/dc/elements/1.1/"/></cc:Work></rdf:RDF></metadata><g transform="matrix(0,1,-1,0,3.0984025,11.835155)" id="ayg7209"><path id="ayrect4860-3-5" d="m 4.1640625,-12.402344 a 0.50004997,0.50004997 0 0 0 -0.5,-0.5 l -5,0 -5,0 -5.0000005,0 a 0.50004997,0.50004997 0 0 0 -0.5,0.5 l 0,15.0000002 a 0.50004997,0.50004997 0 0 0 0.5,0.5 l 4.9648442,0 a 0.50004997,0.50004997 0 0 0 0.035156,0 l 4.9648437,0 a 0.50004997,0.50004997 0 0 0 0.035156,0 l 5,0 a 0.50004997,0.50004997 0 0 0 0.5,-0.5 l 0,-15.0000002 z m -1,0.5 0,14.0000002 -4,0 0,-14.0000002 4,0 z m -5,0 0,14.0000002 -4,0 0,-14.0000002 4,0 z m -5,0 0,14.0000002 -4.0000005,0 0,-14.0000002 4.0000005,0 z"/></g></symbol><symbol id="f-i-select" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path id="azXMLID_1_" d="M0,0v14h0c0,0.6,0.4,1,1,1h10c0.6,0,1-0.4,1-1h0V5h4V0H0z M1,1h10v3H1V1z M1,7h10v3H1V7z M1,14v-3h10v3H1z M15,4h-3V1h3V4z M2,2h1v1H2V2z M2,12h1v1H2V12z M4,12h1v1H4V12z M6,12h1v1H6V12z M9,12v1H8v-1H9z M2,8h1v1H2V8z M4,8h1v1H4V8z M6,8 h1v1H6V8z M13.5,3.1l-1-1.1h1.9L13.5,3.1z M2,6V5h1v1H2L2,6z M4,6V5h1v1H4L4,6z"/></symbol><symbol viewBox="0 0 448 512" id="f-i-settings" xmlns="http://www.w3.org/2000/svg"><g id="baicomoon-ignore"/><path d="M223.969 175c-44.703 0-80.969 36.266-80.969 81 0 44.688 36.266 81.031 80.969 81.031 44.719 0 80.719-36.344 80.719-81.031-0-44.734-36-81-80.719-81zM386.313 302.531l-14.594 35.156 29.469 57.875-36.094 36.094-59.218-27.969-35.156 14.438-17.844 54.625-2.281 7.25h-51.016l-22.078-61.656-35.156-14.5-57.952 29.344-36.078-36.063 27.938-59.25-14.484-35.125-61.767-20.156v-50.984l61.703-22.109 14.485-35.094-25.953-51.234-3.422-6.719 36.031-36.031 59.297 27.922 35.109-14.516 17.828-54.594 2.297-7.234h51l22.094 61.734 35.063 14.516 58.031-29.406 36.063 36.031-27.938 59.203 14.438 35.172 61.875 20.125v50.969l-61.688 22.187z"/></symbol><symbol id="f-i-text-input" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path id="bbXMLID_10_" d="M15,4H4.5V3H6V2H4.5h-1H2v1h1.5v1H1C0.4,4,0,4.5,0,5v6c0,0.6,0.4,1,1,1h2.5v1H2v1h4v-1H4.5v-1H15 c0.6,0,1-0.4,1-1V5C16,4.5,15.6,4,15,4z M1,11V5h2.5v6H1z M15,11H4.5V5H15V11z"/></symbol><symbol id="f-i-textarea" viewBox="0 0 16 16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path id="bcXMLID_1_" d="M3,11v-1h8v1H3L3,11z M3,7h10V6H3V7L3,7z M3,8v1h10V8H3L3,8z M13,4H3v1h10V4L13,4z M16,14V2c0-0.6-0.4-1-1-1 H1C0.4,1,0,1.4,0,2v12c0,0.6,0.4,1,1,1h14C15.6,15,16,14.6,16,14z M15,2v12H1V2H15z"/></symbol><symbol viewBox="0 0 24 32" id="f-i-triangle-down" xmlns="http://www.w3.org/2000/svg"><path d="M0 12l11.992 11.992 11.992-11.992h-23.984z"/></symbol><symbol viewBox="0 0 12 32" id="f-i-triangle-left" xmlns="http://www.w3.org/2000/svg"><path d="M0 15.996l11.992 11.992v-23.984l-11.992 11.992z"/></symbol><symbol viewBox="0 0 12 32" id="f-i-triangle-right" xmlns="http://www.w3.org/2000/svg"><path d="M0.002 4.008l11.992 11.992-11.992 11.992v-23.984z"/></symbol><symbol viewBox="0 0 24 32" id="f-i-triangle-up" xmlns="http://www.w3.org/2000/svg"><path d="M11.992 8l-11.992 11.992h23.984l-11.992-11.992z"/></symbol><symbol viewBox="0 0 512 512" id="f-i-upload" xmlns="http://www.w3.org/2000/svg"><g id="bhicomoon-ignore"/><path d="M240 352h-240v128h480v-128h-240zM448 416h-64v-32h64v32zM112 160l128-128 128 128h-80v160h-96v-160z"/></symbol></svg>';let _s=class{constructor({formData:t,...e},o){const r=this,s=$t(Wf.editor,e),{actions:i,events:a,debug:l,config:c,editorContainer:d,...u}=s;d&&(this.editorContainer=typeof d=="string"?document.querySelector(d):d),this.opts=u,g.setOptions=u,$.config=c,this.userFormData=o||t,this.Components=$,this.dom=g,A.init({debug:l,...a}),nt.init({debug:l,sessionStorage:u.sessionStorage,...i}),r.loadResources().then(()=>{u.allowEdit&&(r.edit=r.init.bind(r),r.init())})}get formData(){return this.Components.formData}set formData(t={}){this.load({...this.userFormData,...t},this.opts)}get json(){return this.Components.json}loadResources(){const t=[];return this.opts.polyfills&&Kp(this.opts.polyfills),this.opts.style&&t.push(vs(this.opts.style)),this.opts.svgSprite?t.push(Go(this.opts.svgSprite,On,()=>Go(_i,On))):t.push(On(qf)),t.push(y.init({...this.opts.i18n,locale:Ge.get(fo)})),Promise.all(t)}init(){const t=this;this.load(this.userFormData,t.opts),this.controls=me.init(t.opts.controls,t.opts.stickyControls),t.formId=$.get("id"),this.i18n={setLang:e=>{Ge.set(fo,e),y.setCurrent(e).then(()=>{this.controls=me.init(t.opts.controls),t.render()},console.error)}},t.render()}load(t=this.userFormData,e=this.opts){return this.Components.load(t,e)}render(){const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.11/tinymce.min.js",document.head.appendChild(t),this.stages=Object.values($.get("stages")),this.opts.controlOnLeft&&this.stages.forEach(r=>{r.dom.style.order=1});const e={attrs:{className:"formeo formeo-editor",id:this.formId},content:[this.stages.map(({dom:r})=>r)]};y.current.dir&&(e.attrs.dir=y.current.dir,g.dir=y.current.dir),this.editor=g.create(e),(this.controls.container||this.editor).appendChild(this.controls.dom),this.editorContainer&&(g.empty(this.editorContainer),this.editorContainer.appendChild(this.editor)),A.formeoLoaded=new window.CustomEvent("formeoLoaded",{detail:{formeo:this}}),document.dispatchEvent(A.formeoLoaded)}};var Gf="__lodash_hash_undefined__";function Uf(n){return this.__data__.set(n,Gf),this}var Yf=Uf;function Kf(n){return this.__data__.has(n)}var Xf=Kf,Zf=$r,Jf=Yf,Qf=Xf;function tn(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Zf;++t<e;)this.add(n[t])}tn.prototype.add=tn.prototype.push=Jf;tn.prototype.has=Qf;var tg=tn;function eg(n,t){for(var e=-1,o=n==null?0:n.length;++e<o;)if(t(n[e],e,n))return!0;return!1}var ng=eg;function og(n,t){return n.has(t)}var rg=og,sg=tg,ig=ng,ag=rg,lg=1,cg=2;function dg(n,t,e,o,r,s){var i=e&lg,a=n.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var c=s.get(n),d=s.get(t);if(c&&d)return c==t&&d==n;var u=-1,h=!0,p=e&cg?new sg:void 0;for(s.set(n,t),s.set(t,n);++u<a;){var f=n[u],b=t[u];if(o)var _=i?o(b,f,u,t,n,s):o(f,b,u,n,t,s);if(_!==void 0){if(_)continue;h=!1;break}if(p){if(!ig(t,function(x,O){if(!ag(p,O)&&(f===x||r(f,x,e,o,s)))return p.push(O)})){h=!1;break}}else if(!(f===b||r(f,b,e,o,s))){h=!1;break}}return s.delete(n),s.delete(t),h}var Os=dg;function ug(n){var t=-1,e=Array(n.size);return n.forEach(function(o,r){e[++t]=[r,o]}),e}var hg=ug;function pg(n){var t=-1,e=Array(n.size);return n.forEach(function(o){e[++t]=o}),e}var fg=pg,Jo=Vn,Qo=Mr,gg=be,mg=Os,vg=hg,bg=fg,yg=1,wg=2,Cg="[object Boolean]",Eg="[object Date]",_g="[object Error]",Og="[object Map]",Sg="[object Number]",xg="[object RegExp]",Tg="[object Set]",Ag="[object String]",$g="[object Symbol]",Pg="[object ArrayBuffer]",Ng="[object DataView]",tr=Jo?Jo.prototype:void 0,An=tr?tr.valueOf:void 0;function Dg(n,t,e,o,r,s,i){switch(e){case Ng:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case Pg:return!(n.byteLength!=t.byteLength||!s(new Qo(n),new Qo(t)));case Cg:case Eg:case Sg:return gg(+n,+t);case _g:return n.name==t.name&&n.message==t.message;case xg:case Ag:return n==t+"";case Og:var a=vg;case Tg:var l=o&yg;if(a||(a=bg),n.size!=t.size&&!l)return!1;var c=i.get(n);if(c)return c==t;o|=wg,i.set(n,t);var d=mg(a(n),a(t),o,r,s,i);return i.delete(n),d;case $g:if(An)return An.call(n)==An.call(t)}return!1}var Mg=Dg;function Lg(n,t){for(var e=-1,o=t.length,r=n.length;++e<o;)n[r+e]=t[e];return n}var Ig=Lg,Fg=Ig,jg=en;function Rg(n,t,e){var o=t(n);return jg(n)?o:Fg(o,e(n))}var zg=Rg;function Hg(n,t){for(var e=-1,o=n==null?0:n.length,r=0,s=[];++e<o;){var i=n[e];t(i,e,n)&&(s[r++]=i)}return s}var Bg=Hg;function kg(){return[]}var Vg=kg,Wg=Bg,qg=Vg,Gg=Object.prototype,Ug=Gg.propertyIsEnumerable,er=Object.getOwnPropertySymbols,Yg=er?function(n){return n==null?[]:(n=Object(n),Wg(er(n),function(t){return Ug.call(n,t)}))}:qg,Kg=Yg,Xg=Lr,Zg=Xg(Object.keys,Object),Jg=Zg,Qg=Kn,tm=Jg,em=Object.prototype,nm=em.hasOwnProperty;function om(n){if(!Qg(n))return tm(n);var t=[];for(var e in Object(n))nm.call(n,e)&&e!="constructor"&&t.push(e);return t}var rm=om,sm=kr,im=rm,am=cn;function lm(n){return am(n)?sm(n):im(n)}var cm=lm,dm=zg,um=Kg,hm=cm;function pm(n){return dm(n,hm,um)}var fm=pm,nr=fm,gm=1,mm=Object.prototype,vm=mm.hasOwnProperty;function bm(n,t,e,o,r,s){var i=e&gm,a=nr(n),l=a.length,c=nr(t),d=c.length;if(l!=d&&!i)return!1;for(var u=l;u--;){var h=a[u];if(!(i?h in t:vm.call(t,h)))return!1}var p=s.get(n),f=s.get(t);if(p&&f)return p==t&&f==n;var b=!0;s.set(n,t),s.set(t,n);for(var _=i;++u<l;){h=a[u];var x=n[h],O=t[h];if(o)var L=i?o(O,x,h,t,n,s):o(x,O,h,n,t,s);if(!(L===void 0?x===O||r(x,O,e,o,s):L)){b=!1;break}_||(_=h=="constructor")}if(b&&!_){var D=n.constructor,J=t.constructor;D!=J&&"constructor"in n&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof J=="function"&&J instanceof J)&&(b=!1)}return s.delete(n),s.delete(t),b}var ym=bm,wm=Mt,Cm=lt,Em=wm(Cm,"DataView"),_m=Em,Om=Mt,Sm=lt,xm=Om(Sm,"Promise"),Tm=xm,Am=Mt,$m=lt,Pm=Am($m,"Set"),Nm=Pm,Dm=Mt,Mm=lt,Lm=Dm(Mm,"WeakMap"),Im=Lm,Rn=_m,zn=Un,Hn=Tm,Bn=Nm,kn=Im,Ss=ve,Kt=Ar,or="[object Map]",Fm="[object Object]",rr="[object Promise]",sr="[object Set]",ir="[object WeakMap]",ar="[object DataView]",jm=Kt(Rn),Rm=Kt(zn),zm=Kt(Hn),Hm=Kt(Bn),Bm=Kt(kn),xt=Ss;(Rn&&xt(new Rn(new ArrayBuffer(1)))!=ar||zn&&xt(new zn)!=or||Hn&&xt(Hn.resolve())!=rr||Bn&&xt(new Bn)!=sr||kn&&xt(new kn)!=ir)&&(xt=function(n){var t=Ss(n),e=t==Fm?n.constructor:void 0,o=e?Kt(e):"";if(o)switch(o){case jm:return ar;case Rm:return or;case zm:return rr;case Hm:return sr;case Bm:return ir}return t});var km=xt,$n=Pr,Vm=Os,Wm=Mg,qm=ym,lr=km,cr=en,dr=Xn,Gm=Zn,Um=1,ur="[object Arguments]",hr="[object Array]",Me="[object Object]",Ym=Object.prototype,pr=Ym.hasOwnProperty;function Km(n,t,e,o,r,s){var i=cr(n),a=cr(t),l=i?hr:lr(n),c=a?hr:lr(t);l=l==ur?Me:l,c=c==ur?Me:c;var d=l==Me,u=c==Me,h=l==c;if(h&&dr(n)){if(!dr(t))return!1;i=!0,d=!1}if(h&&!d)return s||(s=new $n),i||Gm(n)?Vm(n,t,e,o,r,s):Wm(n,t,l,e,o,r,s);if(!(e&Um)){var p=d&&pr.call(n,"__wrapped__"),f=u&&pr.call(t,"__wrapped__");if(p||f){var b=p?n.value():n,_=f?t.value():t;return s||(s=new $n),r(b,_,e,o,s)}}return h?(s||(s=new $n),qm(n,t,e,o,r,s)):!1}var Xm=Km,Zm=Xm,fr=Vt;function xs(n,t,e,o,r){return n===t?!0:n==null||t==null||!fr(n)&&!fr(t)?n!==n&&t!==t:Zm(n,t,e,o,xs,r)}var Jm=xs,Qm=Jm;function t0(n,t){return Qm(n,t)}var e0=t0;const gr=br(e0),mr="f-",n0=({editorContainer:n,renderContainer:t,...e})=>{const o=s=>typeof s=="string"?document.querySelector(s):s,r={renderContainer:o(t),editorContainer:o(n)};return Object.assign({},e,r)},vr=n=>{const t=n.match(Tr);return t&&t[0]||n},o0=n=>n.replace(Tr,W()),r0=()=>g.render(g.btnTemplate({className:"remove-input-group",children:g.icon("remove"),action:{mouseover:({target:n})=>n.parentElement.classList.add("will-remove"),mouseleave:({target:n})=>n.parentElement.classList.remove("will-remove"),click:({target:n})=>n.parentElement.remove()}}));let Ts=class{constructor(t,e={}){m(this,"render",(t=this.form)=>{this.form=t;const e=document.getElementsByClassName("formeo-render").length,o={id:this.form.id,className:`formeo-render formeo formeo-rendered-${e}`,children:this.processedData};this.renderedForm=g.render(o),g.empty(this.container),this.applyConditions(),this.container.appendChild(this.renderedForm)});m(this,"orderChildren",(t,e)=>e.reduce((o,r)=>[...o,this.form[t][r]],[]));m(this,"prefixId",t=>mr+t);m(this,"processColumn",({id:t,...e})=>Object.assign({},e,{id:this.prefixId(t),children:this.processFields(e.children),style:`width: ${e.config.width||"100%"}`}));m(this,"processRows",t=>this.orderChildren("rows",this.form.stages[t].children).reduce((e,o)=>o?[...e,this.processRow(o)]:e,[]));m(this,"cacheComponent",t=>(this.components[vr(t.id)]=t,t));m(this,"processRow",(t,e="row")=>{const{config:o,id:r}=t,s=[`formeo-${e}-wrap`],i=Object.assign({},t,{children:this.processColumns(t.id),id:this.prefixId(r)});this.cacheComponent(i);const l=[{condition:o.legend,result:()=>({tag:o.fieldset?"legend":"h3",children:o.legend})},{condition:!0,result:()=>i},{condition:o.inputGroup,result:()=>this.addButton(r)}].reduce((c,{condition:d,result:u})=>d?[...c,u()]:c,[]);return o.inputGroup&&s.push(mr+"input-group-wrap"),{tag:o.fieldset?"fieldset":"div",id:W(),className:s,children:l}});m(this,"cloneComponentData",t=>{const{children:e=[],id:o,...r}=this.components[t];return Object.assign({},r,{id:o0(o),children:e.length&&e.map(({id:s})=>this.cloneComponentData(vr(s)))})});m(this,"addButton",t=>g.render({tag:"button",attrs:{className:"add-input-group btn pull-right",type:"button"},children:"Add +",action:{click:e=>{const o=e.target.parentElement,r=g.render(this.cloneComponentData(t));o.insertBefore(r,o.lastChild),r.appendChild(r0())}}}));m(this,"processColumns",t=>this.orderChildren("columns",this.form.rows[t].children).map(e=>this.cacheComponent(this.processColumn(e))));m(this,"processFields",t=>this.orderChildren("fields",t).map(({id:e,...o})=>this.cacheComponent(Object.assign({},o,{id:this.prefixId(e)}))));m(this,"applyConditions",()=>{Object.values(this.components).forEach(({conditions:t})=>{t&&t.forEach((e,o)=>{const{if:r,then:s}=e;r.forEach(i=>{const{source:a,...l}=i;bt(a)&&this.getComponents(a).forEach(d=>{const u=s0(d);u&&d.addEventListener(u,p=>this.evaluateCondition(l,p)&&s.forEach(f=>this.execResult(f,p)),!1);const h={target:d};this.evaluateCondition(l,h)&&s.forEach(p=>this.execResult(p,h))})})})})});m(this,"evaluateCondition",({sourceProperty:t,targetProperty:e,comparison:o,target:r},s)=>{const i={equals:gr,notEquals:(c,d)=>!gr(c,d),contains:(c,d)=>c.includes(d),notContains:(c,d)=>!c.includes(d)},a=String(s.target[t]),l=String(bt(r)?this.getComponent(r)[e]:r);return i[o]&&i[o](a,l)});m(this,"execResult",({assignment:t,target:e,targetProperty:o,value:r})=>{const s={equals:i=>{const a={value:()=>{i[o]=r},isNotVisible:()=>{i.parentElement.setAttribute("hidden",!0),i.required=!1},isVisible:()=>{i.parentElement.removeAttribute("hidden"),i.required=i._required}};a[o]&&a[o]()}};if(bt(e)){const i=this.getComponent(e);i&&i._required===void 0&&(i._required=i.required),s[t]&&s[t](i)}});m(this,"getComponent",t=>{const e=t.slice(t.indexOf(".")+1);return Ue(t)?this.external[e]:this.renderedForm.querySelector(`#f-${e}`)});m(this,"getComponents",t=>{const e=[],o=t.slice(t.indexOf(".")+1);return Ue(t)?e.push(this.external[o]):e.push(...this.renderedForm.querySelectorAll(`[name=f-${o}]`)),e});const{renderContainer:o,external:r}=n0(t);this.container=o,this.form=e,this.external=r,this.dom=g,this.components=Object.create(null)}get processedData(){return Object.values(this.form.stages).map(t=>(t.children=this.processRows(t.id),t.className=Wt,g.render(t)))}};const s0=n=>{const t=[["input",o=>["textarea","text"].includes(o.type)],["change",o=>["select"].includes(o.tagName.toLowerCase())||["checkbox","radio"].includes(o.type)]],[e]=t.find(o=>o[1](n))||[!1];return e};window!==void 0&&(window.FormeoEditor=_s,window.FormeoRenderer=Ts);const m0=_s,v0=Ts;export{m0 as F,ve as _,Vn as a,en as b,v0 as c,br as g,Vt as i};
