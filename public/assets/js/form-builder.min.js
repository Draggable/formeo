/*
formBuilder - http://kevinchappell.github.io/formBuilder/
Version: 1.9.27
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
"use strict";function formBuilderHelpersFn(e,t){var a={doCancel:!1};return t.events=formBuilderEventsFn(),a.attrString=function(e){var t=[];for(var l in e)e.hasOwnProperty(l)&&(l=a.safeAttr(l,e[l]),t.push(l.name+l.value));var o=t.join(" ");return o},a.hyphenCase=function(e){return e=e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),e.replace(/\s/g,"-").replace(/^-+/g,"")},a.makeClassName=function(e){return e=e.replace(/[^\w\s\-]/gi,""),a.hyphenCase(e)},a.safeAttrName=function(e){var t={className:"class"};return t[e]||a.hyphenCase(e)},a.safeAttr=function(e,t){e=a.safeAttrName(e);var l=window.JSON.stringify(HTML_ENTITIES.encode(t));return t=t?"="+l:"",{name:e,value:t}},a.mobileClass=function(){var e="";return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=" fb-mobile")}(navigator.userAgent||navigator.vendor||window.opera),e},a.startMoving=function(e,t){e=e,t.item.show().addClass("moving"),a.startIndex=$("li",this).index(t.item)},a.stopMoving=function(e,t){e=e,t.item.removeClass("moving"),a.doCancel&&($(t.sender).sortable("cancel"),$(this).sortable("cancel")),a.save(),a.doCancel=!1},a.beforeStop=function(t,l){t=t;var o=document.getElementById(e.formID),r=o.children.length-1,n=[];a.stopIndex=l.placeholder.index()-1,!e.sortableControls&&l.item.parent().hasClass("frmb-control")&&n.push(!0),e.prepend&&n.push(0===a.stopIndex),e.append&&n.push(a.stopIndex+1===r),a.doCancel=n.some(function(e){return e===!0})},a.safename=function(e){return e.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},a.forceNumber=function(e){return e.replace(/[^0-9]/g,"")},a.initTooltip=function(e){var t=e.find(".tooltip");e.mouseenter(function(){t.outerWidth()>200&&t.addClass("max-width"),t.css("left",e.width()+14),t.stop(!0,!0).fadeIn("fast")}).mouseleave(function(){e.find(".tooltip").stop(!0,!0).fadeOut("fast")}),t.hide()},a.getTypes=function(e){return{type:e.attr("type"),subtype:$(".fld-subtype",e).val()}},a.trimAttrs=function(e){var t=[null,void 0,"",!1];for(var a in e)t.inArray(e[a])&&delete e[a];return e},a.escapeAttrs=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=HTML_ENTITIES.encode(e[t]));return e},a.xmlSave=function(e){var l=$(e).toXML(a);return window.JSON.stringify(l)===window.JSON.stringify(t.formData)?!1:void(t.formData=l)},a.jsonSave=function(){e.notify.warning("json data not available yet")},a.save=function(){var l,o=a.getElement(),r=document.getElementById(e.formID),n={xml:a.xmlSave,json:a.jsonSave};return l=n[e.dataType](r),o&&(o.value=t.formData,window.jQuery?$(o).trigger("change"):o.onchange()),document.dispatchEvent(t.events.formSaved),l},a.getElement=function(){var l=!1;return t.element&&(l=t.element,l.id||a.makeId(l),l.onchange||(l.onchange=function(){e.notify.success(e.messages.formUpdated)})),l},a.incrementId=function(e){var t=e.lastIndexOf("-"),a=parseInt(e.substring(t+1))+1,l=e.substring(0,t);return l+"-"+a},a.makeId=function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=(new Date).getTime();return e.tagName+"-"+t},a.updatePreview=function(e){var t=e.data("fieldData")||{},l=e.attr("class");if(-1===l.indexOf("ui-sortable-handle")){var o,r=$(e).attr("type"),n=$(".prev-holder",e),s={label:$(".fld-label",e).val(),type:r},i=$(".fld-subtype",e).val();i&&(s.subtype=i);var c=$(".fld-maxlength",e).val();c&&(s.maxlength=c),s.className=$(".fld-className",e).val()||t.className||"";var d=$(".fld-placeholder",e).val();d&&(s.placeholder=d);var u=$(".btn-style",e).val();u&&(s.style=u),"checkbox"===r&&(s.toggle=$(".checkbox-toggle",e).is(":checked")),r.match(/(select|checkbox-group|radio-group)/)&&(s.values=[],s.multiple=$('[name="multiple"]',e).is(":checked"),$(".sortable-options li",e).each(function(){var e={};e.selected=$(".option-selected",this).is(":checked"),e.value=$(".option-value",this).val(),e.label=$(".option-label",this).val(),s.values.push(e)})),s.className=a.classNames(e,s),$(".fld-className",e).val(s.className),e.data("fieldData",s),o=a.fieldPreview(s),n.html(o),$("input[toggle]",n).kcToggle()}},a.fieldPreview=function(t){var l,o="",r=(new Date).getTime();t=Object.assign({},t),t.type=t.subtype||t.type;var n=t.toggle?"toggle":"",s=a.attrString(t);switch(t.type){case"textarea":case"rich-text":o="<textarea "+s+"></textarea>";break;case"button":case"submit":o="<button "+s+">"+t.label+"</button>";break;case"select":var i="",c=t.multiple?"multiple":"";for(t.values.reverse(),t.placeholder&&(i+="<option disabled selected>"+t.placeholder+"</option>"),l=t.values.length-1;l>=0;l--){var d=t.values[l].selected&&!t.placeholder?"selected":"";i+='<option value="'+t.values[l].value+'" '+d+">"+t.values[l].label+"</option>"}o="<"+t.type+' class="'+t.className+'" '+c+">"+i+"</"+t.type+">";break;case"checkbox-group":case"radio-group":var u=t.type.replace("-group",""),p=u+"-"+r;for(t.values.reverse(),l=t.values.length-1;l>=0;l--){var m=t.values[l].selected?"checked":"",f=u+"-"+r+"-"+l;o+='<div><input type="'+u+'" class="'+t.className+'" name="'+p+'" id="'+f+'" value="'+t.values[l].value+'" '+m+'/><label for="'+f+'">'+t.values[l].label+"</label></div>"}break;case"text":case"password":case"email":case"date":case"file":o="<input "+s+">";break;case"color":o='<input type="'+t.type+'" class="'+t.className+'"> '+e.messages.selectColor;break;case"hidden":case"checkbox":o='<input type="'+t.type+'" '+n+" >";break;case"autocomplete":o='<input class="ui-autocomplete-input '+t.className+'" autocomplete="on">';break;default:o="<"+t.type+">"+t.label+"</"+t.type+">"}return o},a.updateMultipleSelect=function(){$(document.getElementById(e.formID)).on("change",'input[name="multiple"]',function(){var e=$(this).parents(".field-options:eq(0)").find(".sortable-options input.option-selected");this.checked?e.each(function(){$(this).prop("type","checkbox")}):e.each(function(){$(this).removeAttr("checked").prop("type","radio")})})},a.debounce=function(e){var t,a=arguments.length<=1||void 0===arguments[1]?250:arguments[1],l=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return function(){var o=this,r=arguments,n=function(){t=null,l||e.apply(o,r)},s=l&&!t;clearTimeout(t),t=setTimeout(n,a),s&&e.apply(o,r)}},a.htmlEncode=function(e){return $("<div/>").text(e).html()},a.htmlDecode=function(e){return $("<div/>").html(e).text()},a.validateForm=function(){var t=$(document.getElementById(e.formID)),a=[];$('input[name="label"], input[type="text"].option',t).each(function(){if(""===$(this).val()){var t=$(this).parents("li.form-field"),l=$(this);a.push({field:t,error:e.messages.labelEmpty,attribute:l})}}),a.length&&(alert("Error: "+a[0].error),$("html, body").animate({scrollTop:a[0].field.offset().top},1e3,function(){var e=$(".toggle-form",a[0].field).attr("id");$(".toggle-form",a[0].field).addClass("open").parent().next(".prev-holder").slideUp(250),$("#"+e+"-fld").slideDown(250,function(){a[0].attribute.addClass("error")})}))},a.disabledTT={className:"frmb-tt",add:function(t){var l=e.messages.fieldNonEditable;if(l){var o=a.markup("p",l,{className:a.disabledTT.className});t.append(o)}},remove:function(e){$(".frmb-tt",e).remove()}},a.classNames=function(t,a){var l=["checkbox","checkbox-group","radio-group"],o=["header","paragraph","button"],r=void 0;for(r=o.length-1;r>=0;r--)o=o.concat(e.messages.subtypes[o[r]]);l=l.concat(o);var n=a.type,s=a.style,i=t[0].querySelector(".fld-className").value,c=[].concat(i.split(" ")).reverse(),d={button:"btn",submit:"btn"},u=d[n];if(u){if(s){for(r=c.length-1;r>=0;r--){var p=new RegExp("(?:^|s)"+u+"-(.*?)(?:s|$)+","g"),m=c[r].match(p);m&&c.splice(r,1)}c.push(u+"-"+s)}c.push(u)}else l.inArray(n)||c.push("form-control");return c.reverse().unique().join(" ").trim()},a.markup=function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],l=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=void 0,r=document.createElement(e),n=function(e){return Array.isArray(e)?"array":"undefined"==typeof e?"undefined":_typeof(e)},s={string:function(e){r.innerHTML=e},object:function(e){return r.appendChild(e)},array:function(e){for(var t=0;t<e.length;t++)o=n(e[t]),s[o](e[t])}};for(var i in l)if(l.hasOwnProperty(i)&&l[i]){var c=a.safeAttrName(i);r.setAttribute(c,l[i])}return o=n(t),t&&s[o].call(this,t),r},a.closeConfirm=function(e,a){e=e||document.getElementsByClassName("form-builder-overlay")[0],a=a||document.getElementsByClassName("form-builder-dialog")[0],e.classList.remove("visible"),a.remove(),e.remove(),document.dispatchEvent(t.events.modalClosed)},a.editorLayout=function(e){var t={left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}};return t[e]?t[e]:""},a.showOverlay=function(){var e=a.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(e),e.classList.add("visible"),e.onclick=function(){a.closeConfirm(e)},e},a.confirm=function(t,l){var o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=arguments.length<=3||void 0===arguments[3]?"":arguments[3],n=a.showOverlay(),s=a.markup("button",e.messages.yes,{className:"yes btn btn-success btn-sm"}),i=a.markup("button",e.messages.no,{className:"no btn btn-danger btn-sm"});i.onclick=function(){a.closeConfirm(n)},s.onclick=function(){l(),a.closeConfirm(n)};var c=a.markup("div",[i,s],{className:"button-wrap"});r="form-builder-dialog "+r;var d=a.markup("div",[t,c],{className:r});return o?d.classList.add("positioned"):(o={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},d.style.position="fixed"),d.style.left=o.pageX+"px",d.style.top=o.pageY+"px",document.body.appendChild(d),s.focus(),d},a.dialog=function(e){var l=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],o=arguments.length<=2||void 0===arguments[2]?"":arguments[2];a.showOverlay(),o="form-builder-dialog "+o;var r=a.markup("div",e,{className:o});return l?r.classList.add("positioned"):(l={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},r.style.position="fixed"),r.style.left=l.pageX+"px",r.style.top=l.pageY+"px",document.body.appendChild(r),-1!==o.indexOf("data-dialog")&&document.dispatchEvent(t.events.viewData),r},a.removeAllfields=function(){var t=document.getElementById(e.formID),l=t.querySelectorAll("li.form-field"),o=$(l),r=[];e.prepend&&r.push(!0),e.append&&r.push(!0),r.some(function(e){return e===!0})||t.parentElement.classList.add("empty"),t.classList.add("removing");var n=0;o.each(function(){n+=$(this).outerHeight()+3}),l[0].style.marginTop=-n+"px",setTimeout(function(){o.remove(),document.getElementById(e.formID).classList.remove("removing"),a.save()},500)},a.setFieldOrder=function(t){if(!e.sortableControls)return!1;var a={};t.children().each(function(e,t){a[e]=$(t).data("attrs").type}),window.sessionStorage&&window.sessionStorage.setItem("fieldOrder",window.JSON.stringify(a))},a.orderFields=function(t){var a=!1;window.sessionStorage&&(e.sortableControls?a=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),a?(a=window.JSON.parse(a),a=Object.keys(a).map(function(e){return a[e]})):a=e.controlOrder.unique();for(var l=[],o=a.length-1;o>=0;o--){var r=t.filter(function(e){return e.attrs.type===a[o]})[0];l.push(r)}return l.filter(Boolean)},a}function formBuilderEventsFn(){var e={};return e.loaded=new Event("loaded"),e.viewData=new Event("viewData"),e.userDeclined=new Event("userDeclined"),e.modalClosed=new Event("modalClosed"),e.formSaved=new Event("formSaved"),e}var HTML_ENTITIES=function(){var e={};return e.getHtmlTranslationTable=function(e,t){var a,l={},o={},r={},n={},s={},i={};if(r[0]="HTML_SPECIALCHARS",r[1]="HTML_ENTITIES",n[0]="ENT_NOQUOTES",n[2]="ENT_COMPAT",n[3]="ENT_QUOTES",s=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":r[e],i=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":n[t],"HTML_SPECIALCHARS"!==s&&"HTML_ENTITIES"!==s)throw new Error("Table: "+s+" not supported");l[38]="&amp;","HTML_ENTITIES"===s&&(l[160]="&nbsp;",l[161]="&iexcl;",l[162]="&cent;",l[163]="&pound;",l[164]="&curren;",l[165]="&yen;",l[166]="&brvbar;",l[167]="&sect;",l[168]="&uml;",l[169]="&copy;",l[170]="&ordf;",l[171]="&laquo;",l[172]="&not;",l[173]="&shy;",l[174]="&reg;",l[175]="&macr;",l[176]="&deg;",l[177]="&plusmn;",l[178]="&sup2;",l[179]="&sup3;",l[180]="&acute;",l[181]="&micro;",l[182]="&para;",l[183]="&middot;",l[184]="&cedil;",l[185]="&sup1;",l[186]="&ordm;",l[187]="&raquo;",l[188]="&frac14;",l[189]="&frac12;",l[190]="&frac34;",l[191]="&iquest;",l[192]="&Agrave;",l[193]="&Aacute;",l[194]="&Acirc;",l[195]="&Atilde;",l[196]="&Auml;",l[197]="&Aring;",l[198]="&AElig;",l[199]="&Ccedil;",l[200]="&Egrave;",l[201]="&Eacute;",l[202]="&Ecirc;",l[203]="&Euml;",l[204]="&Igrave;",l[205]="&Iacute;",l[206]="&Icirc;",l[207]="&Iuml;",l[208]="&ETH;",l[209]="&Ntilde;",l[210]="&Ograve;",l[211]="&Oacute;",l[212]="&Ocirc;",l[213]="&Otilde;",l[214]="&Ouml;",l[215]="&times;",l[216]="&Oslash;",l[217]="&Ugrave;",l[218]="&Uacute;",l[219]="&Ucirc;",l[220]="&Uuml;",l[221]="&Yacute;",l[222]="&THORN;",l[223]="&szlig;",l[224]="&agrave;",l[225]="&aacute;",l[226]="&acirc;",l[227]="&atilde;",l[228]="&auml;",l[229]="&aring;",l[230]="&aelig;",l[231]="&ccedil;",l[232]="&egrave;",l[233]="&eacute;",l[234]="&ecirc;",l[235]="&euml;",l[236]="&igrave;",l[237]="&iacute;",l[238]="&icirc;",l[239]="&iuml;",l[240]="&eth;",l[241]="&ntilde;",l[242]="&ograve;",l[243]="&oacute;",l[244]="&ocirc;",l[245]="&otilde;",l[246]="&ouml;",l[247]="&divide;",l[248]="&oslash;",l[249]="&ugrave;",l[250]="&uacute;",l[251]="&ucirc;",l[252]="&uuml;",l[253]="&yacute;",l[254]="&thorn;",l[255]="&yuml;"),"ENT_NOQUOTES"!==i&&(l[34]="&quot;"),"ENT_QUOTES"===i&&(l[39]="&#39;"),l[60]="&lt;",l[62]="&gt;";for(a in l)l.hasOwnProperty(a)&&(o[String.fromCharCode(a)]=l[a]);return o},e.encode=function(e,t){var a=this.getHtmlTranslationTable("HTML_ENTITIES",t);if(e=null===e?"":e+"",!a)return!1;t&&"ENT_QUOTES"===t&&(a["'"]="&#039;");var l=new RegExp("&(?:#\\d+|#x[\\da-f]+|[a-zA-Z][\\da-z]*);|["+Object.keys(a).join("").replace(/([()[\]{}\-.*+?^$|\/\\])/g,"\\$1")+"]","g");return e.replace(l,function(e){var t=void 0;return e.length>1&&(t=e),t=a[e]})},e}(HTML_ENTITIES||{}),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){var t=function(t,a){var l={theme:"fresh",labels:{off:"Off",on:"On"}},o=e.extend(l,a),r=e('<div class="kc-toggle"/>').insertAfter(t).append(t);r.toggleClass("on",t.is(":checked"));var n='<div class="kct-on">'+o.labels.on+"</div>",s='<div class="kct-off">'+o.labels.off+"</div>",i='<div class="kct-handle"></div>',c='<div class="kct-inner">'+n+i+s+"</div>";r.append(c),r.click(function(){t.attr("checked",!t.attr("checked")),e(this).toggleClass("on")})};e.fn.kcToggle=function(a){var l=this;return l.each(function(){var l=e(this);if(!l.data("kcToggle")){var o=new t(l,a);l.data("kcToggle",o)}})}}(jQuery),function(e){var t=function(t,a){var l=this,o={controlPosition:"right",controlOrder:["autocomplete","button","checkbox","checkbox-group","date","file","header","hidden","paragraph","radio-group","select","text","textarea"],dataType:"xml",disableFields:["autocomplete","hidden"],append:!1,prepend:!1,defaultFields:[],fieldRemoveWarn:!1,roles:{1:"Administrator"},messages:{addOption:"Add Option",allFieldsRemoved:"All fields were removed.",allowSelect:"Allow Select",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clearAll:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",fieldDeleteWarning:!1,fieldVars:"Field Variables",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",name:"Name",no:"No",off:"Off",on:"On",option:"Option",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",paragraph:"Paragraph",placeholder:"Placeholder",placeholders:{value:"Value",label:"Label",text:"",textarea:"",email:"Enter you email",placeholder:"",className:"space separated classes",password:"Enter your password"},preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size",sizes:{xs:"Extra Small",sm:"Small",m:"Default",lg:"Large"},style:"Style",styles:{btn:{"default":"Default",danger:"Danger",info:"Info",primary:"Primary",success:"Success",warning:"Warning"}},subtype:"Type",subtypes:{text:["text","password","email","color"],button:["button","submit"],header:["h1","h2","h3"],paragraph:["p","address","blockquote","canvas","output"]},text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",viewXML:"&lt;/&gt;",yes:"Yes"},notify:{error:function(e){return console.error(e)},success:function(e){return console.log(e)},warning:function(e){return console.warn(e)}},sortableControls:!1,prefix:"form-builder-"};o.messages.subtypes.password=o.messages.subtypes.text,o.messages.subtypes.email=o.messages.subtypes.text,o.messages.subtypes.color=o.messages.subtypes.text,o.messages.subtypes.submit=o.messages.subtypes.button;var r=e.extend(!0,o,t),n=e(a),s="frmb-"+e("ul[id^=frmb-]").length++;r.formID=s,l.element=a;var i=e("<ul/>").attr("id",s).addClass("frmb"),c=formBuilderHelpersFn(r,l);l.layout=c.editorLayout(r.controlPosition);var d=s+"-fld-1",u=s+"-control-box",p=[{tag:"textarea",meta:{label:r.messages.textArea},attrs:{className:"text-area",name:"textarea"}}],m=c.markup("ul",null,{id:u,className:"frmb-control"});r.sortableControls&&m.classList.add("sort-enabled");for(var f=e(m),v=p.length-1;v>=0;v--){var g=e("<li/>",{"class":"icon-"+p[v].attrs.className,type:p[v].type,name:p[v].className,label:p[v].label});g.data("newFieldData",p[v]);var h=c.markup("span",p[v].label);g.html(h).appendTo(f)}var b="xml"===r.dataType?r.messages.viewXML:r.messages.viewJSON,y=c.markup("button",b,{id:s+"-view-data",type:"button",className:"view-data btn btn-default"}),k=c.markup("button",r.messages.clearAll,{id:s+"-clear-all",type:"button",className:"clear-all btn btn-default"}),w=c.markup("button",r.messages.save,{className:"btn btn-primary "+r.prefix+"save",id:s+"-save",type:"button"}),x=c.markup("div",[k,y,w],{className:"form-actions btn-group"}).outerHTML;i.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:c.beforeStop,start:c.startMoving,stop:c.stopMoving,cancel:"input, select, .disabled, .form-group, .btn",placeholder:"frmb-placeholder"}),f.sortable({helper:"clone",opacity:.9,connectWith:i,cursor:"move",placeholder:"ui-state-highlight",start:c.startMoving,stop:c.stopMoving,revert:150,beforeStop:c.beforeStop,update:function(e,t){return c.doCancel?!1:(e=e,void(t.item.parent()[0]===i[0]?(S(t.item,!0),c.doCancel=!0):(c.setFieldOrder(f),c.doCancel=!r.sortableControls)))}});var E=e("<div/>",{id:s+"-stage-wrap","class":"stage-wrap "+l.layout.stage}),T=e("<div/>",{id:s+"-form-wrap","class":"form-wrap form-builder"+c.mobileClass()});n.before(E).appendTo(E);var N=e("<div/>",{id:s+"-cb-wrap","class":"cb-wrap "+l.layout.controls}).append(f[0],x);E.append(i,N),E.before(T),T.append(E,N);var C=c.debounce(function(t){if(t&&"keyup"===t.type&&"className"===this.name)return!1;var a=e(this).parents(".form-field:eq(0)");c.updatePreview(a),c.save()});i.on("change blur keyup",".form-elements input, .form-elements select, .form-elements textarea",C);var A=function(){var t=[];if(r.prepend&&!e(".disabled.prepend",i).length){var a=c.markup("li",r.prepend,{className:"disabled prepend"});t.push(!0),i.prepend(a)}if(r.append&&!e(".disabled.append",i).length){var l=c.markup("li",r.append,{className:"disabled append"});t.push(!0),i.append(l)}t.some(function(e){return e===!0})&&E.removeClass("empty")},S=function(t){var a=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],l={};if(t instanceof jQuery){var o=t.data("newFieldData");if(o)l=o.attrs,l.label=o.label;else{var r=t[0].attributes;a||(l.values=t.children().map(function(t,a){return{label:e(a).text(),value:e(a).attr("value"),selected:Boolean(e(a).attr("selected"))}}));for(var n=r.length-1;n>=0;n--)l[r[n].name]=r[n].value}}else l=t;l.label=c.htmlEncode(l.label),l.name=a?M(l):l.name,l.role=l.role,l.className=l.className||l["class"],l.required="true"===l.required||l.required===!0,l.maxlength=l.maxlength,l.toggle=l.toggle,l.multiple=l.type.match(/(checkbox-group)/),l.description=void 0!==l.description?c.htmlEncode(l.description):"";var s=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(l.className);s&&(l.style=s[1]),D(l),E.removeClass("empty")},O=function(){var t="";t=l.formData?l.formData:""!==n.val()?e.parseXML(l.element.value.trim()):!1;var a=e(t).find("field");if(a.length>0)l.formData=t,a.each(function(){S(e(this))});else if(!t)if(r.defaultFields&&r.defaultFields.length){r.defaultFields.reverse();for(var o=r.defaultFields.length-1;o>=0;o--)S(r.defaultFields[o]);E.removeClass("empty"),c.save()}else r.prepend||r.append||E.addClass("empty").attr("data-content",r.messages.getStarted);e("li.form-field:not(.disabled)",i).each(function(){c.updatePreview(e(this))}),A()},I=function(){var e={xml:O,json:function(){console.log("coming soon")}};e[r.dataType]()};i.on("mousemove","li.disabled",function(t){e(".frmb-tt",this).css({left:t.offsetX-16,top:t.offsetY-34})}),i.on("mouseenter","li.disabled",function(){c.disabledTT.add(e(this))}),i.on("mouseleave","li.disabled",function(){c.disabledTT.remove(e(this))});var M=function(e){var t=(new Date).getTime();return e.type+"-"+t},L=function(e){R(r.messages.textArea,H(e),e)},q=function(e){var t=e.type||"text";R(r.messages[t],H(e),e)},$=function(t){t.values&&t.values.length||(t.values=[{selected:!0},{selected:!1}],t.values=t.values.map(function(e,t){return e.label=r.messages.option+" "+(t+1),e.value=c.hyphenCase(e.label),e}));var a="";for(a+=H(t),a+='<div class="form-group field-options">',a+='<label class="false-label">'+r.messages.selectOptions+"</label>",a+='<div class="sortable-options-wrap">',"select"===t.type&&(a+='<div class="allow-multi">',a+='<input type="checkbox" id="multiple_'+d+'" name="multiple"'+(t.multiple?'checked="checked"':"")+">",a+='<label class="multiple" for="multiple_'+d+'">'+r.messages.selectionsMessage+"</label>",a+="</div>"),a+='<ol class="sortable-options">',v=0;v<t.values.length;v++)a+=z(t.name,t.values[v],t.values[v].selected,t.multiple);a+="</ol>";var l=c.markup("a",r.messages.addOption,{className:"add add-opt"});a+=c.markup("div",l,{className:"option-actions"}).outerHTML,a+="</div>",a+="</div>",R(r.messages.select,a,t),e(".sortable-options").sortable()},D=function(e){var t={select:$,"rich-text":L,textarea:L,"radio-group":$,"checkbox-group":$};e=e||"",t[e.type]?t[e.type](e):q(e)},H=function W(t){var a,W=[],l=void 0!==t.role?t.role.split(","):[];W.push(F("label",t)),t.size=t.size||"m",t.style=t.style||"default",W.push(j(t)),W.push(B(t)),W.push(_(t.style,t.type)),W.push(F("placeholder",t)),W.push(F("className",t)),W.push(F("name",t)),W.push('<div class="form-group access-wrap"><label>'+r.messages.roles+"</label>"),W.push('<input type="checkbox" name="enable_roles" value="" '+(void 0!==t.role?"checked":"")+' id="enable_roles-'+d+'"/> <label for="enable_roles-'+d+'" class="roles-label">'+r.messages.limitRole+"</label>"),W.push('<div class="available-roles" '+(void 0!==t.role?'style="display:block"':"")+">");for(a in r.roles)-1===e.inArray(a,["date","4"])&&W.push('<input type="checkbox" name="roles[]" value="'+a+'" id="fld-'+d+"-roles-"+a+'" '+(-1!==e.inArray(a,l)?"checked":"")+' class="roles-field" /><label for="fld-'+d+"-roles-"+a+'">'+r.roles[a]+"</label><br/>");return W.push("</div></div>"),W.push(F("maxlength",t)),W.join("")},j=function(e){var t=["header","paragraph","button"],a=[],l="";if(t=t.concat(r.messages.subtypes.header,r.messages.subtypes.paragraph),-1===t.indexOf(e.type)&&a.push(!0),a.some(function(e){return e===!0})){var o=c.markup("label",r.messages.description,{"for":"description-"+d}),n=c.markup("input",null,{type:"text",className:"fld-description form-control",name:"description",id:"description-"+d,value:e.description}),s=c.markup("div",[o,n],{"class":"form-group description-wrap"});l=s.outerHTML}return l},B=function Y(e){var t=r.messages.subtypes,a=e.type,l=e.subtype||"",Y="",o=void 0;if(t[a]){var n="<label>"+r.messages.subtype+"</label>";Y+='<select name="subtype" class="fld-subtype form-control" id="subtype-'+d+'">',t[a].forEach(function(e){o=l===e?"selected":"",Y+='<option value="'+e+'" '+o+">"+e+"</option>"}),Y+="</select>",Y='<div class="form-group subtype-wrap">'+n+" "+Y+"</div>"}return Y},_=function(e,t){var a={button:"btn"},l=r.messages.styles[a[t]],o="";if(l){var n="<label>"+r.messages.style+"</label>";o+='<input value="'+e+'" name="style" type="hidden" class="btn-style">',o+='<div class="btn-group" role="group">',Object.keys(r.messages.styles[a[t]]).forEach(function(l){var n=e===l?"active":"";o+='<button value="'+l+'" type="'+t+'" class="'+n+" btn-xs "+a[t]+" "+a[t]+"-"+l+'">'+r.messages.styles[a[t]][l]+"</button>"}),o+="</div>",o='<div class="form-group style-wrap">'+n+" "+o+"</div>"}return o},F=function(e,t){var a=["text","textarea","select"],l=["header"],o=["paragraph"],n=["checkbox","select","checkbox-group","date","autocomplete","radio-group","hidden","button","header"],s="label"===e?t.label:t[e]||"",i=r.messages[e];"label"===e&&o.inArray(t.type)&&(i=r.messages.content),l=l.concat(r.messages.subtypes.header,o),n=n.concat(o);var c=r.messages.placeholders,u=c[e]||"",p="",m=[];if("placeholder"!==e||a.inArray(t.type)||m.push(!0),"name"===e&&l.inArray(t.type)&&m.push(!0),"maxlength"===e&&n.inArray(t.type)&&m.push(!0),!m.some(function(e){return e===!0})){var f="<label>"+i+"</label>";p+="label"===e&&o.inArray(t.type)?'<textarea name="'+e+'" placeholder="'+u+'" class="fld-'+e+' form-control" id="'+e+"-"+d+'">'+s+"</textarea>":'<input type="text" value="'+s+'" name="'+e+'" placeholder="'+u+'" class="fld-'+e+' form-control" id="'+e+"-"+d+'">',p='<div class="form-group '+e+'-wrap">'+f+" "+p+"</div>"}return p},P=function(e){var t=["header","paragraph","button"],a=[],l="";if(t.inArray(e.type)&&a.push(!0),!a.some(function(e){return e===!0})){l+='<div class="form-group">',l+="<label>&nbsp;</label>";var o=c.markup("input",null,{className:"required",type:"checkbox",name:"required-"+d,id:"required-"+d,value:1});o.defaultChecked=e.required,l+=o.outerHTML,l+=c.markup("label",r.messages.required,{className:"required-label","for":"required-"+d}).outerHTML,l+="</div>"}return l},R=function(t,a,l){var o=e(a).find('input[name="label"]').val(),n=o?o:t,s=c.markup("a",r.messages.remove,{id:"del_"+d,className:"del-button btn delete-confirm",title:r.messages.removeMessage}),u=c.markup("a",null,{id:d+"-edit",className:"toggle-form btn icon-pencil",title:r.messages.hide}),p=l.required,m=l.toggle||void 0,f=""!==l.description?'<span class="tooltip-element" tooltip="'+l.description+'">?</span>':"",v=c.markup("div",[u,s],{className:"field-actions"}).outerHTML;v+='<label class="field-label">'+n+"</label>"+f+'<span class="required-asterisk" '+(p?'style="display:inline"':"")+"> *</span>",v+=c.markup("div","",{className:"prev-holder"}).outerHTML,v+='<div id="'+d+'-holder" class="frm-holder">',v+='<div class="form-elements">',v+=P(l),"checkbox"===l.type&&(v+='<div class="form-group">',v+="<label>&nbsp;</label>",v+='<input class="checkbox-toggle" type="checkbox" value="1" name="toggle-'+d+'" id="toggle-'+d+'"'+("true"===m?" checked":"")+' /><label class="toggle-label" for="toggle-'+d+'">'+r.messages.toggle+"</label>",v+="</div>"),v+=a,v+=c.markup("a",r.messages.close,{className:"close-field"}).outerHTML,v+="</div>",v+="</div>";var g=c.markup("li",v,{"class":l.type+"-field form-field",type:l.type,id:d}),h=e(g);h.data("fieldData",{attrs:l}),"undefined"!=typeof c.stopIndex?e("> li",i).eq(c.stopIndex).after(h):i.append(h),c.updatePreview(h),e(document.getElementById("frm-"+d+"-item")).hide().slideDown(250),d=c.incrementId(d)},z=function(e,t,a,l){var o={selected:l?"checkbox":"radio"},n={selected:a,label:"",value:""},s=Object.assign(n,t),i=[];for(var d in s)if(s.hasOwnProperty(d)){var u={type:o[d]||"text","class":"option-"+d,placeholder:r.messages.placeholders[d],value:s[d],name:e},p=c.markup("input",null,u);"selected"===d&&(p.checked=s.selected),i.push(p)}var m={className:"remove btn",title:r.messages.removeMessage};i.push(c.markup("a",r.messages.remove,m));var f=c.markup("li",i);return f.outerHTML};i.on("click touchstart",".remove",function(t){var a=e(this).parents(".form-field:eq(0)");t.preventDefault();var l=e(this).parents(".sortable-options:eq(0)").children("li").length;2>=l?r.notify.error("Error: "+r.messages.minOptionMessage):e(this).parent("li").slideUp("250",function(){e(this).remove()}),C.call(a)}),i.on("touchstart","input",function(t){if(t.handled===!0)return!1;if("checkbox"===e(this).attr("type"))e(this).trigger("click");else{e(this).focus();var a=e(this).val();e(this).val(a)}}),i.on("click touchstart",".toggle-form",function(t){if(t.stopPropagation(),t.preventDefault(),t.handled===!0)return!1;var a=e(this).parents(".form-field:eq(0)").attr("id");c.toggleEdit(a),t.handled=!0}),c.toggleEdit=function(t){var a=document.getElementById(t),l=e(".toggle-form",a),o=e(".frm-holder",a);
a.classList.toggle("editing"),l.toggleClass("open"),e(".prev-holder",a).slideToggle(250),o.slideToggle(250)},i.on("keyup change",'[name="label"]',function(){e(".field-label",e(this).closest("li")).text(e(this).val())}),i.delegate("input.error","keyup",function(){e(this).removeClass("error")}),i.on("keyup",'input[name="description"]',function(){var t=e(this).parents(".form-field:eq(0)"),a=e(".tooltip-element",t),l=e(this).val();if(""!==l)if(a.length)a.attr("tooltip",l).css("display","inline-block");else{var o='<span class="tooltip-element" tooltip="'+l+'">?</span>';e(".field-label",t).after(o)}else a.length&&a.css("display","none")}),c.updateMultipleSelect(),i.delegate('input[name="name"]',"keyup",function(){e(this).val(c.safename(e(this).val())),""===e(this).val()?e(this).addClass("field_error").attr("placeholder",r.messages.cannotBeEmpty):e(this).removeClass("field_error")}),i.delegate("input.fld-maxlength","keyup",function(){e(this).val(c.forceNumber(e(this).val()))}),i.on("click touchstart",".delete-confirm",function(t){t.preventDefault();var a=this.getBoundingClientRect(),l=document.body.getBoundingClientRect(),o={pageX:a.left+a.width/2,pageY:a.top-l.top-12},n=e(this).parents(".form-field:eq(0)").attr("id"),s=e(document.getElementById(n)),d=function(){s.slideUp(250,function(){s.removeClass("deleting"),s.remove(),c.save(),i[0].childNodes.length||E.addClass("empty").attr("data-content",r.messages.getStarted)})};if(document.addEventListener("modalClosed",function(){s.removeClass("deleting")},!1),r.fieldRemoveWarn){var u=c.markup("h3",r.messages.warning),p=c.markup("p",r.messages.fieldRemoveWarning);c.confirm([u,p],d,o),s.addClass("deleting")}else d(s)}),i.on("click",".style-wrap button",function(){var t=e(this).val(),a=e(this).parent(),l=a.prev(".btn-style");l.val(t),e(this).siblings(".btn").removeClass("active"),e(this).addClass("active"),C.call(a)}),i.on("click","input.required",function(){var t=e(this).parents("li.form-field").find(".required-asterisk");t.toggle()}),i.on("click",'input[name="enable_roles"]',function(){var t=e(this).siblings("div.available-roles"),a=e(this);t.slideToggle(250,function(){a.is(":checked")||e('input[type="checkbox"]',t).removeAttr("checked")})}),i.on("click",".add-opt",function(t){t.preventDefault();var a=e(this).parents(".field-options:eq(0)"),l=e('[name="multiple"]',a),o=e(".option-selected:eq(0)",a),r=!1;r=l.length?l.prop("checked"):"checkbox"===o.attr("type");var n=o.attr("name");e(".sortable-options",a).append(z(n,!1,!1,r)),c.updateMultipleSelect()}),i.on("click touchstart",".close-field",function(){var t=e(this).parents("li.form-field:eq(0)").attr("id");c.toggleEdit(t)}),i.on("mouseover mouseout",".remove, .del-button",function(){e(this).parents("li:eq(0)").toggleClass("delete")});var U=e(document.getElementById(s+"-view-data"));U.click(function(e){e.preventDefault();var t=c.htmlEncode(n.val()),a=c.markup("code",t,{className:"xml"}),l=c.markup("pre",a);c.dialog(l,null,"data-dialog")});var X=e(document.getElementById(s+"-clear-all"));return X.click(function(){var t=e("li.form-field"),a=this.getBoundingClientRect(),l=document.body.getBoundingClientRect(),o={pageX:a.left+a.width/2,pageY:a.top-l.top-12};t.length?c.confirm(r.messages.clearAllMessage,function(){c.removeAllfields(),r.notify.success(r.messages.allFieldsRemoved),c.save()},o):c.dialog("There are no fields to clear",{pageX:o.pageX,pageY:o.pageY})}),e(document.getElementById(s+"-save")).click(function(e){e.preventDefault(),c.save(),c.validateForm(e)}),n.parent().find('p[id*="ideaTemplate"]').remove(),n.wrap('<div class="template-textarea-wrap"/>'),I(),i.css("min-height",f.height()),document.dispatchEvent(l.events.loaded),l};e.fn.formBuilder=function(a){return this.each(function(){var l,o=this;if(e(o).data("formBuilder")){var r=e(o).parents(".form-builder:eq(0)"),n=e(o).clone();r.before(n),r.remove(),l=new t(a,n[0]),n.data("formBuilder",l)}else l=new t(a,o),e(o).data("formBuilder",l)})}}(jQuery),function(e){e.fn.toXML=function(t){var a="",l=function(a){var l=[];return e(".sortable-options li",a).each(function(){var a=e(this),o={value:e(".option-value",a).val(),selected:e(".option-selected",a).is(":checked")},r=t.markup("option",e(".option-label",a).val(),o).outerHTML;l.push("\n			"+r)}),l.join("")+"\n		"};return this.each(function(){var o=this;o.childNodes.length>=1&&(a+="<form-template>\n	<fields>",o.childNodes.forEach(function(o){var r=e(o),n=r.data("fieldData");if(!r.hasClass("disabled")){var s=o.querySelectorAll(".roles-field:checked").map(function(e){return e.value}).join(","),i=t.getTypes(r),c={className:n.className,description:e("input.fld-description",r).val(),label:e(".fld-label",r).val(),maxlength:e("input.fld-maxlength",r).val(),multiple:e('input[name="multiple"]',r).is(":checked"),name:e("input.fld-name",r).val(),placeholder:e("input.fld-placeholder",r).val(),required:e("input.required",r).is(":checked"),role:s,toggle:e(".checkbox-toggle",r).is(":checked"),type:i.type,subtype:i.subtype};c=t.trimAttrs(c),c=t.escapeAttrs(c);var d,u=c.type.match(/(select|checkbox-group|radio-group)/),p="";u&&(p=l(r)),d=t.markup("field",p,c),a+="\n		"+d.outerHTML}}),a+="\n	</fields>\n</form-template>")}),a}}(jQuery),"function"!=typeof Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),a=1;a<arguments.length;a++){var l=arguments[a];if(void 0!==l&&null!==l)for(var o in l)l.hasOwnProperty(o)&&(t[o]=l[o])}return t}}(),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Event&&!function(){window.Event=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}}(),Array.prototype.inArray=function(e){return-1!==this.indexOf(e)},Array.prototype.unique=function(){return this.filter(function(e,t,a){return a.indexOf(e)===t})},Array.prototype.remove=function(){for(var e,t,a=arguments,l=a.length;l&&this.length;)for(e=a[--l];-1!==(t=this.indexOf(e));)this.splice(t,1);return this},NodeList.prototype.forEach=Array.prototype.forEach,NodeList.prototype.map=Array.prototype.map;
//# sourceMappingURL=form-builder.min.js.map
